"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[2051],{82051:function(e,t,r){r.d(t,{W:function(){return T}});var n=r(15671),i=r(43144),a=r(4942),o=r(61156),s={BBD:"BBD",IRIS:"IRIS",UNKNOWN:"unknown"},c={VIEW:{BYO:{EXTERIOR:"byo_hero_exterior",EXTERIOR_THUMB:"byo_hero_exterior_thumbnail",INTERIOR:"byo_hero_interior",INTERIOR_PANO:"byo_hero_interior_pano",INTERIOR_THUMB:"byo_hero_thumbnail_interior"},MODEL:{EXTERIOR:"model_hero_exterior",EXTERIOR_THUMB:"model_hero_exterior_thumbnail",INTERIOR:"model_hero_interior",INTERIOR_PANO:"model_hero_interior_pano",INTERIOR_THUMB:"model_hero_thumbnail_interior"}},POV:{EXTERIOR:{FRONT:"E01",BACK:"E16"},INTERIOR:{FRONT:"I01",BACK:"I02"}}},l={PAINT:"paint",UPHOLSTERY:"fabric",WHEELS:"sa",PACKAGES:"sa",ACCESSORIES:"sa",STAND_ALONE_OPTIONS:"sa",TRIM:"sa",SOFT_TOP:"sa",SEAT_BELTS:"sa",CROSSBAR:"sa"},u=r(42982),p=r(72378),h=r.n(p);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=1.5,f=["vehicle","pov","paint","fabric","sa","hfov","pitch","tilt","angle","width","height","w","h","x","y","bkgnd","quality"],v=/[:]+/gi,O=["NOGLINTS","SHADOW","9:ZZZ","RSW","BGE","TI","9XX"],y={small:"default",large:"desktop",xlarge:"desktop",xxlarge:"desktop"},b={error:!0,message:"An error as occurred"},I=function(){function e(t){var r=this;(0,n.Z)(this,e),t.mediaServerConfig||console.error("config.mediaServerConfig is required"),t.mediaServerConfig.presets||console.error("config.mediaServerConfig.presets is required"),t.mediaServerConfig.support||console.error("config.mediaServerConfig.support is required"),t.mediaServerConfig.settings||console.error("config.mediaServerConfig.settings is required"),this.mediaServerPresets=t.mediaServerConfig.presets,this.mediaServerSupport=t.mediaServerConfig.support,this.mediaServerSettings=t.mediaServerConfig.settings,this.mediaServerExclusion=t.mediaServerConfig.exclusion,this.baseUrlIRIS=t.mediaServerConfig.mediaServer.irisBaseUrl||t.mediaServerConfig.mediaServer.baseUrl,this.baseUrlBBD="".concat(t.applicationProperties.msConfigService).concat(t.mediaServerConfig.mediaServer.bbdBaseUrl,"?"),this.imageKey=null,Object.keys(this.mediaServerSettings).forEach((function(e){r.imageKey=r.mediaServerSettings[e].mediaServer})),this.quality=90}return(0,i.Z)(e,[{key:"updateConfig",value:function(e){var t=this;this.mediaServerSupport=h()(this.mediaServerSupport,e.support),this.mediaServerSettings=h()(this.mediaServerSettings,e.settings),this.mediaServerExclusion=h()(this.mediaServerExclusion,e.exclusion),this.mediaServerPresets=h()(this.mediaServerPresets,e.presets),Object.keys(e.presets).forEach((function(r){"default"!==r&&(t.mediaServerPresets[r].default.default=e.presets[r].default.default)}))}},{key:"getSettings",value:function(e,t,r,n){var i="".concat(t.toUpperCase(),"|").concat(r.toUpperCase()).concat(n?"|".concat(n.toUpperCase()):""),a="".concat(e,"|").concat(i);return this.mediaServerSettings[a]||this.mediaServerSettings[i]}},{key:"normalizeOptions",value:function(e){var t=this;if(!e.pov||!e.className||!e.vehicle)return e;var r={year:e.year,className:e.className,model:e.vehicle,pov:null!==e.pov.match("centerpano")?"interior":"exterior",optionID:null};return e.softTop&&(this.imageKey!==s.BBD?e.sa.push(e.softTop.isTopOff?"TDOWN":"TUP"):e.pov="".concat(e.pov,"%2C").concat(e.softTop.isTopOff?"DZO":"DZG")),e.nightMode&&this.imageKey===s.BBD&&(e.pov="".concat(e.pov,"%2CSZN")),Object.keys(e).forEach((function(n){if(o.Gu.isArray(e[n])){if("sa"===n){for(var i=[],a=0;a<e[n].length;a+=1)r.optionID=e[n][a],(t.isValidateOptionID(r)||"TUP"===r.optionID||"TDOWN"===r.optionID)&&i.push(e[n][a]);e[n]=i}e[n]=e[n].unique(),e[n]=e[n].join(",")}else r.optionID=e[n],"fabric"!==n||t.isValidateOptionID(r)||t.imageKey===s.BBD||delete e[n],"softTop"===n&&delete e[n];o.Gu.isString(e[n])&&(e[n]=e[n].replace(v,"_"),e[n]=e[n].replace("+++","ZZZ"),e[n]=e[n].toLowerCase(),e[n]=e[n].replace(/(,)+/g,"%2C"),e[n]=e[n].replace(/%2C/gi,"%2C"))})),e}},{key:"isComponentEnabled",value:function(e){var t;if(e.model?t=e.model.toUpperCase():e.vehicle&&(t=e.vehicle.toUpperCase()),!e.className||!t)throw new Error("className & model/vehicle are required.");var r=e.className.toUpperCase(),n=e.modelLine&&e.modelLine.toUpperCase(),i="".concat(r,"|").concat(t).concat(n?"|".concat(n):""),a="".concat(e.year,"|").concat(i),s=this.mediaServerSupport[a];return!(!Object.hasOwnProperty.call(this.mediaServerSupport,a)||this.mediaServerExclusion&&Object.hasOwnProperty.call(this.mediaServerExclusion,a)||e.componentName&&""!==e.componentName&&Object.hasOwnProperty.call(this.mediaServerSupport,i)&&o.Gu.isArray(s)&&o.Gu.inArray(e.componentName,s)>=0)}},{key:"isValidateOptionID",value:function(e){if(this.imageKey===s.BBD)return!0;var t=e.year,r=e.className,n=e.model,i=e.modelLine,a=[],o=this.getSettings(t,r,n,i);if(o&&Object.hasOwnProperty.call(o,"optionIds")&&Object.hasOwnProperty.call(o,"mediaServerFilter")){var c=o.mediaServerFilter["interior"===e.pov?"interior":"exterior"];return c=c.map((function(e){return e.toUpperCase()})),Object.keys(o.optionIds).forEach((function(e){""===e&&(a=a.concat(o.optionIds[e].split(",")))})),!!e&&!!e.optionID&&(a.indexOf(e.optionID.toUpperCase())>=0||O.indexOf(e.optionID.toUpperCase())>=0||c.indexOf(e.optionID.toUpperCase())>=0)}return console.error("Media Server settings should have a filter object for this vehicle (".concat(t,"|").concat(r,"|").concat(n,")")),!1}},{key:"getMediaServerType",value:function(e){var t=e.year,r=e.className,n=e.model,i=e.modelLine;return this.mediaServerSettings["".concat(t,"|").concat(r,"|").concat(n).concat(i?"".concat(i):"")].mediaServer||s.UNKNOWN}},{key:"setStandardOptions",value:function(e,t,r,n,i){var a=this.getSettings(i.year,t,r,n);if(a){i.paint||(i.paint=a.exteriorOptionId),i.fabric||(i.fabric=a.interiorOptionId),i.sa=o.Gu.isArray(i.sa)?i.sa:[],i.sa.length<=0&&(i.sa.push(a.wheelsOptionId),i.sa.push(a.trimOptionId));var s=o.Gu.isObject(a.optionIds)?a.optionIds:{};Object.keys(s).forEach((function(e){for(var t=e.split(","),r=0;r<t.length;r+=1){var n=t[r].toUpperCase().trim();if(""===n||i.paint===n||i.fabric===n||i.sa.indexOf(n)>=0)for(var a=s[e].split(","),o=0;o<a.length;o+=1){var c=a[o].toUpperCase().trim();""!==c&&i.sa.indexOf(c)<0&&i.sa.push(c)}}}))}}},{key:"addAdditionalOptions",value:function(e,t,r,n){var i=this.getSettings(n.year,e,t,r);i&&(n.sa=o.Gu.isArray(n.sa)?n.sa:[],i.additionalAttributes&&Object.keys(i.additionalAttributes).forEach((function(e){var t,r=i.additionalAttributes[e].defaultMediaOptions;r&&(t=n.sa).push.apply(t,(0,u.Z)(r.split(",")))})))}},{key:"getBreakpoint",value:function(){return y[o.sp.getCurrentState()]}},{key:"parseOptions",value:function(e,t,r){if(!(e&&o.Gu.isObject(e)&&e.year&&""!==e.year&&e.className&&""!==e.className&&e.bodystyle&&""!==e.bodystyle&&e.vehicle&&""!==e.vehicle))return b.message="The params year, className, bodystyle & vehicle must be set.",console.error(b.message),b;var n=null,i=e.dimensions?e.dimensions:{dimensions:{}},a={dimensions:{}},c=e.className.toLowerCase(),l=e.vehicle.toLowerCase(),u=e.modelLine&&e.modelLine.toLowerCase(),p=e.bodystyle.toLowerCase();o.Gu.isObject(e)?(i=Object.assign({},e),e.preset&&o.Gu.isString(e.preset)&&(n=i.preset.toLowerCase(),delete i.preset)):o.Gu.isString(e)&&(n=e.toLowerCase());var h=e;if(n&&(h=Object.assign({},e,{componentName:n})),!this.isComponentEnabled(h))return b.message="The params year, className, bodystyle & vehicle must be set.",console.error(b.message),b;var d=e.pov?e.pov.match(/[0-9]+$/gi):null,g=d?"angle_".concat(d[0]):"default",f=null;if(t=t&&o.Gu.isString(t)&&""!==t?t:this.getBreakpoint(),n){var v=this.mediaServerPresets[p],O="".concat(i.year,"|").concat(l.toUpperCase()).concat(u?"|".concat(u.toUpperCase()):""),y=null;v&&(y=v[O]||v[l]);var I=null;y&&(I=y[g]);var S=null;y&&(S=y.default);var R=null;v&&(R=v.default);var E=null;R&&(E=R[g]);var T=null;R&&(T=R.default);var P=this.mediaServerPresets.default,j=null;P&&(j=P.default);var w=null;j&&(w=j[g]);var C=null;if(j&&(C=j.default),!f&&I&&(f=I[n]),!f&&S&&(f=S[n]),!f&&E&&(f=E[n]),!f&&T&&(f=T[n]),!f&&w&&(f=w[n]),!f&&C&&(f=C[n]),!f)return b.message="No presets found.",b.debugInfo={bodystyle:p,model:l,presetName:n,angle:g,breakpoint:t},console.error(b.message,b.debugInfo),b}if(f&&("centerpano"===f.pov?delete i.pov:i.pov=f.pov,a=Object.assign({},f),f.sa)){a.sa=f.sa.split(",");for(var k=0;k<a.sa.length;k+=1)a.sa[k]=a.sa[k].trim()}var U=a.dimensions&&(a.dimensions[t]||a.dimensions.default)||{},N=i.dimensions&&(i.dimensions[t]||i.dimensions.default)||{};if(o.Gu.isEmpty(U)&&o.Gu.isEmpty(N)||!o.Gu.isObject(U)&&!o.Gu.isObject(N))return b.message="Dimensions must be set.",b.debugInfo={bodystyle:p,model:l,presetName:n,angle:g,options:a},console.error(b.message,b.debugInfo),b;var D=Object.assign({},U,N);if(Object.assign(i,D),!Object.hasOwnProperty.call(i,"width")||!Object.hasOwnProperty.call(i,"height"))return b.message="The width & height must be set.",b.debugInfo={bodystyle:p,model:l,presetName:n,angle:g,options:i},console.error(b.message,b.debugInfo),b;var _=this.getSettings(i.year,c,l,u);if(this.imageKey=_.mediaServer,this.imageKey!==s.BBD&&Object.hasOwnProperty.call(i,"x")&&parseInt(i.x,10)>0&&Object.hasOwnProperty.call(i,"y")&&parseInt(i.y,10)>0&&Object.hasOwnProperty.call(i,"w")&&parseInt(i.w,10)>0&&Object.hasOwnProperty.call(i,"h")&&parseInt(i.h,10)>0&&(i.x=Math.round(i.x/4500*1e4),i.y=Math.round(i.y/2531*1e4),i.w=Math.round(i.w/4500*1e4),i.h=Math.round(i.h/2531*1e4)),(r||o.sp.isRetina())&&(i.width=parseInt(i.width,10)*m,i.height=parseInt(i.height,10)*m),this.setStandardOptions(p,c,l,u,i),this.addAdditionalOptions(c,l,u,i),i=Object.assign({},a,i),a.sa&&a.sa.length>0&&(i.sa=i.sa&&i.sa.length>0?i.sa.concat(a.sa):a.sa),i=this.normalizeOptions(i),_){if(_.mediaServerModelId){var B=_.mediaServerModelId.split("|"),x=B.length>1;i.year=x?B[0]:i.year,i.vehicle=x?B[1]:B[0]}if(i.vehicle="".concat(i.year,"_").concat(i.vehicle.toLowerCase()),i.state&&_.isAMG&&(i.state="rt",e.sa))for(var A=0;A<e.sa.length;A+=1)if("TUP"===e.sa[A]||"TDOWN"===e.sa[A]){i.state="TUP"===e.sa[A]?"rt":"rto";break}}return i.paint&&""!==i.paint&&i.pov&&""!==i.pov?(delete i.year,i):(b.message="The param paint & pov must be set.",b.debugInfo={bodystyle:p,model:l,presetName:n,angle:g,options:i},console.error(b.message,b.debugInfo),b)}},{key:"addParamValueToURI",value:function(e,t){return o.Gu.isString(t)||o.Gu.isArray(t)||o.Gu.isNumber(t)?"&".concat(e,"=").concat(t):""}},{key:"getIRISUrlStr",value:function(e){var t=g({},e),r=this.baseUrlIRIS;r+="&resp=err_status%2C".concat(t.type?t.type:"jpeg"),delete t.type,r+="&quality=".concat(t.quality?t.quality:this.quality),delete t.quality;var n=t.state?t.state:null;delete t.state,delete t.bodystyle,delete t.className;for(var i=0;i<f.length;i+=1){var a=f[i];n&&"pov"===a&&(t[a]+="%2C".concat(n)),r+=this.addParamValueToURI(a,t[a]),delete t[a]}for(var o=Object.keys(t).sort(),s=o.length,c=0;c<s;c+=1){var l=o[c];r+=this.addParamValueToURI(l,t[l])}return new Promise((function(e){return e(r)}))}},{key:"getBBDUrlStr",value:function(e){for(var t=g({},e),r=this.baseUrlBBD,n=["vehicle","paint","fabric","sa","bkgnd","type","nightMode"],i=0;i<n.length;i+=1){var a=n[i];t[a]&&(r+=this.addParamValueToURI(a,t[a])),0===i&&(r=r.replace("&",""))}return fetch(r).then((function(e){return e.json()})).then((function(e){var r=e.imageURL;return r=r.slice(0,r.indexOf("&POV=")+5)+t.pov,t.state&&(r+="%2C".concat(t.state)),t.w&&t.h&&t.x&&t.y&&(r+="&crop=".concat(t.w,",").concat(t.h,",").concat(t.x,",").concat(t.y)),r}))}},{key:"getResponsiveDataStr",value:function(e){return this.getURIObj(e).then((function(e){var t=null,r="";return e&&e.respObj?(t=e.respObj,r+="w:980",r+=",s:".concat(t.large.s),r+=",sr:".concat(t.large.sr),r+="|w:480",r+=",s:".concat(t.small.s),r+=",sr:".concat(t.small.sr)):""}))}},{key:"getURI",value:function(e,t,r){return this.getURIObj(e,t,r).then((function(e){return o.Gu.isString(e)?e:e.URI}))}},{key:"getURIObj",value:function(e,t,r){var n=this.parseOptions(e,t,r);return n.error?Promise.reject(n.message):this.imageKey===s.BBD?this.getBBDURIObj(n):this.getIRISURIObj(n)}},{key:"constructDimensions",value:function(e){var t={},r={},n={},i={},a={},o={};return e.default&&(t={width:e.default.width,height:e.default.height},r={width:e.default.width*m,height:e.default.height*m}),e.phone?(n={width:e.phone.width,height:e.phone.height},i={width:e.phone.width*m,height:e.phone.height*m}):(n=t,i=r),e.desktop?(a={width:e.desktop.width,height:e.desktop.height},o={width:e.desktop.width*m,height:e.desktop.height*m}):(a=t,o=r),{phoneDimensions:n,phoneRetinaDimensions:i,desktopDimensions:a,desktopRetinaDimensions:o}}},{key:"getBBDURIObj",value:function(e){var t=this,r={};return e.dimensions&&(r=this.constructDimensions(e.dimensions)),this.getBBDUrlStr(e).then((function(e){return{URI:e,respObj:{small:{regular:e+t.addParamValueToURI("width",r.phoneDimensions.width)+t.addParamValueToURI("height",r.phoneDimensions.height),retina:e+t.addParamValueToURI("width",r.phoneRetinaDimensions.width)+t.addParamValueToURI("height",r.phoneRetinaDimensions.height)},large:{regular:e+t.addParamValueToURI("width",r.desktopDimensions.width)+t.addParamValueToURI("height",r.desktopDimensions.height),retina:e+t.addParamValueToURI("width",r.desktopRetinaDimensions.width)+t.addParamValueToURI("height",r.desktopRetinaDimensions.height)}}}}))}},{key:"getIRISURIObj",value:function(e){var t={};return e.dimensions&&(t=this.constructDimensions(e.dimensions)),Promise.all([this.getIRISUrlStr(e),this.getIRISUrlStr(h()(e,t.phoneDimensions)),this.getIRISUrlStr(h()(e,t.phoneRetinaDimensions)),this.getIRISUrlStr(h()(e,t.desktopDimensions)),this.getIRISUrlStr(h()(e,t.desktopRetinaDimensions))]).then((function(e){return{URI:e[0],respObj:{small:{regular:e[1],retina:e[2]},large:{regular:e[3],retina:e[4]}}}}))}},{key:"getResponsiveImageObject",value:function(e,t){return this.getURIObj(e,t).then((function(e){return{small:{regular:{sourceUrl:e.respObj.small.s},retina:{sourceUrl:e.respObj.small.sr}},large:{regular:{sourceUrl:e.respObj.large.s},retina:{sourceUrl:e.respObj.large.sr}}}}))}}]),e}();function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var R=null,E=Symbol("singletonEnforcer"),T=function(){function e(t){if((0,n.Z)(this,e),t!==E)throw new Error("Singleton; do not instantiate");this.applicationProperties=window.mbNafta.applicationProperties,this.country=window.mbNafta.pageData.country,this.language=window.mbNafta.pageData.language,this.engine=null,this.configRequests={}}return(0,i.Z)(e,null,[{key:"getInstance",value:function(){return R||(R=new e(E)),R}}]),(0,i.Z)(e,[{key:"fetchConfig",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.year,n=t.className,i=t.model,a=t.modelLine,o=r&&n&&i&&(a||!0),s="".concat(r,"-").concat(n,"-").concat(i).concat(a?"-".concat(a):"");if(this.engine&&o&&this.isComponentEnabled(t))return Promise.resolve();if(this.configRequests[s])return this.configRequests[s];var c=o?"".concat(this.applicationProperties.msConfigService,"/").concat(this.language,"_").concat(this.country,"/ms/model/").concat(r,"/").concat(i).concat(a?"/".concat(a):"","/config/"):"".concat(this.applicationProperties.msConfigService,"/").concat(this.language,"_").concat(this.country,"/ms/config/");return this.configRequests[s]=fetch(c).then((function(e){return e.json()})).then((function(t){delete t.debugLog,delete t.status,e.engine?e.engine.updateConfig(t):e.createEngine(t)})).catch((function(e){console.error(e)})),this.configRequests[s]}},{key:"createEngine",value:function(e){this.engine=new I({mediaServerConfig:e,applicationProperties:this.applicationProperties})}},{key:"isComponentEnabled",value:function(e){return this.engine.isComponentEnabled(e)}},{key:"isValidateOptionID",value:function(e){return this.engine.isValidateOptionID(e)}},{key:"getPresetType",value:function(e,t){return c.VIEW[e][t]}},{key:"getAngle",value:function(e,t){var r=e.split("_")[0];return c.POV[r][t]}},{key:"getBuildImage",value:function(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.view,a=void 0===i?e.VIEW_TYPES.EXTERIOR:i,o=n.pov,s=void 0===o?e.POV_TYPES.FRONT:o,c=n.presetCategory,u=void 0===c?e.PRESET_CATEGORIES.BYO:c,p=n.sa,h=void 0===p?[]:p,d=n.type,g=void 0===d?null:d,m=n.bkgnd,f=void 0===m?null:m,v=n.dimensions,O=void 0===v?null:v,y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],b={year:t.year,className:t.class,vehicle:t.model,bodystyle:t.bodyStyle,modelLine:t.modelLine,paint:null,fabric:null,softTop:null,preset:this.getPresetType(u,a),pov:this.getAngle(a,s),sa:h,nightMode:t.nightMode},I=a.indexOf("EXTERIOR")>-1;return f&&(b.bkgnd=f),g&&(b.type=g),O&&(b.dimensions=O),t.isConvertible&&void 0!==t.isTopOff&&(b.softTop={isTopOff:t.isTopOff}),t.options&&Object.keys(t.options).forEach((function(e){Object.keys(t.options[e]).forEach((function(r){var n=l[r];"PAINT"===r&&I||"UPHOLSTERY"===r?b[n]=t.options[e][r][0].id:"WHEELS"===r&&I?b[n].push(t.options[e][r][0].id):"PAINT"!==r&&"UPHOLSTERY"!==r&&"WHEElS"!==r&&t.options[e][r].forEach((function(e){b[n].push(e.id)}))}))})),this.getURIObj(b).then((function(e){return y?r.parseCubeMapImages(e,t.nightMode):e}))}},{key:"getExteriorImages",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getBuildImage(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({view:e.VIEW_TYPES.EXTERIOR,pov:e.POV_TYPES.FRONT,presetCategory:e.PRESET_CATEGORIES.BYO},n)).then((function(e){var t=o.sp.isRetina(),n={mobile:[],desktop:[]};if(-1!==e.URI.indexOf("be040")){if(r)r.forEach((function(r){var i="be".concat(r),a=e.respObj.large[t?"retina":"regular"].replace(/be040/,i),o=e.respObj.small[t?"retina":"regular"].replace(/be040/,i);n.mobile.push(o),n.desktop.push(a)}));else for(var i=10;i<360;i+=10){var a="be";a=i<=90?"".concat(a,"0").concat(i):"".concat(a).concat(i);var s=e.respObj.large[t?"retina":"regular"].replace(/be040/,a),c=e.respObj.small[t?"retina":"regular"].replace(/be040/,a);n.mobile.push(c),n.desktop.push(s)}return n}for(var l=1;l<33;l+=1){var u="e";u=l<=9?"".concat(u,"0").concat(l):"".concat(u).concat(l);var p=e.respObj.large.regular.replace(/e01/,u),h=e.respObj.small.regular.replace(/e01/,u);n.mobile.push(h),n.desktop.push(p)}return n}))}},{key:"getBuildImages",value:function(t){var r=this,n={exterior:{front:null,back:null},exterior_thumb:{front:null,back:null},interior:{front:null,back:null},interior_thumb:{front:null,back:null},interior_pano:null},i=[];return Object.keys(n).forEach((function(a){if(n[a])Object.keys(n[a]).forEach((function(o){var s=r.getBuildImage(t,{view:e.VIEW_TYPES[a.toUpperCase()],pov:e.POV_TYPES[o.toUpperCase()]}).then((function(e){n[a][o]=e}));i.push(s)}));else{var o=r.getBuildImage(t,{view:e.VIEW_TYPES[a.toUpperCase()]}).then((function(e){n[a]=e}));i.push(o)}})),Promise.all(i).then((function(){return n}))}},{key:"parseCubeMapImages",value:function(e,t){var r=e.URI.split("?")[0],n=e.URI.split("?")[1],i=(0,o.Hx)(n),a=i.POV;delete i.POV;var s=a.split("|"),c=[],l=",szn";return s.forEach((function(e){var n={};Object.keys(i).forEach((function(e){e&&(n[e]=i[e])}));var a=e.includes(l)?"":l;n.pov="".concat(e).concat(t?a:""),c.push("".concat(r).concat((0,o.HD)(n)))})),c}},{key:"getURI",value:function(e){var t=this;return this.fetchConfig({year:e.year,model:e.vehicle,className:e.className}).then((function(){return t.engine.getURI(e)}))}},{key:"getURIObj",value:function(e,t,r){var n=this;return this.fetchConfig({year:e.year,model:e.vehicle,className:e.className,modelLine:e.modelLine}).then((function(){return n.engine.getURIObj(e,t,r)}))}},{key:"getResponsiveImageObject",value:function(e,t){var r=this;return this.fetchConfig({year:e.year,model:e.vehicle,className:e.className}).then((function(){return r.engine.getResponsiveImageObject(e,t)}))}},{key:"getPanoramaSupport",value:function(e){var t=this;return this.fetchConfig({year:e.year,model:e.vehicle,className:e.className}).then((function(){return t.getMediaServerType({year:e.year,model:e.vehicle,className:e.className})})).then((function(r){var n=navigator.userAgent.indexOf("Safari")>-1&&window.navigator.appVersion.indexOf("Version/15.0")>-1;console.log("safariFifteen: ".concat(n));var i="".concat(e.className.toUpperCase(),"|").concat(e.vehicle.toUpperCase()),a=t.engine.mediaServerSettings["".concat(e.year,"|").concat(i)],o=!a.exterior360Disabled,c=!n&&!a.interior360Disabled,l=c&&r===s.BBD;return{exterior360Enabled:o,interior360Enabled:c,nightToggleEnabled:!a.nightToggleDisabled,isCubeMap:l}}))}},{key:"getMediaServerType",value:function(e){var t=this,r=e.year,n=e.className,i=e.model;return this.fetchConfig({year:r,model:i,className:n}).then((function(){return t.engine.getMediaServerType({year:r,className:n,model:i})}))}}]),e}();(0,a.Z)(T,"PRESET_CATEGORIES",{BYO:"BYO",MODEL:"MODEL"}),(0,a.Z)(T,"VIEW_TYPES",{EXTERIOR:"EXTERIOR",EXTERIOR_THUMB:"EXTERIOR_THUMB",INTERIOR:"INTERIOR",INTERIOR_PANO:"INTERIOR_PANO"}),(0,a.Z)(T,"POV_TYPES",{FRONT:"FRONT",BACK:"BACK"}),(0,a.Z)(T,"MEDIA_SERVER_TYPES",s)}}]);
//# sourceMappingURL=7214fb252f5742836fdf.bundle.js.map