"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[4649],{29554:function(e,t,i){i.d(t,{qw:function(){return n.Z},Go:function(){return _},mR:function(){return v}});var n=i(72557),r=(i(47026),i(67384),i(4942)),a=i(15671),o=i(43144),s=i(14569),c=i(48218),l=i(52597),u=i(30168),d=i(61156);function h(){var e=(0,u.Z)(['\n    <div class="mbs-quick-registration">\n        <div class="mbs-quick-registration__content">\n            <div class="mbs-quick-registration__reminder" data-qa-id="mbs-quick-registration__reminder">\n                <div\n                    class="mbs-quick-registration__header mbs-quick-registration__header--bottom-border"\n                    data-qa-id="mbs-quick-registration__header"\n                >\n                    ','\n                </div>\n                <div class="mbs-quick-registration__reminder-container">\n                    <div\n                        class="mbs-quick-registration__reminder-description"\n                        data-qa-id="mbs-quick-registration__reminder-description"\n                    >\n                        ','\n                    </div>\n                </div>\n                <div class="mbs-quick-registration__benefits">\n                    <div\n                        class="mbs-quick-registration__benefits-heading"\n                        data-qa-id="mbs-quick-registration__benefits-heading"\n                    >\n                        ','\n                    </div>\n                    <div class="mbs-quick-registration__benefits-icons">\n                        <div\n                            class="mbs-quick-registration__icon mbs-quick-registration__builds-icon"\n                            data-qa-id="mbs-quick-registration__builds-icon"\n                        >\n                            ','\n                        </div>\n                        <div\n                            class="mbs-quick-registration__icon mbs-quick-registration__inventory-icon"\n                            data-qa-id="mbs-quick-registration__inventory-icon"\n                        >\n                            ','\n                        </div>\n                        <div\n                            class="mbs-quick-registration__icon mbs-quick-registration__recommendations-icon"\n                            data-qa-id="mbs-quick-registration__recommendations-icon"\n                        >\n                            ','\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <button\n                class="mbs-quick-registration__reminder-cta button button_primary button--full-width"\n                data-analytics-trigger="cta-continue"\n                data-qa-id="mbs-quick-registration__reminder-cta"\n            >\n                ',"\n            </button>\n        </div>\n    </div>"]);return h=function(){return e},e}function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var g=window.mbNafta.ns("pageData").registration,f={benefits:"Benefits include",continue:"Continue",loginHereLC:"log in here",recommendations:"Recommendations",reminderDescription:"Use the link in your confirmation email, sent to {0}. If you can't find it, {1} and a new email will be sent with a secure verification code.",reminderHeader:"Finish setting up your Mercedes me ID.",savedBuilds:"Saved Builds",savedInventory:"Saved Inventory"},v=function(){function e(){(0,a.Z)(this,e),this.content=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){(0,r.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},f,{},g),this.authAPI=new l.$S,this.cookieInfo=this.authAPI.parseQuickRegisterCookies(),this.element=null,this.loginLinkClickHandler=this.loginLinkClickHandler.bind(this),this.init()}return(0,o.Z)(e,[{key:"init",value:function(){var e,t;this.element=(e=this.content,t=this.cookieInfo,(0,d.e2)(h(),e.reminderHeader,function(e,t){var i=e.reminderDescription,n="<span class='mbs-quick-registration__email' data-qa-id='mbs-quick-registration__email'>".concat(t.email,"</span>"),r="<button class='link link_plain-link mbs-quick-registration__login-link' data-qa-id='mbs-quick-registration__login-link' data-analytics-trigger='cta-login'>".concat(e.loginHereLC,"</button>");return(0,d.NR)(i,[n,r])}(e,t),e.benefits,e.savedBuilds,e.savedInventory,e.recommendations,e.continue))({getNode:!0}),this.cacheDOM(),this.attachEvents()}},{key:"cacheDOM",value:function(){this.continueCta=this.element.querySelector(".".concat("mbs-quick-registration__reminder-cta")),this.loginLinkElm=this.element.querySelector(".".concat("mbs-quick-registration__login-link"))}},{key:"attachEvents",value:function(){this.continueCta.addEventListener(c.FP.CLICK,this.loginLinkClickHandler),this.loginLinkElm.addEventListener(c.FP.CLICK,this.loginLinkClickHandler)}},{key:"detachEvents",value:function(){this.continueCta.removeEventListener(c.FP.CLICK,this.loginLinkClickHandler),this.loginLinkElm.removeEventListener(c.FP.CLICK,this.loginLinkClickHandler)}},{key:"loginLinkClickHandler",value:function(e){e.preventDefault(),this.authAPI.authRedirect(l.$S.AUTH_PAGES.LOGIN)}},{key:"destroy",value:function(){this.detachEvents(),this.element.remove(),this.element=null}},{key:"getTitle",value:function(){return this.content.reminderHeader}},{key:"render",value:function(){return this.element}}]),e}();function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){(0,r.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var y={callingContainer:null,callingContainerId:null,dataAnalyticContainer:"{'blade': 'quick registration modal'}",dataAnalyticTriggerClose:"cta-close",sizeSmall:s.Modal.SIZES.FULLSCREEN,sizeLarge:s.Modal.SIZES.INSET,theme:s.Modal.THEMES.SIDE_PANEL},_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,a.Z)(this,e),this.modalConfig=b({},y,{},t),this.modal=null,this.onComplete=this.onComplete.bind(this),this.quickReg=o?new v:new n.Z(b({onCompleteCallback:this.onComplete,onRegistrationCallback:this.modalConfig.onRegistrationCallback},i),r),this.modalContent=null,this.afterOpen=this.afterOpen.bind(this),this.beforeClose=this.beforeClose.bind(this),this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.createModal()}},{key:"createModal",value:function(){this.modal=new s.Modal(void 0,{callbacks:{afterOpen:this.afterOpen,beforeClose:this.beforeClose},dataAnalyticContainer:this.modalConfig.dataAnalyticContainer,dataAnalyticTriggerClose:this.modalConfig.dataAnalyticTriggerClose,modalContent:void 0,sizeLarge:this.modalConfig.sizeLarge,sizeSmall:this.modalConfig.sizeSmall,theme:this.modalConfig.theme})}},{key:"afterOpen",value:function(){this.getModalContainer()&&(this.modalContent=document.createElement("div"),this.modalContent.classList.add("mbs-quick-registration__modal"),this.modalContent.appendChild(this.quickReg.render()),this.getModalContainer().appendChild(this.modalContent))}},{key:"beforeClose",value:function(){this.getModalContainer()&&this.getModalContainer().removeChild(this.modalContent)}},{key:"getModalContainer",value:function(){return document.querySelector("[".concat("data-modal-content","]"))}},{key:"open",value:function(){var e=this.modalConfig,t=e.callingContainer,i=e.callingContainerId;t?this.modal.open({callingContainer:t}):i?this.modal.open({callingContainerId:i}):this.modal.open()}},{key:"close",value:function(){this.modal.close()}},{key:"onComplete",value:function(){this.modalConfig.onCompleteCallback&&this.modalConfig.onCompleteCallback(),this.close()}},{key:"getActiveState",value:function(){return this.modal.getActiveState()}},{key:"destroy",value:function(){this.modal.destroy()}}]),e}()},72557:function(e,t,i){i.d(t,{Z:function(){return y}});var n=i(4942),r=i(15671),a=i(43144),o=i(61156),s=i(47026),c=i(52597),l=i(30168);function u(){var e=(0,l.Z)(['\n    <div class="mbs-quick-registration">\n        <div class="mbs-quick-registration__content">\n            <div class="mbs-quick-registration__reminder">\n                <div class="mbs-quick-registration__header mbs-quick-registration__header--bottom-border">\n                    ','\n                </div>\n                <div class="mbs-quick-registration__reminder-container">\n                    <div class="mbs-quick-registration__reminder-description">','</div>\n                </div>\n                <div class="mbs-quick-registration__benefits">\n                    <div class="mbs-quick-registration__benefits-heading">','</div>\n                    <div class="mbs-quick-registration__benefits-icons">\n                        <div class="mbs-quick-registration__confirmation-icon mbs-quick-registration__builds-icon">','</div>\n                        <div class="mbs-quick-registration__confirmation-icon mbs-quick-registration__inventory-icon">','</div>\n                        <div class="mbs-quick-registration__confirmation-icon mbs-quick-registration__recommendations-icon">',"</div>\n                    </div>\n                </div>\n            </div>\n            ","\n        </div>\n    </div>\n"]);return u=function(){return e},e}var d={CONTINUE:"mbs-quick-registration__continue"},h=function(){function e(t){(0,r.Z)(this,e),this.config=t,this.onCompleteCallback=this.config.onCompleteCallback,this.authAPI=new c.$S,this.cookieInfo=this.authAPI.parseQuickRegisterCookies(),this.init()}return(0,a.Z)(e,[{key:"init",value:function(){var e,t;this.element=(e=this.config,t=this.cookieInfo,(0,o.e2)(u(),e.confirmationHeader,function(e,t){var i=e.confirmationDescription,n="<span class='mbs-quick-registration__email' data-analytics-trigger='cta-login'>".concat(t.email,"</span>");return(0,o.NR)(i,[n])}(e,t),e.benefits,e.savedBuilds,e.savedInventory,e.recommendations,e.continueText?'<button class="mbs-quick-registration__continue button button_primary button--full-width" data-analytics-trigger="cta-continue">'.concat(e.continueText,"</button>"):""))({getNode:!0}),this.cacheDOM(),this.attachEvents()}},{key:"cacheDOM",value:function(){this.continueButton=this.element.querySelector(".".concat(d.CONTINUE)),this.loginButton=this.element.querySelector(".".concat(d.LOGIN_BUTTON))}},{key:"attachEvents",value:function(){var e;null===(e=this.continueButton)||void 0===e||e.addEventListener("click",this.onCompleteCallback)}},{key:"render",value:function(){return this.element}}]),e}();function m(){var e=(0,l.Z)(['\n    <div class="mbs-quick-registration" data-qa-id="mbs-quick-registration">\n        <div class="mbs-quick-registration__content">\n        </div>\n    </div>']);return m=function(){return e},e}function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var v={analyticsTrigger:"account-register-quick",analyticsTriggerLogin:"account-login",continueText:null,disableLogin:!1,disableLoginSuccessView:!1,disableRegistrationSuccessView:!1,onCompleteCallback:o.ZT,onLoginCallback:o.ZT,onRegistrationCallback:o.ZT,redirectURL:null,userInfo:null},p={accountCreated:"Your Mercedes-Benz account has been created.",emailSent:"We've sent an email to {0}. Follow the instructions to set your password and {1}.",logIn:"log in",continue:"Continue",logInURI:"#"},b=window.mbNafta.ns("pageData").registration,y=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.Z)(this,e),this.content=f({},p,{},b,{},i),this.config=f({},v,{},t),this.element=(0,o.e2)(m())({getNode:!0}),this.onLoginCallback=this.config.onLoginCallback,this.onCompleteCallback=this.config.onCompleteCallback,this.onRegistrationCallback=this.config.onRegistrationCallback,this.onSuccess=this.onSuccess.bind(this),this.cacheDOM(),this.addForm()}return(0,a.Z)(e,[{key:"cacheDOM",value:function(){this.formContainer=this.element.querySelector(".mbs-quick-registration__content")}},{key:"addForm",value:function(){var e={analyticsTrigger:this.config.analyticsTrigger,analyticsTriggerLogin:this.config.analyticsTriggerLogin,disableLogin:this.config.disableLogin,onDrawerToggle:this.config.onDrawerToggle,onLoginCallback:this.onLoginCallback,onSubmitCallback:this.onSuccess,redirectURL:this.config.redirectURL,userInfo:this.config.userInfo};this.form=new s.Z(e,this.content),this.formContainer.appendChild(this.form.render())}},{key:"onSuccess",value:function(e){if(this.form.destroy(),this.formContainer.remove(),this.onRegistrationCallback(e),!this.config.disableRegistrationSuccessView){var t={benefits:this.content.benefits,confirmationDescription:this.content.confirmationDescription,continueText:this.config.continueText?this.config.continueText:this.content.continue,disableLogin:this.config.disableLogin,disableLoginSuccessView:this.config.disableLoginSuccessView,email:e.email,firstName:e.firstName,confirmationHeader:this.content.confirmationHeader,loginText:this.content.confirmationLogIn,loginURL:this.content.logInURI,onCompleteCallback:this.onCompleteCallback,savedBuilds:this.content.savedBuilds,savedInventory:this.content.savedInventory,recommendations:this.content.recommendations};this.success=new h(t),this.element.appendChild(this.success.render())}}},{key:"destroy",value:function(){this.form&&this.form.destroy(),this.element.remove()}},{key:"getTitle",value:function(){return this.content.heading}},{key:"render",value:function(){return this.element}}]),e}()},47026:function(e,t,i){i.d(t,{Z:function(){return w}});var n=i(4942),r=i(15671),a=i(43144),o=i(14569),s=i(47755),c=i(13629),l=i(85879),u=i(72786),d=i(48218),h=i(61156),m=i(67384),g=i(30168);function f(){var e=(0,g.Z)(['\n    <div class="mb-quick-registration__form-container" data-analytics-container="{\'blade\': \'quick-registration\'}">\n        <div class="mbs-quick-registration__form" data-qa-id="mbs-quick-registration__form">\n            <div class="mbs-quick-registration__header" data-qa-id="mbs-quick-registration__header">\n                ','\n            </div>\n            <div class="mbs-quick-registration__login-container" data-qa-id="mbs-quick-registration__login-container"></div>\n\n            ','\n\n            <div class="mbs-quick-registration__drawer-container" aria-hidden="','">\n                <div class="mbs-quick-registration__input-container" data-qa-id="mbs-quick-registration__first-name">\n                    <div class="mbs-quick-registration__first-name"></div>\n                </div>\n                <div class="mbs-quick-registration__input-container" data-qa-id="mbs-quick-registration__last-name">\n                    <div class="mbs-quick-registration__last-name"/></div>\n                </div>\n                <div class="mbs-quick-registration__input-container" data-qa-id="mbs-quick-registration__email">\n                    <div class="mbs-quick-registration__email"></div>\n                </div>\n                <div class="mbs-quick-registration__recaptcha-container" data-qa-id="mbs-quick-registration__recaptcha">\n                    <div class="mbs-quick-registration__recaptcha">\n                    </div>\n                </div>\n                <div class="mbs-quick-registration__policy-container" data-qa-id="mbs-quick-registration__policy">\n                    <div class="mbs-quick-registration__policy"/></div>\n                </div>\n                ','\n                <div class="mbs-quick-registration__submit-container">\n                    <button class="mbs-quick-registration__submit button button_primary button--full-width disabled disabled--visually"\n                            type="submit"\n                            data-qa-id="mbs-quick-registration__submit"\n                            data-analytics-trigger="','">\n                        ','\n                    </button>\n                </div>\n                <div id="error-message-display-info" class="mbs-quick-registration__error-message" data-qa-id="mbs-quick-registration__error-message"></div>\n            </div>\n        </div>\n    </div>']);return f=function(){return e},e}var v={};function p(e){if("OK"===e.result.response.status){var t=new Date,i=e.result.response.result.tkn;return t.setTime(t.getTime()+864e5),document.cookie="".concat(d.E9.QUICK_REGISTER_ID,"=").concat(e.result.response.result.mbuserId.toString(),"; expires=").concat(t,"; path=/"),document.cookie="".concat(d.E9.QUICK_REGISTER_EMAIL,"=").concat(v.email,"; expires=").concat(t,"; path=/"),document.cookie="".concat(d.E9.QUICK_REGISTER_FIRST_NAME,"=").concat(v.firstName,"; expires=").concat(t,"; path=/"),i&&h.tO.localStorage.create(d.I.LOGIN_TOKEN,i,t),{successful:"OK"===e.result.response.status}}return{successful:!1,existingEmailError:"2003"===e.result.response.errors.code}}function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var _=window.mbNafta.applicationProperties.profileServiceLocale,k={analyticsTrigger:"account-register-quick",disableLogin:!1,onDrawerToggle:h.ZT,onLoginCallback:h.ZT,onSubmitCallback:h.ZT,userInfo:null,analyticsTriggerLogin:"account-login"},O={notRegCreAccount:"Not Registered? Create an account.",firstName:"First Name",lastName:"Last Name",email:"Email",pleaseEnterFirstName:"Please enter your first name",pleaseEnterLastName:"Please enter your last name",invalidEmail:"Please enter a valid email address",privacyPolicyAgreement:"I acknowledge that I have read and agree to the Mercedes-Benz {0}",policies:"policies",register:"Register",validationError:"Please fix the information highlighted above",serverError:{title:"We're sorry, an error has occurred.",description:"We were unable to process your request. Please try again."},existingEmailError:{title:"Registration was unsuccessful.",description:"A user account with this email address already exists."},registeredDescription:"By registering for a Mercedes me ID, you can access saved builds, inventory and more. Already have a Mercedes me ID? {0}.",loginHere:"Login here",updates:"Yes, send me updates about my vehicles. (Optional)"},E="quickRegistrationForm",S=window.mbNafta.ns("pageData").registration,w=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.Z)(this,e),this.content=y({},O,{},S,{},i),this.config=y({},k,{},t),this.element=function(e){var t=e.submitButtonLabelText,i=e.content,n=e.analyticsTrigger;return(0,h.e2)(f(),i.heading,i.drawerLabel?'<button class="link link_plain-link mbs-quick-registration__drawer" aria-expanded="false" data-timing="'.concat(d.O3.DELAY_300MS,'ms">\n                    ').concat(i.drawerLabel,' <span class="icon-mb"></span>\n                </button>'):"",i.drawerLabel?"true":"false",i.hideEmailOptIn?"":'\n                <div class="mbs-quick-registration__updates-container" data-qa-id="mbs-quick-registration__updates-container">\n                    <h2 class="mbs-quick-registration__updates-header" data-qa-id="mbs-quick-registration__updates-header">'.concat(i.updatesHeader,'</h2>\n                    <div class="mbs-quick-registration__updates"/></div>\n                </div>'),n,t)}({submitButtonLabelText:this.content.register,content:this.content,analyticsTrigger:this.config.analyticsTrigger})({getNode:!0}),this.onSubmitCallback=this.config.onSubmitCallback,this.onPrevalidate=this.onPrevalidate.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onInvalid=this.onInvalid.bind(this),this.setSubmitState=this.setSubmitState.bind(this),this.updateSubscriptions=this.updateSubscriptions.bind(this),this.init()}return(0,a.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.createToggleDrawer(),this.createInputs(),this.createRecaptcha(),this.createForm(),this.config.disableLogin||this.createLogin()}},{key:"cacheDOM",value:function(){this.formElement=this.element.querySelector(".".concat("mbs-quick-registration__form")),this.toggleDrawerBtn=this.element.querySelector(".".concat("mbs-quick-registration__drawer")),this.drawerContainer=this.element.querySelector(".".concat("mbs-quick-registration__drawer-container")),this.firstName=this.element.querySelector(".".concat("mbs-quick-registration__first-name")),this.lastName=this.element.querySelector(".".concat("mbs-quick-registration__last-name")),this.email=this.element.querySelector(".".concat("mbs-quick-registration__email")),this.recaptchaContainer=this.element.querySelector(".".concat("mbs-quick-registration__recaptcha")),this.policy=this.element.querySelector(".".concat("mbs-quick-registration__policy")),this.updates=this.element.querySelector(".".concat("mbs-quick-registration__updates")),this.submit=this.element.querySelector(".".concat("mbs-quick-registration__submit")),this.errorContainerElement=this.element.querySelector(".".concat("mbs-quick-registration__error-message")),this.formContainer=this.element.querySelector(".".concat("mb-quick-registration__form-container")),this.loginContainer=this.element.querySelector(".".concat("mbs-quick-registration__login-container"))}},{key:"createLogin",value:function(){this.login=new m.Z(this.content,this.config),this.loginContainer.appendChild(this.login.render())}},{key:"createForm",value:function(){var e={element:this.formElement,id:E,onPrevalidate:this.onPrevalidate,onSubmit:this.onSubmit,onInvalid:this.onInvalid,prevalidate:!0};this.form=new l.NI(e),this.form.register(this.inputs.firstName),this.form.register(this.inputs.lastName),this.form.register(this.inputs.email),this.form.register(this.inputs.policy),this.form.register(this.inputs.updates),this.form.register(this.recaptcha),this.element.appendChild(this.form.render())}},{key:"createToggleDrawer",value:function(){this.toggleDrawerBtn&&(this.toggleDrawer=new o.ToggleDrawer(this.toggleDrawerBtn,{onToggle:this.config.onDrawerToggle,toggleDrawer:this.drawerContainer}))}},{key:"createInputs",value:function(){var e=this.config.userInfo;this.inputs={firstName:new s.O8({formId:E,type:"text",id:"qr-first-name",required:!0,labelText:this.content.firstName,maxLength:255,validation:[{type:s.O8.VALIDATION_TYPE.REQUIRED,errorMessage:this.content.pleaseEnterFirstName},{type:s.O8.VALIDATION_TYPE.MAX_LENGTH,errorMessage:this.content.pleaseEnterFirstName}],restrictions:[s.O8.RESTRICTION_TYPE.NUMERIC],errorMessage:this.content.pleaseEnterFirstName,valueText:e&&e.firstName||"",analyticsTrigger:"cta-form-firstname"}),lastName:new s.O8({formId:E,type:"text",id:"qr-last-name",required:!0,labelText:this.content.lastName,maxLength:255,validation:[{type:s.O8.VALIDATION_TYPE.REQUIRED,errorMessage:this.content.pleaseEnterLastName},{type:s.O8.VALIDATION_TYPE.MAX_LENGTH,errorMessage:this.content.pleaseEnterLastName}],restrictions:[s.O8.RESTRICTION_TYPE.NUMERIC],errorMessage:this.content.pleaseEnterLastName,valueText:e&&e.lastName||"",analyticsTrigger:"cta-form-lastname"}),email:new s.O8({formId:E,type:"text",id:"qr-email",required:!0,labelText:this.content.email,maxLength:50,validation:[{type:s.O8.VALIDATION_TYPE.REQUIRED,errorMessage:this.content.invalidEmail},{type:s.O8.VALIDATION_TYPE.MAX_LENGTH,errorMessage:this.content.invalidEmail},{type:s.O8.VALIDATION_TYPE.EMAIL,errorMessage:this.content.invalidEmail}],restrictions:[s.O8.RESTRICTION_TYPE.EMAIL_SPECIAL_CHARS],valueText:e&&e.email||"",validateOnBlur:!0,analyticsTrigger:"cta-form-email"}),policy:new s.ZS({formId:E,id:"qr-policy",required:!0,checked:!1,labelText:this.getPrivacyPolicyLabelText(),analyticsTrigger:"checkmark-agree-tos",errorMessage:this.content.invalidLegalNotice,onChangeCallback:this.setSubmitState}),updates:new s.ZS({formId:E,id:"qr-updates",checked:!1,labelText:this.content.updates,analyticsTrigger:"cta-crm-opt-in",inputClassNames:["mbs-quick-registration__updates-checkbox"],onChangeCallback:this.setSubmitState})},this.firstName.parentNode.replaceChild(this.inputs.firstName.render(),this.firstName),this.lastName.parentNode.replaceChild(this.inputs.lastName.render(),this.lastName),this.email.parentNode.replaceChild(this.inputs.email.render(),this.email),this.policy.parentNode.replaceChild(this.inputs.policy.render(),this.policy),this.updates&&this.updates.parentNode.replaceChild(this.inputs.updates.render(),this.updates)}},{key:"getPrivacyPolicyLabelText",value:function(){var e=(0,h.S9)(this.content.privacyPolicyAgreement,/(Mercedes-Benz)/g,['<span class="mb-title-non-breaking">Mercedes-Benz</span>']),t="<a href='".concat(this.content.legalNoticeURI,"' \n                         class='link link_plain-link' \n                         target='_blank'\n                         data-analytics-trigger=\"cta\">").concat(this.content.policies,"</a>");return(0,h.NR)(e,[t])}},{key:"createRecaptcha",value:function(){this.recaptcha=new c.bj({formId:E,errorMessage:S.recaptchaEmptyError,onSuccess:this.setSubmitState}),this.recaptchaContainer.appendChild(this.recaptcha.render())}},{key:"onPrevalidate",value:function(e){e&&this.validationError&&this.hideValidationError()}},{key:"onSubmit",value:function(){var e="".concat(_,"/ciam/quick/register");this.validationError&&this.hideValidationError(),this.serverError&&this.hideServerError(),function(e,t){v.email=t.email,v.firstName=t.fname;var i=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&");return fetch("".concat(e,"?").concat(i),{headers:{"Content-Type":"application/json","Referrer-Policy":"origin",Referer:window.location.href},method:"POST"}).then((function(e){return e.json()})).then(p).then((function(e){if(!e.successful){if(e.existingEmailError)throw Error("ERR_CONFIRMED_USER_EXISTS");throw Error("Quick Registration Not Successful")}}))}(e,this.getQuickRegData()).then(this.onSubmitSuccess.bind(this)).catch(this.onSubmitError.bind(this))}},{key:"getQuickRegData",value:function(){return{fname:this.inputs.firstName.getValue(),lname:this.inputs.lastName.getValue(),email:this.inputs.email.getValue(),"g-recaptcha-response":this.recaptcha.getValue()}}},{key:"onSubmitSuccess",value:function(){var e={email:this.inputs.email.getValue(),firstName:this.inputs.firstName.getValue(),lastName:this.inputs.lastName.getValue()};this.inputs.updates.getValue()&&this.updateSubscriptions(e),this.onSubmitCallback(e)}},{key:"updateSubscriptions",value:function(e){var t={country:window.mbNafta.pageData.country,language:window.mbNafta.pageData.language,endpoints:this.content.endpoints,showAccountSubscriptions:!0},i=this.inputs.updates.getValue(),n={subscriptions:[{subscriptionId:"saved_inventory_price_change",optIn:i},{subscriptionId:"res_req_price_change",optIn:i},{subscriptionId:"saved_inventory_veh_sold",optIn:i},{subscriptionId:"res_req_veh_sold",optIn:i},{subscriptionId:"saved_inventory_res_status",optIn:i},{subscriptionId:"saved_build_view_similar",optIn:i}]};u.F.submitUpdate(this.content.optinNameInSubscribeCallFlag?{emailId:encodeURIComponent(e.email),firstName:encodeURIComponent(e.firstName),lastName:encodeURIComponent(e.lastName)}:{emailId:encodeURIComponent(e.email)},n,t)}},{key:"onSubmitError",value:function(e){this.showServerError(e)}},{key:"onInvalid",value:function(){this.showValidationError()}},{key:"showValidationError",value:function(){var e,t;this.validationError||(this.validationError=new l.Xq({description:this.content.validationError})),this.serverError&&this.hideServerError(),this.validationError.show(this.errorContainerElement),null===(e=this.toggleDrawer)||void 0===e||e.updateExpandedHeight(),null===(t=this.element.querySelector(".form-error-message"))||void 0===t||t.focus()}},{key:"showServerError",value:function(e){var t,i="ERR_CONFIRMED_USER_EXISTS"===e.message;this.serverError||(this.serverError=new l.Xq({title:i?this.content.existingEmailError.title:this.content.serverError.title,description:i?this.content.existingEmailError.description:this.content.serverError.description})),this.validationError&&this.hideValidationError(),this.serverError.show(this.errorContainerElement),null===(t=this.toggleDrawer)||void 0===t||t.updateExpandedHeight();var n=this.element.querySelector(".form-error-message");this.toggleDrawer&&n&&setTimeout((function(){n.focus(),n.scrollIntoView({behavior:"smooth"})}),d.O3.DELAY_300MS)}},{key:"hideValidationError",value:function(){this.validationError.hide()}},{key:"hideServerError",value:function(){this.serverError.hide()}},{key:"setSubmitState",value:function(){this.inputs.policy.validate();var e=this.recaptcha.isValid()&&this.inputs.policy.isValid();this.submit.classList[e?"remove":"add"]("disabled")}},{key:"render",value:function(){return this.element}},{key:"destroyForm",value:function(){Object.values(this.inputs).forEach((function(e){e.destroy()})),this.form.destroy()}},{key:"destroy",value:function(){this.destroyForm(),this.element.remove()}}]),e}()},67384:function(e,t,i){i.d(t,{Z:function(){return h}});var n=i(4942),r=i(15671),a=i(43144),o=i(61156),s=i(52597),c=i(30168);function l(){var e=(0,c.Z)(['\n    <div class="mbs-quick-registration__login" data-qa-id="mbs-quick-registration__login">\n        ',"\n    </div>\n"]);return l=function(){return e},e}function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var d={analyticsTriggerLogin:"account-login"},h=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;(0,r.Z)(this,e),this.content=t,this.config=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},d,{},i),this.authAPI=new s.$S;var a=this.getLoginText();this.element=function(e){return(0,o.e2)(l(),e)}(a)({getNode:!0}),this.loginLinkClickHandler=this.loginLinkClickHandler.bind(this),this.init()}return(0,a.Z)(e,[{key:"init",value:function(){this.cacheDOM()}},{key:"getLoginText",value:function(){var e=this.content.registeredDescription,t="<button\n                         class='link link_plain-link mbs-quick-registration__login-link'\n                         data-qa-id='mbs-quick-registration__login-link'\n                         data-analytics-trigger=\"".concat(this.config.analyticsTriggerLogin,'">').concat(this.content.loginHere,"</button>");return(0,o.NR)(e,[t])}},{key:"cacheDOM",value:function(){this.loginLink=this.element&&this.element.querySelector(".".concat("mbs-quick-registration__login-link")),this.loginLink&&this.attachEvents()}},{key:"attachEvents",value:function(){this.loginLink.addEventListener("click",this.loginLinkClickHandler)}},{key:"detachEvents",value:function(){this.loginLink.removeEventListener("click",this.loginLinkClickHandler)}},{key:"loginLinkClickHandler",value:function(e){e.preventDefault(),this.config.onLoginCallback(),this.authAPI.authRedirect(s.$S.AUTH_PAGES.LOGIN,this.config.redirectURL)}},{key:"render",value:function(){return this.element}},{key:"destroy",value:function(){this.detachEvents(),this.element.remove()}}]),e}()},81252:function(e,t,i){i.d(t,{I:function(){return a.ToolTipComponent}});var n={};i.r(n),i.d(n,{ToolTip:function(){return o.ToolTip},toolTipParser:function(){return o.toolTipParser},toolTipTemplate:function(){return o.toolTipTemplate}});var r=i(4942),a=i(40838),o=i(14569);function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}!function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){(0,r.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}}({},n,{ToolTipComponent:a.ToolTipComponent})},26015:function(e,t,i){i.d(t,{h:function(){return L},T:function(){return p}});var n=i(4942),r=i(61156),a=i(90921),o=i(73154);function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var c={BUILD:"build",CPO:"cpo",CPO_OFFER:"cpo-offer",NEW:"new",NEW_OFFER:"new-offer"},l=function(e){return"NEW"===e.type},u=function(e){return"PRE"===e.type},d=function(e){return l(e)&&e.contactDealerForPrice},h=function(e){return u(e)&&e.contactDealerForPrice},m=function(e,t){var i=l(t),n=t.formattedPrice,a=t.msrp,o=(a=void 0===a?{}:a).priceCurrency,s=e.dealerPrice,c=e.startingAt,u=e.priceLabel,m=o||n;return d(t)?e.contactDealerForPrice:h(t)?e.contactDealerForEPrice:u?"".concat(u," ").concat(m):(u=i?c:s,(0,r.NR)(u,[m]))},g=function(e){var t,i,n,r,a,s,c=e.fallbackImage,l=e.images,u=void 0===l?[]:l,d=e.usedVehicleAttributes,h=(d=void 0===d?{}:d).images,m=void 0===h?[]:h,g=null==e?void 0:e.exteriorBaseImage;if(null!==(t=e.exteriorBaseImage)&&void 0!==t&&t.desktop||null!==(i=e.exteriorBaseImage)&&void 0!==i&&i.mobile){var f=e.exteriorBaseImage;g=o.eN.createMediaObject(f)}if(null!==(n=e.image)&&void 0!==n&&n.desktop||null!==(r=e.image)&&void 0!==r&&r.mobile){var v=e.image;g=o.eN.createMediaObject(v)}e.usedVehicleAttributes&&(g=o.eN.createMediaObjectFromPath(e.usedVehicleAttributes.images[0]));var p=c&&{imgL:c,alt:""};return(null!==(a=g)&&void 0!==a&&a.imgL||null!==(s=g)&&void 0!==s&&s.imgS?g:null)||m[0]||u[0]||p},f=function(e,t){var i,r,o;if(d(t)||h(t))return null;var c=e.disclaimer,l=e.disclaimerLabel,u=e.disclaimerTotalOnlinePrice,m=e.useDefaultDisclaimer,g=void 0===m?!u:m,f=(null==u?void 0:u.globalDisclaimerCode)||a.d.GLOBAL_DISCLAIMER_CODES.MSRP,v=null===(i=window.mbNafta)||void 0===i||null===(r=i.pageData)||void 0===r||null===(o=r.globalDisclaimerLegends)||void 0===o?void 0:o[f],p={autoNum:!1,globalDisclaimerCode:f,legend:v};return u&&!u.legend&&(u.legend=v),function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({disclaimerLabel:l||c},g?p:u)},v=function(e){var t=e.bodyStyle,i=e.bodyStyleId,n=e.classId,r=e.modelName,a=e.vin,o=e.year,s=t||i,c={class:e.class||n,model:r,body:s,year:o};a&&(c.vin=a);var l=JSON.stringify(c);return'data-analytics-container=\'{"vehicle": '.concat(l,"}'")},p={getVehicleDetails:function(e,t){var i=t.templateType,n=t.vehicle,a=c.CPO_OFFER,o=c.NEW_OFFER;return i===c.BUILD?function(e,t){var i=t.buildName,n=t.modelId,a=t.modelLineName,o=t.modelName,s=t.priceCurrency,l=t.year;return{disclaimer:f(e,t),jellybean:g(t),modelName:l?"".concat(l," ").concat(o):o,modelLine:a,price:(0,r.NR)(e.totalPrice,[s]),templateType:c.BUILD,title:i||"".concat(e.my," ").concat(n),analyticsTag:v(t)}}(e,n):i===o||i===a?function(e,t){var i=t.modelName,n=t.year;return{jellybean:g(t),modelName:n?"".concat(n," ").concat(i):i,title:e.newSpecialOfferTitle,templateType:c.NEW_OFFER,analyticsTag:v(t)}}(e,n):u(n)?function(e,t){var i=t.descriptionLabel,n=t.modelLineName,r=t.modelName,a=t.year;return{disclaimer:f(e,t),jellybean:g(t),modelName:i||"".concat(a," ").concat(r),modelLine:n,price:m(e,t),title:e.cpoTitle,templateType:c.CPO,analyticsTag:v(t)}}(e,n):function(e,t){var i=t.headerText,n=t.modelLineName,r=t.modelName,a=t.year;return{disclaimer:f(e,t),jellybean:g(t),modelName:i||"".concat(a," ").concat(r),modelLine:n,price:m(e,t),templateType:c.NEW,analyticsTag:v(t)}}(e,n)},TEMPLATE_TYPES:c},b=i(15671),y=i(43144),_=i(82051),k=i(22209),O=i(30168),E=i(67294),S=i(97762),w=i.n(S),I=i(50115);function C(){var e=(0,O.Z)(['\n    <section class="vehicle-offer vehicle-offer--','" ',">\n        ",'\n        <div class="vehicle-offer__details">\n            ',"\n        </div>\n    </section>\n"]);return C=function(){return e},e}function q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function N(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?q(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var T={vehicle:null},L=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,b.Z)(this,e),this.content=N({},t),this.config=N({},T,{},i),this.createVehicleOffer(),this.cacheDOM(),this.fetchJellybean(),this.createDisclaimer()}return(0,y.Z)(e,[{key:"createVehicleOffer",value:function(){var e,t,i,n,a,o,s,c,l,u,d,h,m,g,f,v;this.config.vehicle&&(this.vehicleDetails=p.getVehicleDetails(this.content,this.config),this.element=(n=N({},this.vehicleDetails,{reserveVehicleStatusContent:(null===(e=this.content)||void 0===e?void 0:e.reserveVehicleStatusContent)||{},showReservationLabel:!(null===(t=this.config)||void 0===t||!t.showReservationLabel),vehicleReservationStatus:(null===(i=this.config)||void 0===i?void 0:i.vehicleReservationStatus)||""}),(0,r.e2)(C(),n.templateType,n.analyticsTag,n.jellybean?(v=n.jellybean,new k.Picture({className:"vehicle-offer__jellybean",media:v}).render().outerHTML):"",(o=(a=n).title,s=a.modelName,c=a.modelLine,l=a.price,d=void 0===(u=a.reserveVehicleStatusContent)?{}:u,m=void 0!==(h=a.showReservationLabel)&&h,f=void 0===(g=a.vehicleReservationStatus)?"":g,"\n    ".concat(o?'<p class="vehicle-offer__details-title">'.concat(o,"</p>"):"",'\n    <p class="vehicle-offer__details-model-name">').concat(s,"</p>\n    ").concat(m?w().renderToString(E.createElement(I.Z,{status:f,content:d,isImInterestedLeadForm:!0})):"","\n    ").concat(c?'<p class="vehicle-offer__details-model-line">'.concat(c,"</p>"):"","\n    ").concat(l&&(0,r.oX)()?'<p class="vehicle-offer__details-price">'.concat(l,"</p>"):"","\n"))))({getNode:!0}))}},{key:"cacheDOM",value:function(){this.priceElement=this.element&&this.element.querySelector(".".concat("vehicle-offer__details-price"))}},{key:"fetchJellybean",value:function(){var e=this.config,t=e.templateType,i=e.vehicle;if(i&&!i.images&&!i.image&&!i.exteriorBaseImage){var n=_.W.getInstance(),r=_.W.PRESET_CATEGORIES,a=r.BYO,o=r.MODEL,s={presetCategory:t===p.TEMPLATE_TYPES.BUILD?a:o};n.getBuildImage(i,s).then(this.createJellybean.bind(this))}}},{key:"createDisclaimer",value:function(){var e,t,i=(null===(e=this.config)||void 0===e?void 0:e.disclaimer)||(null===(t=this.vehicleDetails)||void 0===t?void 0:t.disclaimer);if(i&&this.priceElement){var n=new a.d(i);this.priceElement.appendChild(n.render())}}},{key:"createJellybean",value:function(e){this.config.vehicle.images=[{alt:"",imgS:e.respObj.small.retina,imgL:e.respObj.large.retina}];var t=new k.LazyPicture({className:"vehicle-offer__jellybean",forceLoad:!0,media:this.config.vehicle.images[0],role:"presentation"});r.jG.prepend(t.render(),this.element)}},{key:"render",value:function(){return this.element}}]),e}()},97844:function(e,t,i){i.d(t,{Rg:function(){return d},oN:function(){return u},zn:function(){return h}});var n=i(4942),r=i(48218),a=i(61156);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e){var t="";return Object.keys(e.options).forEach((function(i){if(e.options[i].STAND_ALONE_OPTIONS){var n=e.options[i].STAND_ALONE_OPTIONS.map((function(e){return e.name})).join(", ");t+="".concat(""===t?"":", ").concat(n)}})),t}function l(e){var t="";return Object.keys(e.options).forEach((function(i){if(e.options[i].PACKAGES){var n=e.options[i].PACKAGES.map((function(e){return e.name})).join(", ");t+="".concat(""===t?"":", ").concat(n)}})),t}function u(e){return{exteriorColor:e.options.exterior.PAINT[0].name,interiorColor:e.options.interior.UPHOLSTERY[0].name,vehicleName:e.vehicleName,trim:e.options.interior.TRIM[0].name,wheels:e.options.exterior.WHEELS[0].name,options:c(e),packages:l(e)}}function d(e){var t=u(e),i=a.tO.localStorage.read(r.I.UNSAVED_BUILD_INFO),o=(0,a.fV)(),c=new Date,l=new Date(c.setDate(c.getDate()+1));return i?a.tO.localStorage.update(r.I.UNSAVED_BUILD_INFO,s({},i,(0,n.Z)({},o,s({},t,{expiration:l})))):a.tO.localStorage.create(r.I.UNSAVED_BUILD_INFO,(0,n.Z)({},o,s({},t,{expiration:l}))),o}function h(){var e=a.tO.localStorage.read(r.I.UNSAVED_BUILD_INFO);if(e){var t=new Date;Object.keys(e).forEach((function(i){new Date(e[i].expiration)<t&&delete e[i]})),Object.keys(e).length>0?a.tO.localStorage.update(r.I.UNSAVED_BUILD_INFO,e):a.tO.localStorage.delete(r.I.UNSAVED_BUILD_INFO)}}},75297:function(e,t,i){i.d(t,{$U:function(){return m},AG:function(){return _},MS:function(){return h},W1:function(){return v},d8:function(){return d},io:function(){return f},m5:function(){return b},pK:function(){return k}});var n=i(4942),r=i(52597),a=i(61156),o=i(48218);function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l={auth:"savedBuildAuth",unauth:"savedBuildUnAuth",lastBuild:"lastBuild",loginRedirect:"savedBuildLoginRedirect"},u={body:null,headers:{"Content-type":"application/json","Referrer-Policy":"origin",Referer:window.location.href},method:"POST"};function d(e){var t=Date.now(),i=window.localStorage.getItem(e);if(i){if((i=JSON.parse(i))&&i.expiryTimestamp&&i.expiryTimestamp<t)return window.localStorage.removeItem(e),null;if(i)return i.data}return null}function h(e,t){var i=new Date;i.setTime(i.getTime()+1728e5);var n=JSON.stringify({data:e,expiryTimestamp:i.getTime()}),r=t||l.lastBuild;window.localStorage.setItem(r,n)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=(new Date).getTime(),n=JSON.stringify({data:e,timestamp:i});t&&window.localStorage.setItem(l[t],n);var a=new r.$S,o=a.isLoggedIn(),s=a.isPartiallyLoggedIn();o?window.localStorage.setItem(l.auth,n):s&&window.localStorage.setItem(l.unauth,n)}function g(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if("OK"===e.result.status||e.status.ok){var r=c({buildId:e.result.buildId?e.result.buildId:n,buildName:t},i);return m(r),r}throw new Error(JSON.stringify(e))}function f(e,t,i){var n=(new r.$S).isPartiallyLoggedIn(),s=n?i.quickRegisterSaveBuildApiUri:i.saveBuildApiUri,c="".concat(s).concat((0,a.HD)({buildName:t}));return(n?r.Rh.authenticationFetch(c,{headers:{MBUSA_AUTH_QUICK_REGISTER_ID:a.pR.getCookie(o.E9.QUICK_REGISTER_ID)},body:e}):r.Rh.authenticationFetch(c,{body:e})).then((function(i){return g(i,t,e)}))}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&window.localStorage.removeItem(l[e]);var t=new r.$S,i=t.isLoggedIn();t.isPartiallyLoggedIn()||window.localStorage.removeItem(l.unauth),i||window.localStorage.removeItem(l.auth)}function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=(new Date).getTime(),n=window.localStorage.getItem(l.loginRedirect),a=n?JSON.parse(n):null;if(a&&i>a.timestamp+36e5&&v("loginRedirect"),t){var o=window.localStorage.getItem(l[t]);e=o?JSON.parse(o):null}else{var s=(new r.$S).isPartiallyLoggedIn()?l.unauth:l.auth,c=window.localStorage.getItem(s);e=c?JSON.parse(c):null}return e?JSON.stringify(e.data):null}function b(){return"string"==typeof p(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}function y(e,t){var i=c({buildId:t,buildName:e.owBuildName||null,isOwner:e.isOwner},e.owBuildJSON);return i.isOwner&&m(i),i}function _(e,t,i,n){var o={buildId:i,buildName:t},s="".concat(n.updateBuildApiUri).concat((0,a.HD)(o));return r.Rh.authenticationFetch(s,{body:e}).then((function(n){return g(n,t,e,i)}))}function k(e,t,i){var n=(0,a.NR)(e.renameSavedBuildUri,{id:t,nickname:i});return r.Rh.authenticationFetch(n)}t.ZP={getLocalSavedBuild:p,hasApplyForCredit:function(e){return e.some((function(e){return"apply-for-credit"===e.type}))},getSavedBuild:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=c({buildId:e},i&&{emailId:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""}),s=i?"".concat(t.retrieveBuildDDTApiUri).concat((0,a.HD)(o)):"".concat(t.retrieveBuildApiUri).concat((0,a.HD)(o));if(i){var l=c({},u,{},n);return fetch(s,{headers:c({},l.headers),body:l.body?JSON.stringify(l.body):null,method:l.method}).then((function(e){return e.json()})).then((function(t){return y(t.result,e)})).catch((function(e){throw console.warn(e),e}))}return r.Rh.authenticationFetch(s).then((function(t){return y(t.result,e)}))},hasSaveAPIUri:function(e){return e&&""!==e.saveBuildApiUri&&""!==e.updateBuildApiUri},hasSavedBuild:b,hasSaveFeature:function(e){return e.some((function(e){return"save-your-build"===e.type}))},retrieveLastBuild:d,storeLastBuild:h,storeSaveBuild:m,submitSaveBuild:f,updateSavedBuild:_,removeSavedBuilds:v}}}]);
//# sourceMappingURL=360882ca18a52600652e.bundle.js.map