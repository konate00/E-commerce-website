"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[616],{85879:function(e,t,i){i.d(t,{NI:function(){return s.FormControl},Xq:function(){return s.FormError},xs:function(){return s.FORM_CONTROL_EVENTS}});var s=i(14569);s.FormControl},68551:function(e,t,i){i.d(t,{Yw:function(){return s.SelectControl}});var s=i(14569);s.SelectControl},616:function(e,t,i){i.d(t,{u:function(){return s.Z},Q:function(){return f}});var s=i(1269),l=i(4942),c=i(15671),n=i(43144),a=i(14569),o=i(61156),r=i(30168);function h(){var e=(0,r.Z)(['\n    <div class="vehicle-selector-modal wrapper">\n        <h2 class="vehicle-selector-modal__overlay-heading">\n            ','\n        </h2>\n        <div class="vehicle-selector-modal__dropdowns-container"></div>\n    </div>\n']);return h=function(){return e},e}function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}var u={selectControlCSSModifierClass:"",disableChosenVehicleView:!0,submitCtaLabel:"",submitCtaClass:"",submitCtaCallback:o.ZT,heading:"",callingContainer:""},f=function(){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;(0,c.Z)(this,e),this.config=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){(0,l.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},u,{},i),this.onModalClose=this.onModalClose.bind(this),this.element=(t={heading:this.config.heading}.heading,(0,o.e2)(h(),t))({getNode:!0}),this.cacheDOM()}return(0,n.Z)(e,[{key:"cacheDOM",value:function(){this.heading=this.element.querySelector(".".concat("vehicle-selector-modal__overlay-heading")),this.dropdownContainer=this.element.querySelector(".".concat("vehicle-selector-modal__dropdowns-container"))}},{key:"renderVehicleSelector",value:function(){this.vehicleSelector=new s.Z({selectControlCSSModifierClass:this.config.selectControlCSSModifierClass,disableChosenVehicleView:this.config.disableChosenVehicleView,submitCtaLabel:this.config.submitCtaLabel,submitCtaClass:this.config.submitCtaClass,submitCtaCallback:this.config.submitCtaCallback,enableYears:this.config.enableYears}),this.dropdownContainer.appendChild(this.vehicleSelector.render())}},{key:"open",value:function(){this.renderVehicleSelector(),new a.Modal(void 0,{modalContent:this.element,sizeSmall:a.Modal.SIZES.FULLSCREEN,sizeLarge:a.Modal.SIZES.DEFAULT,callbacks:{beforeClose:this.onModalClose}}).open({callingContainer:this.config.callingContainer})}},{key:"onModalClose",value:function(){this.vehicleSelector.destroy()}},{key:"render",value:function(){return this.element}}]),e}()},1269:function(e,t,i){i.d(t,{Z:function(){return q}});var s=i(87757),l=i.n(s),c=i(15861),n=i(4942),a=i(15671),o=i(43144),r=i(48218),h=i(68551),d=i(83224),u=i(14569),f=i(85879),m=i(61156),v=window.mbNafta.ns("pageData").language,g=window.mbNafta.ns("pageData").country,C=window.mbNafta.ns("pageData").currency,b=window.mbNafta&&window.mbNafta.ns("pageData").localization||{changeVehicleSelection:"{0} to change your selection",clickHere:"Click here",disclaimer:"Disclaimer",priceComingSoon:"Price Coming Soon",selectClass:"Select Class",selectClassErrorMessage:"Please select a class",selectModel:"Select Model",selectModelErrorMessage:"Please select a model",selectVehicleDetails:"Select your vehicle details below.",selectYear:"Select Year",selectYearErrorMessage:"Please select a year",startingAt:"Starting at",totalPrice:"Total price",vehicleSelected:"This is the vehicle you have selected.",vehicleSelectorError:"Click to confirm your vehicle selection."},S={changeVehicleSelection:b.changeVehicleSelection,clickHere:b.clickHere,disclaimer:b.disclaimer,priceComingSoon:b.priceComingSoon,selectClass:b.selectClass,selectClassErrorMessage:b.selectClassErrorMessage,selectModel:b.selectModel,selectYear:b.selectYear,selectYearErrorMessage:b.selectYearErrorMessage,selectModelErrorMessage:b.selectModelErrorMessage,selectVehicleDetails:b.selectVehicleDetails,startingAt:b.startingAt,totalPrice:b.totalPrice,vehicleSelected:b.vehicleSelected,vehicleSelectorError:b.vehicleSelectorError},y=window.mbNafta.ns("pageData","vehicleData","config").vehicleClassesEndpoint,p=window.mbNafta.ns("pageData","vehicleData","config").vehicleModelsEndpoint,M=window.mbNafta.ns("pageData","vehicleData","config").activeModelEndpoint,V=window.mbNafta.ns("pageData","vehicleData","config").activeModelByYearEndpoint,w=window.mbNafta.ns("pageData","vehicleData","config").modelEndpoint,k=null,E=function(e,t){var i="".concat(y).concat((0,m.HD)({country:e,lang:t}));return fetch(i,{credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){return Object.values(e.result.vehicleClasses)})).then((function(e){return e.map((function(e){var t=e.code;return{label:e.name,value:t}}))}))},D=function(e,t,i,s){var l="".concat(p).concat((0,m.HD)({country:e,lang:t,classCode:i,filter:s}));return fetch(l,{credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){return Object.values(e.result.activeModels)})).catch((function(){return null}))},_=function(e,t,i){var s="".concat(M).concat((0,m.HD)({country:e,lang:t,modelCode:i}));return fetch(s,{credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){return e.result.activeModel}))},L=function(e,t,i,s,l){var c="".concat(w).concat((0,m.HD)({country:e,lang:t,model:i,class:s,year:l}));return fetch(c,{credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){return e.result.model}))},P=function(e){var t="".concat(V,"/new/models").concat(e?(0,m.HD)(e):"");return k?Promise.resolve(k).then((function(e){return e})):fetch(t,{headers:{"Content-Type":"application/json","Referrer-Policy":"origin"},method:"GET"}).then((function(e){return e.json()})).then((function(e){return t=e.result,k=t,t;var t}))},O=i(30168);function Y(){var e=(0,O.Z)(['\n    <div class="vehicle-selector ','" data-analytics-container="{\'blade\':\'vehicle-selector\'}">\n        <div class="vehicle-selector__loader-container">\n            <div class="vehicle-selector__loader-content-container"></div>\n        </div>\n        <fieldset class="vehicle-selector__selection">\n            <legend class="leads-form__sub-heading ','">','</legend>\n            <div data-vehicle-selector-years class="vehicle-selector__years ','"></div>\n            <div class="vehicle-selector__classes" data-vehicle-selector-classes></div>\n            <div class="vehicle-selector__models" data-vehicle-selector-models></div>\n        </fieldset>\n        <div data-vehicle-submit-cta></div>\n        <div class="vehicle-selector__vehicle">\n            ',"\n            <div data-vehicle-selector-chosen-vehicle></div>\n            ","\n        </div>\n    </div>\n"]);return Y=function(){return e},e}function j(){var e=(0,O.Z)(['\n    <div class="vehicle-selector__chosen-vehicle" data-analytics-container="contact-selected-vehicle:',":",":",":",'">\n        <h4 class="vehicle-selector__model-name">','</h4>\n        <span class="vehicle-selector__label">\n            ',"\n            ",'\n        </span>\n        <img class="vehicle-selector__jellybean" src="','" alt="" />\n    </div>\n']);return j=function(){return e},e}var I=function(){function e(t,i,s,l,c,n){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,a.Z)(this,e),this.element=t,this.country=s,this.language=l,this.currency=c,this.chosenVehicleData=i,this.showYear=n,this.buildPrice=o,this.buildModel=r,this.disclaimerMarker=null,this.msrpDisclaimerLegend=this.getMsrpDisclaimerLegend(),this.onDisclaimerClickHandler=this.onDisclaimerClick.bind(this),this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.createView(),this.cacheDOM(),this.attachEvents()}},{key:"createView",value:function(){this.chosenVehicleElement=function(e){var t=e.chosenVehicle,i=void 0===t?{}:t,s=e.startingAtLabel,l=void 0===s?"":s,c=e.totalBuildPriceLabel,n=void 0===c?"":c,a=e.priceComingSoonLabel,o=void 0===a?"":a,h=e.msrpDisclaimerLegend,d=void 0===h?"":h,u=e.showYear,f=void 0!==u&&u,v=e.disclaimerLabel,g=void 0===v?"Disclaimer":v;return(0,m.e2)(j(),i.class,i.model,i.bodystyle,i.year,f?"".concat(i.year," ").concat(i.name):"".concat(i.name),function(e,t,i,s){return e.msrp===r.at.NO_MSRP_PRICE?s:e.buildPrice&&e.buildModel===e.model?"".concat(t," <strong>").concat(e.buildPriceFormatted,"</strong>"):"".concat(i," <strong>").concat(e.msrpFormatted,"</strong>")}(i,n,l,o),i.msrp!==r.at.NO_MSRP_PRICE&&d?'<a href="#disclaimer-drawer" aria-controls="disclaimer-drawer" class="disclaimer__marker" data-legend="'.concat(d,'" data-chosen-vehicle-disclaimer><span class="offscreen">').concat(g,"</span>").concat(d,"</a>"):"",i.jellybean)}({chosenVehicle:{name:this.chosenVehicleData.model.name,msrp:this.chosenVehicleData.model.msrp,msrpFormatted:m.uf.toCurrency(this.chosenVehicleData.model.msrp,this.country,this.language,this.currency),jellybean:this.chosenVehicleData.model.modelTileImage,class:this.chosenVehicleData.model.vehicleClass.code,model:this.chosenVehicleData.model.code,bodystyle:this.chosenVehicleData.bodystyle.code,year:this.chosenVehicleData.model.year,buildModel:this.buildModel,buildPrice:this.buildPrice,buildPriceFormatted:this.buildPrice?m.uf.toCurrency(m.uf.toNumber(this.buildPrice),this.country,this.language,this.currency):null},totalBuildPriceLabel:S.totalPrice,startingAtLabel:S.startingAt,priceComingSoonLabel:S.priceComingSoon,msrpDisclaimerLegend:this.msrpDisclaimerLegend,showYear:this.showYear,disclaimerLabel:S.disclaimer})({getNode:!0}),m.jG.insert(this.chosenVehicleElement,this.element)}},{key:"cacheDOM",value:function(){this.disclaimerMarker=this.chosenVehicleElement.querySelector("[".concat("data-chosen-vehicle-disclaimer","]"))}},{key:"attachEvents",value:function(){this.disclaimerMarker&&this.disclaimerMarker.addEventListener(r.FP.CLICK,this.onDisclaimerClickHandler)}},{key:"detachEvents",value:function(){this.disclaimerMarker&&this.disclaimerMarker.removeEventListener(r.FP.CLICK,this.onDisclaimerClickHandler)}},{key:"destroy",value:function(){this.detachEvents(),m.jG.empty(this.element)}},{key:"getMsrpDisclaimerLegend",value:function(){var e=window.mbNafta.pageData.globalDisclaimerLegends;return e?e.MSRP:""}},{key:"onDisclaimerClick",value:function(){window.dispatchEvent(new CustomEvent("DISCLAIMER:OPEN_DISCLAIMER",{detail:{currentTarget:this.disclaimerMarker,legend:this.msrpDisclaimerLegend}}))}},{key:"node",get:function(){return this.element.innerHTML}}]),e}();function N(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function B(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?N(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var T="vehicle-selector--selected",x="vehicle-selector--show-loader",Z="disabled",R={activeModelsFilter:"",apiParams:{},changeVehicleCtaLabel:"",chosenVehicle:null,disableChange:!1,disableChosenVehicleView:!1,enableYears:!1,formId:"",modelCode:"",onClickSubmitCallback:m.ZT,onResetCallback:m.ZT,onSelectCallback:m.ZT,selectorsRequired:!0,selectVehicleOnSubmit:!1,showYear:!1,submitCtaLabel:"",submitCtaClass:"",submitCtaCallback:m.ZT},q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;(0,a.Z)(this,e),this.config=B({},R,{},t,{id:t.id||(0,m.fV)()}),this.id=this.config.id,this.activeModels=null,this.chosenVehicle=null,this.chosenModel=null,this.chosenModelCode=null,this.element=null,this.loader=new d.T,this.selectedYear=null,this.selectedClass=null,this.valid=!1,this.useChosenVehicle=!1,this.hasNewInvSelector=this.config.hasNewInvSelector,this.apiParams=this.config.apiParams,this.createClassSelect=this.createClassSelect.bind(this),this.createModelSelect=this.createModelSelect.bind(this),this.createYearSelect=this.createYearSelect.bind(this),this.createSubmitCta=this.createSubmitCta.bind(this),this.createChosenVehicleView=this.createChosenVehicleView.bind(this),this.resetView=this.resetView.bind(this),this.onSubmit=this.onSubmit.bind(this),this.dispatchChange=this.dispatchChange.bind(this),this.setDisabled=this.setDisabled.bind(this),this.showSelectedVehicleView=this.showSelectedVehicleView.bind(this),this.triggerCallback=this.triggerCallback.bind(this),this.updatePageUrl=this.updatePageUrl.bind(this),this.focusClassSelect=this.focusClassSelect.bind(this),this.init()}var t,i,s,n,b;return(0,o.Z)(e,[{key:"init",value:function(){this.createView(),this.cacheDOM(),this.config.enableYears&&!this.config.chosenVehicle?(m.jG.insert(this.loader.render(),this.selectYearElement),this.constructYearItems().then(this.createYearSelect).then(this.createClassSelect).then(this.createModelSelect)):this.config.chosenVehicle?this.config.forceModelSelection&&this.config.chosenVehicle.modelId?(this.useChosenVehicle=!0,this.prepopulateSelectData().then(this.showSelectedVehicleView).catch(this.resetView)):this.prepopulateSelectData():(this.getVehicleClasses().then(this.createClassSelect),this.createModelSelect()),this.createSubmitCta();var e=this.config,t=e.modelCode,i=e.classCode,s=e.modelYear;t&&(i&&s?this.selectVehicleByYear(t,i,s):this.selectVehicleByCode(t)),this.attachEvents()}},{key:"createView",value:function(){this.element=function(e){var t=e.changeVehicleCtaLabel,i=void 0===t?"":t,s=e.content,l=void 0===s?{}:s,c=e.disableChange,n=void 0!==c&&c,a=e.enableYears,o=void 0!==a&&a;return(0,m.e2)(Y(),o?"vehicle-selector--years-enabled":"",l.selectVehicleDetails?"":"hide",l.selectVehicleDetails,o?"":"hide",(null==l?void 0:l.vehicleSelected)&&'<h2 class="leads-form__sub-heading">'.concat(l.vehicleSelected,"</h2>")||"",!n&&'<span class="vehicle-selector__switch-back">\n                '.concat(function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0,i='<button data-vehicle-selector-switch class="link link_plain-link">'.concat(t||(arguments.length>0&&void 0!==arguments[0]?arguments[0]:""),"</button>");return t?i:(0,m.NR)(e,[i])}(l.clickHere,l.changeVehicleSelection,i),"\n            </span>"))}({changeVehicleCtaLabel:this.config.changeVehicleCtaLabel,content:S,disableChange:this.config.disableChange,enableYears:this.config.enableYears,selectControlCSSModifierClass:this.config.selectControlCSSModifierClass,id:this.id})({getNode:!0})}},{key:"resetView",value:function(e){e&&e.type?(e.preventDefault(),this.element.classList.remove(T),this.classSelect.resetSelection(),this.chosenVehicle&&this.chosenVehicle.destroy(),this.chosenVehicle=null,this.chosenModel=null,this.chosenModelCode=null,this.recreateClassSelect().then(this.focusClassSelect),this.recreateModelSelect()):(this.getVehicleClasses().then(this.createClassSelect),this.createModelSelect()),this.unsetLoadingSpinner(),this.config.onResetCallback()}},{key:"focusClassSelect",value:function(){if(this.classSelect.element){var e=this.classSelect.element.querySelector("button");e&&e.focus()}}},{key:"recreateModelSelect",value:function(){this.modelSelect&&this.modelSelect.destroy(),this.createModelSelect()}},{key:"recreateClassSelect",value:function(){return this.classSelect&&this.classSelect.destroy(),this.getVehicleClasses().then(this.createClassSelect)}},{key:"register",value:function(){this.config.formId&&m.Jw.dispatchEvent(m.Jw.createCustomEvent(f.xs.REGISTER,{detail:{formId:this.config.formId,input:this}}))}},{key:"unregister",value:function(){this.config.formId&&m.Jw.dispatchEvent(m.Jw.createCustomEvent(f.xs.UNREGISTER,{detail:{formId:this.config.formId,input:this}}))}},{key:"dispatchChange",value:function(){this.config.formId&&m.Jw.dispatchEvent(m.Jw.createCustomEvent(f.xs.INPUT_CHANGE,{detail:{formId:this.config.formId,input:this}}))}},{key:"cacheDOM",value:function(){this.selectClassElement=this.element.querySelector("[".concat("data-vehicle-selector-classes","]")),this.selectModelElement=this.element.querySelector("[".concat("data-vehicle-selector-models","]")),this.selectYearElement=this.element.querySelector("[".concat("data-vehicle-selector-years","]")),this.submitPlaceholderElement=this.element.querySelector("[".concat("data-vehicle-submit-cta","]")),this.vehicleSwitch=this.element.querySelector("[".concat("data-vehicle-selector-switch","]")),this.chosenVehicleElement=this.element.querySelector("[".concat("data-vehicle-selector-chosen-vehicle","]")),this.loaderContentContainer=this.element.querySelector(".".concat("vehicle-selector__loader-content-container")),this.vehicleSelector=this.element.querySelector(".".concat("vehicle-selector__selection"))}},{key:"attachEvents",value:function(){this.vehicleSwitch&&this.vehicleSwitch.addEventListener(r.FP.CLICK,this.resetView)}},{key:"detachEvents",value:function(){this.vehicleSwitch&&this.vehicleSwitch.removeEventListener(r.FP.CLICK,this.resetView)}},{key:"destroy",value:function(){this.detachEvents(),this.element.remove()}},{key:"constructYearItems",value:(b=(0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getModelsByYear().then((function(e){return Object.values(e.years).map((function(e){var t=e.year;return{label:t,value:t}}))})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"prepopulateSelectData",value:(n=(0,c.Z)(l().mark((function e(){var t,i,s,c,n,a,o,r,h=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.config.chosenVehicle.year,i=this.config.chosenVehicle.modelId.toUpperCase(),s=this.config.chosenVehicle.class.toUpperCase(),this.config.chosenVehicle.class){e.next=8;break}return e.next=6,this.getVehicleClassByModelCode(this.config.chosenVehicle.modelId);case 6:c=e.sent,s=c.toUpperCase();case 8:if(n=[],a=[],!t||!this.config.enableYears){e.next=22;break}return e.next=13,this.constructYearItems();case 13:return o=e.sent,e.next=16,this.getModelsByYear();case 16:r=e.sent,n=Object.values(r.years[t].classes).map((function(e){return{label:e.className,value:e.classId}})),a=Object.values(r.years[t].classes[s].models).map((function(e){return h.normalizeModel(e,s,t)})),this.createYearSelect(o),e.next=28;break;case 22:return e.next=24,this.getVehicleClasses();case 24:return n=e.sent,e.next=27,this.getVehicleModels(s);case 27:a=e.sent;case 28:this.createClassSelect(n,s),this.createModelSelect(a,i);case 30:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getVehicleClasses",value:(s=(0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(g,v));case 1:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})},{key:"getModelsByYear",value:(i=(0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(this.apiParams.getModelsByYear));case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getVehicleModels",value:function(e){return m.jG.insert(this.loader.render(),this.selectModelElement),D(g,v,e,this.config.activeModelsFilter)}},{key:"getVehicleClassByModelCode",value:(t=(0,c.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setLoadingSpinner(),e.abrupt("return",_(g,v,t).then((function(e){return e.model.vehicleClass.code})));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"selectVehicleByCode",value:function(e){var t=this;this.setLoadingSpinner(),_(g,v,e).then((function(e){t.chosenModel=e,t.createChosenVehicleView(e)}))}},{key:"selectVehicleByYear",value:function(e,t,i){var s=this;this.setLoadingSpinner(),L(g,v,e,t,i).then((function(e){s.chosenModel=e,s.createChosenVehicleView({model:e,bodystyle:e.vehicleBodystyle})}))}},{key:"getChosenVehicleData",value:function(e){this.setLoadingSpinner(),this.chosenModel=this.activeModels.filter((function(t){return t.model.code===e?t:null}))[0],this.chosenModel&&!this.chosenModel.year&&this.config.enableYears&&(this.chosenModel.year=this.yearSelect.getValue()),this.config.onSelectCallback(this.chosenModel),this.config.disableChosenVehicleView||this.createChosenVehicleView(this.chosenModel),this.vehicleSelector.setAttribute("data-analytics-container","{'vehicle-data':{'class':'".concat(this.chosenModel.model.vehicleClass.name,"','body':'").concat(this.chosenModel.bodystyle.name,"','model':'").concat(this.chosenModel.model.name,"'}}")),this.unsetLoadingSpinner(),this.dispatchChange()}},{key:"getChosenModelBuildURL",value:function(){return this.chosenModel.modelBuildPage}},{key:"setLoadingSpinner",value:function(){this.element.classList.add(x),m.jG.insert(this.loader.render(),this.loaderContentContainer)}},{key:"setDisabled",value:function(e){this.yearSelect&&this.yearSelect.setDisabled(e),this.classSelect&&this.classSelect.setDisabled(e),this.modelSelect&&this.modelSelect.setDisabled(e),this.submitCtaElement&&(this.submitCtaElement.disabled=e,e?this.submitCtaElement.classList.add(Z):this.submitCtaElement.classList.remove(Z))}},{key:"unsetLoadingSpinner",value:function(){this.element.classList.remove(x),this.loader.destroy()}},{key:"createClassSelect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=t?e.findIndex((function(e){return e.value===t})):-1;this.classSelect=new h.Yw(e,{errorMessage:S.selectClassErrorMessage,cssClass:"leads-form__select ".concat(this.config.selectControlCSSModifierClass),defaultSelection:i,selectionCallback:this.onSelectClass.bind(this),required:this.config.selectorsRequired,analyticsTrigger:"contact-vehicle-select",labelText:S.selectClass,ariaLabelText:S.selectClass}),m.jG.insert(this.classSelect.render(),this.selectClassElement)}},{key:"createYearSelect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=this.config.chosenVehicle?t.findIndex((function(t){return t.value===e.config.chosenVehicle.year})):-1;this.yearSelect=new h.Yw(t,{errorMessage:S.selectYearErrorMessage,cssClass:"leads-form__select ".concat(this.config.selectControlCSSModifierClass),defaultSelection:i,selectionCallback:this.onSelectYear.bind(this),required:this.config.selectorsRequired,analyticsTrigger:"contact-vehicle-select",labelText:S.selectYear,ariaLabelText:S.selectYear}),m.jG.insert(this.yearSelect.render(),this.selectYearElement)}},{key:"createModelSelect",value:function(e,t){this.activeModels=e;var i=this.parseModelItems(),s=t?i.findIndex((function(e){return e.value===t})):-1;this.modelSelect=new h.Yw(i,{ariaLabelText:S.selectModel,errorMessage:S.selectModelErrorMessage,cssClass:"leads-form__select ".concat(this.config.selectControlCSSModifierClass),defaultSelection:s,selectionCallback:this.onSelectModel.bind(this),required:this.config.selectorsRequired,analyticsTrigger:"contact-vehicle-select",labelText:S.selectModel}),m.jG.insert(this.modelSelect.render(),this.selectModelElement)}},{key:"createSubmitCta",value:function(){this.config.submitCtaLabel&&(this.submitBtn=new u.ButtonControl({valueText:this.config.submitCtaLabel,type:"primary",modifier:"wide",cssClasses:"vehicle-selector__submit-cta ".concat(this.config.submitCtaClass),analyticsTrigger:"cta-submit",id:this.id,errorText:S.vehicleSelectorError,onClick:this.onSubmit}),m.jG.insert(this.submitBtn.render(),this.submitPlaceholderElement))}},{key:"showSelectedVehicleView",value:function(){this.onSelectModel(this.config.chosenVehicle.modelId.toUpperCase()),this.onSubmit()}},{key:"normalizeModel",value:function(e,t,i){return B({},e,{bodystyle:{name:e.bodystyleId},class:t,model:{name:e.modelName,code:e.modelId,vehicleClass:{name:t}},year:i})}},{key:"parseModelItems",value:function(){var e=this,t=[];return this.activeModels&&(t=this.activeModels.map((function(t){return e.config.hideComingSoonModels&&!t.isComingSoon||!e.config.hideComingSoonModels?{label:t.model.name,value:t.model.code}:null})).filter((function(e){return!!e}))),t}},{key:"createChosenVehicleView",value:function(e){e?(this.chosenVehicle=new I(this.chosenVehicleElement,e,g,v,C,this.config.showYear,this.config.buildPrice,this.config.modelCode),this.element.classList.add(T)):this.recreateModelSelect(),this.element.focus(),this.unsetLoadingSpinner()}},{key:"onSelectClass",value:function(e){var t=this;return this.setButtonErrorState(!0),this.selectedClass=e,this.modelSelect&&this.modelSelect.destroy(),(this.config.chosenVehicle||this.chosenModel)&&this.config.onSelectCallback(null),this.config.enableYears?(m.jG.insert(this.loader.render(),this.selectModelElement),this.getModelsByYear().then((function(i){return Object.values(i.years[t.yearSelect.getValue()].classes[e].models).map((function(e){return t.normalizeModel(e,t.selectedClass,t.selectedYear)}))})).then(this.createModelSelect).then(this.dispatchChange)):(this.chosenModel=null,this.setDisabled(!0),this.getVehicleModels(e).then(this.createModelSelect).catch((function(e){console.error(e)})).then((function(){t.setDisabled(!1)})))}},{key:"onSelectYear",value:function(e){this.setButtonErrorState(!0),this.selectedYear=e,this.classSelect&&this.modelSelect&&(this.classSelect.destroy(),this.modelSelect.destroy()),(this.config.chosenVehicle||this.chosenModel)&&this.config.onSelectCallback(null),m.jG.insert(this.loader.render(),this.selectClassElement),this.getModelsByYear().then((function(t){return Object.values(t.years[e].classes).map((function(e){return{label:e.className,value:e.classId}}))})).then(this.createClassSelect).then(this.createModelSelect),this.dispatchChange()}},{key:"onSelectModel",value:function(e){this.setButtonErrorState(!0),this.config.selectVehicleOnSubmit?this.chosenModelCode=e:this.getChosenVehicleData(e)}},{key:"onSubmit",value:function(){this.setButtonErrorState(!0),this.hasNewInvSelector?(this.hasNewInvSelector=!1,this.config.selectPassedVehicle(this.config.chosenVehicle),this.useChosenVehicle=!1):this.classSelect.validate()&&this.modelSelect.validate()?this.config.selectVehicleOnSubmit?this.chosenModelCode&&this.getChosenVehicleData(this.chosenModelCode):(this.chosenModel&&this.triggerCallback(),this.classSelect.validate(),this.modelSelect.validate()):this.focusOnError(),this.config.onClickSubmitCallback()}},{key:"triggerCallback",value:function(){this.useChosenVehicle&&this.config.forceModelSelection&&this.chosenModel.model.code.toUpperCase()===this.config.chosenVehicle.modelId.toUpperCase()?(this.config.submitCtaCallback(B({},this.chosenModel,{year:this.config.chosenVehicle.year,msrp:this.config.chosenVehicle.msrp,vin:this.config.chosenVehicle.vin})),this.useChosenVehicle=!1):(this.config.submitCtaCallback(this.chosenModel),this.config.forceModelSelection&&this.updatePageUrl())}},{key:"updatePageUrl",value:function(){var e=(0,m.g6)(window.location.href,["year","class","model","msrp","vin","inv"]);window.location.href!==e&&m.m8.replaceState("","",e)}},{key:"isValid",value:function(){return!!this.config.chosenVehicle||this.valid}},{key:"validate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.valid=!this.config.selectorsRequired||!!this.chosenModel,!this.valid&&this.classSelect&&this.modelSelect&&(this.classSelect.validate(e),this.modelSelect.validate(e)),!this.valid&&this.config.enableYears&&this.yearSelect&&this.yearSelect.validate(e),this.valid||this.yearSelect&&!this.yearSelect.isValid()||this.classSelect&&!this.classSelect.isValid()||this.modelSelect&&!this.modelSelect.isValid()||this.setButtonErrorState(!1)}},{key:"prevalidate",value:function(){this.validate(!1)}},{key:"focusOnError",value:function(){this.yearSelect&&!this.yearSelect.isValid()?this.yearSelect.focus=!0:this.classSelect&&!this.classSelect.isValid()?this.classSelect.focus=!0:this.modelSelect&&!this.modelSelect.isValid()?this.modelSelect.focus=!0:this.submitBtn&&(this.submitBtn.focus=!0)}},{key:"setButtonErrorState",value:function(e){this.submitBtn&&(this.submitBtn.valid=e)}},{key:"render",value:function(){return this.element}},{key:"focus",set:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.focusOnError()}}]),e}()}}]);
//# sourceMappingURL=5b6c96567f0c2e0d2966.bundle.js.map