"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[4470],{16266:function(t,e,n){n.d(e,{D:function(){return f}});var i=n(15671),o=n(43144),a=n(4942),s=n(48218),r=n(61156),c=n(55235),l=n(30168);function u(){var t=(0,l.Z)(['\n    <div class="dealer-search-bar">\n        <div class="dealer-search-bar__location-search" data-location-search=""></div>\n        <div class="dealer-search-bar__cta">\n            <button class="','" data-cta-button="" data-analytics-trigger="cta">\n                ',"\n            </button>\n        </div>\n    </div>\n"]);return u=function(){return t},t}var h=function(t){var e=t.ctaLabel,n=t.buttonStyle;return(0,r.e2)(u(),n,e)};function d(){var t=(0,l.Z)(['\n    <form onSubmit="return false;">\n        <h3 class="preferred-dealer-plugin__sub-heading">','</h3>\n        <div class="dealer-search-bar">\n            <div class="dealer-search-bar__location-search" data-location-search=""></div>\n            <div class="dealer-search-bar__cta">\n                <button type="button" class="','" data-cta-button="" data-analytics-trigger="contact-dealer-search">\n                    ',"\n                </button>\n            </div>\n        </div>\n    </form>\n"]);return d=function(){return t},t}var v=function(t){var e=t.ctaLabel,n=t.buttonStyle,i=t.sectionHeading;return(0,r.e2)(d(),i,n,e)},f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.autoSubmitLocation,o=void 0===n||n,a=e.buttonStyle,s=void 0===a?"button button_secondary_alt":a,c=e.country,l=e.ctaLabel,u=void 0===l?"":l,d=e.dealerSearchErrorMessage,f=void 0===d?"":d,m=e.dealerSearchErrorMessageUS,p=void 0===m?"":m,b=e.defaultLocation,y=e.onCTAClick,L=void 0===y?r.ZT:y,E=e.onSubmit,g=void 0===E?r.ZT:E,S=e.isCTASubmit,k=void 0===S||S,C=e.searchInputLabel,O=void 0===C?"":C,I=e.searchInputLabelUS,_=void 0===I?"":I,P=e.sectionHeading,w=void 0===P?"":P,B=e.theme,A=void 0===B?t.THEMES.DEALER_SEARCH:B,T=e.onErrorMessage,Z=void 0===T?r.ZT:T,M=e.shouldPreventDefaultOnSubmit,D=void 0!==M&&M;(0,i.Z)(this,t),this.element=(A===t.THEMES.CHOOSE_A_DEALER?v:h)({ctaLabel:u,buttonStyle:s,sectionHeading:w})({getNode:!0}),this.searchInputLabel=O,this.searchInputLabelUS=_,this.dealerSearchErrorMessage=f,this.dealerSearchErrorMessageUS=p,this.locationSearch=null,this.locationSearchElem=null,this.ctaButtonElm=null,this.onCTAClickCallback=L,this.onSubmitCallback=g,this.isCTASubmit=k,this.country=c,this.defaultLocation=b,this.theme=A,this.autoSubmitLocation=o,this.onErrorMessageCallback=Z,this.shouldPreventDefaultOnSubmit=D,this.ctaClick=this.ctaClick.bind(this),this.submitLocation=this.submitLocation.bind(this),this.cacheDOM(),this.attachEvents(),this.createLocationSearch()}return(0,o.Z)(t,[{key:"cacheDOM",value:function(){this.locationSearchElem=this.element.querySelector("[".concat("data-location-search","]")),this.ctaButtonElm=this.element.querySelector("[".concat("data-cta-button","]"))}},{key:"attachEvents",value:function(){this.isCTASubmit||this.ctaButtonElm&&this.ctaButtonElm.addEventListener(s.FP.CLICK,this.ctaClick)}},{key:"createLocationSearch",value:function(){this.locationSearch=new c.U({searchLength:3,searchInputLabel:this.searchInputLabel,searchInputLabelUS:this.searchInputLabelUS,country:this.country,defaultLocation:this.defaultLocation,errorMessage:this.dealerSearchErrorMessage,errorMessageUS:this.dealerSearchErrorMessageUS,onSubmit:this.submitLocation,onSubmitBtn:this.isCTASubmit?this.ctaButtonElm:null,autoSubmitLocation:this.autoSubmitLocation,onErrorMessageCallback:this.onErrorMessageCallback,shouldPreventDefaultOnSubmit:this.shouldPreventDefaultOnSubmit}),this.locationSearchElem.appendChild(this.locationSearch.render())}},{key:"submitLocation",value:function(t){var e=this;new Promise((function(n){"place"===t.type?n({searchString:t.value,searchLocation:t.id,searchByType:"place",autoSubmit:e.autoSubmitLocation}):"zip"===t.type&&n({searchString:t.value,searchLocation:t.value,searchByType:"zip",autoSubmit:e.autoSubmitLocation})})).catch((function(e){console.warn("Location could not be found for ".concat(t.id," ").concat(e))})).then(this.onSubmitCallback)}},{key:"ctaClick",value:function(t){t.preventDefault(),this.onCTAClickCallback(this.locationSearch.searchInputElm.value)}},{key:"detachEvents",value:function(){this.isCTASubmit||this.ctaButtonElm.removeEventListener(s.FP.CLICK,this.ctaClick)}},{key:"destroy",value:function(){this.detachEvents(),this.locationSearch&&(this.locationSearch.destroy(),this.locationSearch=null),this.locationSearchElem=null,this.ctaButtonElm=null,this.element.remove()}},{key:"showError",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.locationSearch.showErrorMessage(t,e)}},{key:"render",value:function(){return this.element}},{key:"focus",set:function(t){t&&(this.locationSearch.focus=t)}}]),t}();(0,a.Z)(f,"THEMES",{DEALER_SEARCH:"dealerSearch",CHOOSE_A_DEALER:"chooseADealerPlugin"})},83224:function(t,e,n){n.d(e,{T:function(){return h},Z:function(){return d}});var i=n(4942),o=n(15671),a=n(43144),s=n(30168),r=n(61156);function c(){var t=(0,s.Z)(['\n    <div class="loading-spinner '," ",'">\n    </div>']);return c=function(){return t},t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var u={isInline:!1,isLarge:!1},h=function(){function t(){var e,n,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.Z)(this,t),this.config=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},u,{},s),this.element=(n=(e=s).isInline,a=e.isLarge,(0,r.e2)(c(),n?"loading-spinner--inline":"",a?"loading-spinner--large":""))({getNode:!0})}return(0,a.Z)(t,[{key:"destroy",value:function(){this.element.remove()}},{key:"render",value:function(){return this.element}}]),t}(),d={LoadingSpinner:h}},55235:function(t,e,n){n.d(e,{U:function(){return j}});var i=n(87757),o=n.n(i),a=n(15861),s=n(15671),r=n(43144),c=n(82963),l=n(61120),u=n(60136),h=n(4942),d=n(72307),v=n.n(d),f=n(48218),m=n(92059),p=n(80662),b=n(70816),y=n(61156),L=n(37898),E=n(71002),g=n(12641),S={locations:null,locationValue:{type:"string",value:""}},k=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;return(0,s.Z)(this,e),(0,c.Z)(this,(0,l.Z)(e).call(this,t))}return(0,u.Z)(e,t),(0,r.Z)(e,[{key:"setLocation",value:function(t){this.state.locationValue=function(t){return"object"===(0,E.Z)(t)&&Object.prototype.hasOwnProperty.call(t,"place_id")?{type:"place",value:"".concat((e=t).terms[0].value,", ").concat(e.terms[1].value),id:e.place_id}:(0,L.isValidZip)(t)?{type:"zip",value:t}:{type:"string",value:t};var e}(t)}},{key:"getLocations",value:function(t,e){var n=this;return p.cJ.getCityNames(t,e).then((function(t){t&&e!==g.Z.COUNTRIES.US&&(n.state.locations=t)})).catch((function(t){throw t}))}},{key:"clearLocations",value:function(){this.state.locations=null}}]),e}(m.y),C=n(30168);function O(){var t=(0,C.Z)(['\n    <div class="location-search__locations" aria-hidden="true">\n        <ul class="location-search__list"\n            data-location-list=""\n            id="','"\n            role="listbox">\n        </ul>\n        <div class="location-search__engine"></div>\n    </div>\n']);return O=function(){return t},t}function I(){var t=(0,C.Z)(['\n    <li class="location-search__location"\n        data-location="','"\n        tabindex="','"\n        role="option">\n        ',", ","\n    </li>\n"]);return I=function(){return t},t}var _="aria-hidden",P=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.ZT,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,s.Z)(this,t),this.element=function(t){return(0,y.e2)(O(),t)}(n)({getNode:!0}),this.onSelectCallback=e,this.locationList=null,this.locationElms=[],this.locations=null,this.onSelect=this.onSelect.bind(this),this.cacheDOM()}return(0,r.Z)(t,[{key:"cacheDOM",value:function(){this.locationList=this.element.querySelector("[".concat("data-location-list","]"))}},{key:"attachEvents",value:function(){var t=this;this.locationElms.forEach((function(e,n){e.addEventListener(f.FP.CLICK,t.onSelect.bind(t,t.locations[n]))}))}},{key:"detachEvents",value:function(){var t=this;this.locationElms.forEach((function(e){e.removeEventListener(f.FP.CLICK,t.onSelect)}))}},{key:"destroy",value:function(){this.detachEvents(),this.locations=null,this.element.remove()}},{key:"displayLocations",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.locations=e,this.locations.forEach((function(e,n){var i=e.terms[0].value,o=e.terms[1].value,a=function(t,e,n,i){return(0,y.e2)(I(),t,i?"0":"-1",e,n)}(e.place_id,i,o,0===n)({getNode:!0});t.locationElms.push(a),y.jG.append(a,t.locationList)})),this.element.setAttribute(_,"false"),this.attachEvents()}},{key:"hideLocations",value:function(){this.detachEvents(),this.locations=null,this.locationElms.forEach((function(t){t.remove()})),this.locationElms=[],this.element.setAttribute(_,"true")}},{key:"onSelect",value:function(t){this.onSelectCallback(t)}},{key:"render",value:function(){return this.element}}]),t}();function w(){var t=(0,C.Z)(['\n    <div class="location-search">\n        <div class="location-search__form">\n            <div class="form__input form__input--inline" \n                 data-search-input-container=""\n                 role="combobox"\n                 aria-expanded="false"\n                 aria-haspopup="listbox"\n                 aria-owns="','">\n                <input class="form__input-field ','"\n                    data-search-input=""\n                    data-analytics-trigger="locator-search"\n                    id="','"\n                    required\n                    data-required="true"\n                    aria-describedby="','"\n                    aria-required="true"\n                    aria-controls="','"\n                    autoComplete="off" />\n                <label class="form__input-label" for="','">\n                    ','\n                </label>\n                <button type="button" class="form__input-reset" data-clear-button="">\n                    <span class="offscreen">Delete</span>\n                </button>\n                <span id=',' class="form__input-error" data-error-message></span>\n            </div>\n        </div>\n        <div class="location-search__results" data-search-locations="">\n        </div>\n    </div>\n']);return w=function(){return t},t}var B="location-search--active",A="error",T="form__input-dropdown",Z="form__input-reset--visible",M="data-search-locations",D="aria-expanded",V="aria-invalid",U=function(t){return{terms:[{value:t.address_components[0].long_name},{value:t.address_components.find((function(t){return-1!==t.types.indexOf("administrative_area_level_1")})).short_name}],place_id:t.place_id}},j=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.formElm,o=void 0===i?null:i,a=n.searchLength,r=void 0===a?3:a,u=n.searchInputLabel,h=void 0===u?"":u,d=n.searchInputLabelUS,v=void 0===d?"":d,f=n.errorMessage,m=void 0===f?"":f,p=n.errorMessageUS,b=void 0===p?"":p,L=n.theme,E=void 0===L?"":L,g=n.onSubmit,S=void 0===g?y.ZT:g,k=n.onSubmitBtn,C=void 0===k?null:k,O=n.disableReset,I=void 0!==O&&O,_=n.country,P=n.defaultLocation,B=n.autoSubmitLocation,A=void 0===B||B,T=n.onInputChangeCallback,Z=void 0===T?y.ZT:T,M=n.onAutoSubmitErrorCallback,D=void 0===M?y.ZT:M,V=n.onErrorMessageCallback,U=void 0===V?y.ZT:V,j=n.shouldPreventDefaultOnSubmit,K=void 0!==j&&j;(0,s.Z)(this,e),t=(0,c.Z)(this,(0,l.Z)(e).call(this));var N=(0,y.fV)(),F="listbox".concat(N),x="error".concat(N);return t.element=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0,o=i.searchInputLabel,a=i.searchInputLabelUS,s=i.disableReset;return(0,y.e2)(w(),e,s?"":"form__input-field--can-reset",t,n,e,t,o||a,n)}(N,F,x,{searchInputLabel:h,searchInputLabelUS:v,disableReset:I})({getNode:!0}),t.formElm=o,t.searchInputElm=null,t.searchInputContainerElm=null,t.onSubmitBtn=C,t.clearButtonElm=null,t.errorMessageElm=null,t.disableReset=I,t.locationListElm=null,t.locationList=null,t.searchLengthBuffer=r,t.onSubmitCallback=S,t.country=_,t.errorMessage=m,t.errorMessageUS=b,t.errored=!1,t.theme=E,t.defaultLocation=P,t.onInputChangeCallback=Z,t.autoSubmitLocation=A,t.onAutoSubmitErrorCallback=D,t.onErrorMessageCallback=U,t.shouldPreventDefaultOnSubmit=K,t.init(F),t}var n;return(0,u.Z)(e,t),(0,r.Z)(e,[{key:"init",value:(n=(0,a.Z)(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.model=new k,this.onKeydown=this.onKeydown.bind(this),this.onInputChange=this.onInputChange.bind(this),this.checkInputChangeKey=this.checkInputChangeKey.bind(this),this.onLocationSelection=this.onLocationSelection.bind(this),this.searchPlaces=this.searchPlaces.bind(this),this.searchPlacesDebounce=(0,y.Ds)(this.searchPlaces,100).bind(this),this.onInputFocus=this.onInputFocus.bind(this),this.submitLocation=this.submitLocation.bind(this),this.onSubmitBtnClick=this.onSubmitBtnClick.bind(this),this.clearInputValue=this.clearInputValue.bind(this),this.toggleClearButton=this.toggleClearButton.bind(this),this.onlocationListChange=this.onlocationListChange.bind(this),this.setLocationToLS=this.setLocationToLS.bind(this),this.onClickOutside=this.onClickOutside.bind(this),this.onTabOutside=this.onTabOutside.bind(this),this.onClearBtnClick=this.onClearBtnClick.bind(this),this.cacheDOM(),this.attachEvents(),t.next=21,b.s.getInstance();case 21:this.dealerLocationPrioritization=t.sent,this.disableReset&&this.disableClearButton(),this.defaultLocation&&this.setDefaultLocation(),this.locationList=new P(this.onLocationSelection,e),y.jG.insert(this.locationList.render(),this.locationListElm);case 26:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"setDefaultLocation",value:function(){var t=this;if(this.defaultLocation.searchLocation)switch(this.defaultLocation.searchByType){case"place":p.cJ.getPlaceInfo(this.defaultLocation.searchLocation).then(U).then((function(e){t.onLocationSelection(e,t.autoSubmitLocation),t.searchInputElm.blur(),t.searchInputElm.focus()})).catch((function(e){console.log(e),t.onAutoSubmitErrorCallback()}));break;case"zip":this.setLocation(this.defaultLocation.searchLocation),this.setInputValue(this.defaultLocation.searchLocation),this.autoSubmitLocation&&window.setTimeout(this.submitLocation.bind(this))}}},{key:"cacheDOM",value:function(){this.formElm=this.element.querySelector(".".concat("form__input")),this.searchInputElm=this.element.querySelector("[".concat("data-search-input","]")),this.searchInputContainerElm=this.element.querySelector("[".concat("data-search-input-container","]")),this.locationListElm=this.element.querySelector("[".concat(M,"]")),this.clearButtonElm=this.element.querySelector("[".concat("data-clear-button","]")),this.errorMessageElm=this.element.querySelector("[".concat("data-error-message","]"))}},{key:"attachEvents",value:function(){this.onSubmitBtn&&this.onSubmitBtn.addEventListener(f.FP.CLICK,this.onSubmitBtnClick),this.searchInputElm.addEventListener(f.FP.KEYDOWN,this.onKeydown),this.searchInputElm.addEventListener(f.FP.FOCUS,this.onInputFocus),this.clearButtonElm.addEventListener(f.FP.CLICK,this.onClearBtnClick),this.locationListElm.addEventListener(f.FP.KEYDOWN,this.onlocationListChange),this.attachAllyEvents(),this.model.attach(this)}},{key:"attachAllyEvents",value:function(){this.tabOutside=new y.yM(this.element,{onBlur:this.onTabOutside}),this.clickOutside=new y.Lp(this.element,y.ZT,this.onClickOutside,{useCapture:!1})}},{key:"detachEvents",value:function(){this.onSubmitBtn&&this.onSubmitBtn.removeEventListener(f.FP.CLICK,this.onSubmitBtnClick),this.searchInputElm.removeEventListener(f.FP.KEYDOWN,this.onKeydown),this.searchInputElm.removeEventListener(f.FP.KEYUP,this.onInputChange),this.searchInputElm.removeEventListener(f.FP.FOCUS,this.onInputFocus),this.clearButtonElm.removeEventListener(f.FP.CLICK,this.onClearBtnClick),this.locationListElm.removeEventListener(f.FP.KEYDOWN,this.onlocationListChange),this.detachAllyEvents(),this.model.detach(this)}},{key:"detachAllyEvents",value:function(){var t,e;null===(t=this.tabOutside)||void 0===t||t.destroy(),null===(e=this.clickOutside)||void 0===e||e.destroy()}},{key:"destroy",value:function(){this.detachEvents(),this.element.remove()}},{key:"onClickOutside",value:function(){this.doBlur()}},{key:"onTabOutside",value:function(){this.doBlur()}},{key:"onClearBtnClick",value:function(){this.clearInputValue(),this.searchInputElm.focus()}},{key:"onUpdate",value:function(t,e){v()(t.locations,e.locations)||(this.onLocationsChange(),this.detachAllyEvents(),this.attachAllyEvents())}},{key:"toggleClearButton",value:function(t){this.clearButtonElm&&(""!==t?this.clearButtonElm.classList.add(Z):this.clearButtonElm.classList.remove(Z))}},{key:"getLocationListDOMElements",value:function(){return this.element.querySelector(".".concat("location-search__list"))}},{key:"onlocationListChange",value:function(t){var e=document.activeElement;switch(t.which){case f.sd.UP:this.handleOptionUpArrow(t,e);break;case f.sd.DOWN:this.handleOptionDownArrow(t,e);break;case f.sd.ENTER:this.processKeyEnterOnLocationList(t)}}},{key:"handleOptionUpArrow",value:function(t,e){if(t.preventDefault(),e){var n=e.previousElementSibling;n?n.focus():this.searchInputElm.focus()}}},{key:"handleOptionDownArrow",value:function(t,e){if(t.preventDefault(),e){var n=e.nextElementSibling;n&&n.focus()}}},{key:"processKeyEnterOnLocationList",value:function(t){t.preventDefault();var e=document.activeElement;e&&(this.setLocation(e.innerHTML),this.submitLocation())}},{key:"disableClearButton",value:function(){this.clearButtonElm.remove(),this.clearButtonElm=null}},{key:"onKeydown",value:function(t){t.which!==f.sd.TAB&&(this.shouldPreventDefaultOnSubmit&&t.which===f.sd.ENTER&&t.preventDefault(),this.searchInputElm.addEventListener(f.FP.KEYUP,this.onInputChange))}},{key:"onInputChange",value:function(t){this.searchInputElm.removeEventListener(f.FP.KEYUP,this.onInputChange);var n=t.target.value,i=t.which;this.toggleClearButton(n),this.theme===e.THEMES.GLOBALNAV?this.errored?(this.model.state.inputValue="",this.model.state.locationValue.value="",this.hideErrorMessage()):this.checkInputChangeKey(i,n):(this.errored&&this.hideErrorMessage(),this.checkInputChangeKey(i,n)),"function"==typeof this.onInputChangeCallback&&this.onInputChangeCallback(n)}},{key:"checkInputChangeKey",value:function(t,e){t===f.sd.ENTER?this.submitLocation():t===f.sd.DOWN?this.locationListElm.focus():e!==this.model.state.inputValue&&(this.setInputValue(e),this.setLocation(e),this.searchPlacesDebounce())}},{key:"onSubmitBtnClick",value:function(t){this.shouldPreventDefaultOnSubmit&&t.preventDefault(),this.submitLocation()}},{key:"onInputFocus",value:function(){var t=this.searchInputElm.value;this.theme===e.THEMES.GLOBALNAV&&this.hideErrorMessage(),this.element.classList.add(B);var n=this.element.querySelector(".".concat(T));n&&(n.style.display="block"),this.toggleClearButton(t)}},{key:"doBlur",value:function(){this.element.classList.remove(B),this.clearButtonElm&&this.clearButtonElm.classList.remove(Z);var t=this.element.querySelector(".".concat(T));t&&(t.style.display="none"),(0,y.wr)(document.activeElement,"[".concat(M,"]"))||this.removeLocationList()}},{key:"onLocationsChange",value:function(){var t=this.model.state.locations;this.locationList&&this.removeLocationList(),t&&t.length>0&&this.country!==g.Z.COUNTRIES.US&&this.displayLocationList()}},{key:"onLocationSelection",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="".concat(t.terms[0].value,", ").concat(t.terms[1].value);this.setInputValue(n),y.sp.gte(y.sp.SIZES.LARGE)&&(this.searchInputElm.focus(),this.searchInputElm.blur()),this.setLocation(t),e&&this.submitLocation(),this.removeLocationList()}},{key:"setInputValue",value:function(t){this.searchInputElm.value=t}},{key:"clearInputValue",value:function(){this.setInputValue(""),this.toggleClearButton(""),this.setLocation(""),this.onInputChangeCallback(""),this.removeLocationList()}},{key:"setLocation",value:function(t){this.model.setLocation(t)}},{key:"autoSelectLocation",value:function(){var t=this,e=this.model.state.locationValue;return this.model.getLocations(e.value,this.country).then((function(){t.model.state.locations&&t.onLocationSelection(t.model.state.locations[0])})).catch((function(t){throw t}))}},{key:"shouldAutoPick",value:function(){var t=this,e=this.model.state.locationValue;return e&&"string"===e.type&&e.value.length>=t.searchLengthBuffer}},{key:"submitLocation",value:function(){var t=this.model.state.locationValue;this.country===g.Z.COUNTRIES.US&&"string"===t.type||!(0,L.isPlace)(t.value)&&!(0,L.isValidZip)(t.value)?this.showErrorMessage():(this.errored=!1,this.hideErrorMessage(),this.setLocationToLS(t),this.shouldAutoPick()?this.autoSelectLocation():"place"!==t.type&&"zip"!==t.type||(this.onSubmitCallback(t),this.removeLocationList()))}},{key:"setLocationToLS",value:function(t){var e=b.s.DATA_TYPES.LAST_SEARCHED_LOCATION,n=t.value;t.id&&(n=t.id),this.dealerLocationPrioritization.set(e,[n,t.type],!0)}},{key:"searchPlaces",value:function(){var t=this.model.state.locationValue;t&&t.value.length>=this.searchLengthBuffer&&!(0,L.isValidZipStart)(t.value)?this.model.getLocations(t.value,this.country):this.model.clearLocations()}},{key:"showErrorMessage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=window.mbNafta.ns("pageData").localization.defaultErrorLabel;this.errored=!0;var o=t||this.errorMessage||i;this.theme===e.THEMES.GLOBALNAV?(this.searchInputElm.value=o,this.searchInputElm.classList.add("".concat(A))):(this.formElm.classList.add("".concat(A)),this.errorMessageElm.innerText=o,n&&this.searchInputElm.focus()),this.searchInputElm.setAttribute(V,"true"),this.onErrorMessageCallback()}},{key:"hideErrorMessage",value:function(){this.errored=!1,this.theme===e.THEMES.GLOBALNAV?(this.clearInputValue(),this.searchInputElm.classList.remove("".concat(A))):(this.formElm.classList.remove("".concat(A)),this.formElm.removeAttribute("data-error")),this.searchInputElm.setAttribute(V,"false")}},{key:"displayLocationList",value:function(){this.locationList.displayLocations(this.model.state.locations),this.searchInputContainerElm.setAttribute(D,"true")}},{key:"removeLocationList",value:function(){this.locationList&&(this.locationList.hideLocations(),this.searchInputContainerElm.setAttribute(D,"false"))}},{key:"validate",value:function(){var t=this.model.state.locationValue&&this.model.state.locationValue.value,e=!!t&&((0,L.isPlace)(t)||(0,L.isValidZip)(t));return e?this.hideErrorMessage():this.showErrorMessage(),e}},{key:"getLocation",value:function(){var t=this;return new Promise((function(e){t.shouldAutoPick()?t.autoSelectLocation().then((function(){return e(t.model.state.locationValue)})):e(t.model.state.locationValue)}))}},{key:"render",value:function(){return this.element}},{key:"focus",set:function(t){t&&this.searchInputElm.focus()}}]),e}(m.Q);(0,h.Z)(j,"THEMES",{GLOBALNAV:"globalNav"})},92059:function(t,e,n){n.d(e,{y:function(){return u},Q:function(){return h}});var i=n(15671),o=n(43144),a=n(72307),s=n.n(a),r=n(71002),c=function(t){if(t.Proxy)return t.Proxy;var e=null;function n(t){return!!t&&("object"===(0,r.Z)(t)||"function"==typeof t)}var i=function(t,i){if(!n(t)||!n(i))throw new TypeError("Cannot create proxy with a non-object as target or handler");var o=function(){};e=function(){o=function(t){throw new TypeError("Cannot perform '".concat(t,"' on a proxy that has been revoked"))}};var a=i;for(var s in i={get:null,set:null,apply:null,construct:null},a){if(!(s in i))throw new TypeError("Proxy polyfill does not support trap '".concat(s,"'"));i[s]=a[s]}"function"==typeof a&&(i.apply=a.apply.bind(a));var r=this,c=!1,l="function"==typeof t;(i.apply||i.construct||l)&&(r=function(){var e=this&&this.constructor===r,n=Array.prototype.slice.call(arguments);if(o(e?"construct":"apply"),e&&i.construct)return i.construct.call(this,t,n);if(!e&&i.apply)return i.apply(t,this,n);if(l)return e?(n.unshift(t),new(t.bind.apply(t,n))):t.apply(this,n);throw new TypeError(e?"not a constructor":"not a function")},c=!0);var u=i.get?function(t){return o("get"),i.get(this,t,r)}:function(t){return o("get"),this[t]},h=i.set?function(t,e){o("set"),i.set(this,t,e,r)}:function(t,e){o("set"),this[t]=e},d=Object.getOwnPropertyNames(t),v={};d.forEach((function(e){if(!c||!(e in r)){var n={enumerable:!!Object.getOwnPropertyDescriptor(t,e).enumerable,get:u.bind(t,e),set:h.bind(t,e)};Object.defineProperty(r,e,n),v[e]=!0}}));var f=!0;if(Object.setPrototypeOf?Object.setPrototypeOf(r,Object.getPrototypeOf(t)):r.__proto__?r.__proto__=t.__proto__:f=!1,i.get||!f)for(var m in t)v[m]||Object.defineProperty(r,m,{get:u.bind(t,m)});return Object.seal(t),Object.seal(r),r};return i.revocable=function(t,n){return{proxy:new i(t,n),revoke:e}},i}("undefined"!=typeof process&&"[object process]"=={}.toString.call(process)?n.g:self),l=function(){function t(e,n){return(0,i.Z)(this,t),t.buildProxy("",e,n)}return(0,o.Z)(t,null,[{key:"buildProxy",value:function(e,n,i){return new c(n,{set:function(t,e,n){var o=Object.assign({},t);return t[e]=n,i(o,t),!0},get:function(n,o){var a=n[o];return a instanceof Object?t.buildProxy("".concat(e).concat(o),a,i):a}})}}]),t}(),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,t),this.observers=[],this.state=new l(e,this.onChange.bind(this))}return(0,o.Z)(t,[{key:"attach",value:function(t){this.observers.push(t)}},{key:"detach",value:function(t){this.observers.splice(this.observers.indexOf(t),1)}},{key:"destroy",value:function(){this.observers=[]}},{key:"onChange",value:function(t,e){var n=this;s()(t,e)||Object.keys(this.observers).forEach((function(i){Object.prototype.hasOwnProperty.call(n.observers,i)&&n.observers[i].onUpdate(t,e)}))}}]),t}(),h=function(){function t(){(0,i.Z)(this,t)}return(0,o.Z)(t,[{key:"onUpdate",value:function(){return this}}]),t}()}}]);
//# sourceMappingURL=b57f4c8c1b7b88ff2588.bundle.js.map