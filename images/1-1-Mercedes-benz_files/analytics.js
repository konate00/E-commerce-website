"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[4766],{22157:function(e,t,n){var a=n(61156),r=n(15671),i=n(43144),o=n(48218),l=n(75253),c=n(52597),s=n(70816),u=window.mbDSDataLayer,h=function(){function e(){(0,r.Z)(this,e),this.populateDataLayer(),this.exposeAnalyticsApi()}return(0,i.Z)(e,[{key:"populateDataLayer",value:function(){Object.defineProperty(u,"user",{get:function(){var e=s.g.STORAGE,t=e.LAST_SEARCHED_LOCATION_LOCALSTORAGE,n=e.LAST_SELECTED_DEALER_LOCALSTORAGE,r=e.PREFERRED_DEALER_LOCALSTORAGE;return{authenticated:(new c.$S).isLoggedIn(),ciamID:a.pR.getCookie(o.E9.HASHED),lastSearchedLocation:a.tO.localStorage.read(t),lastSelectedDealer:a.tO.localStorage.read(n),preferredDealer:a.tO.localStorage.read(r),webID:a.pR.getCookie("MBUSA_WEB_ID")}}})}},{key:"exposeAnalyticsApi",value:function(){u.analyticsApi=new l.Z({provider:window._satellite,type:l.Z.CONSTANTS.SATELLITE})}}]),e}();a.ZP.onReady((function(){return new h}))},75253:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(15671),r=n(43144),i=n(4942),o=n(61156),l=function(){function e(t){if((0,a.Z)(this,e),!t)throw this.api={setVar:o.ZT,track:o.ZT},new Error(e.CONSTANTS.SATELLITE_API_ERROR_UNDEFINED);this.api=t}return(0,r.Z)(e,[{key:"logEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(n).forEach((function(e){t.api.setVar(e,n[e])})),this.track(e,n)}},{key:"track",value:function(e,t){this.api.track(e,t)}}]),e}();(0,i.Z)(l,"CONSTANTS",{SATELLITE_API_ERROR_UNDEFINED:"SatelliteApi Error: No analytics api defined."});var c={test:"value",getValues:function(){var e,t,n,a,r,i,o,l,c,s,u,h,d,f,p,v,E,O,g,y,_=window,T=_.mbNafta,b=_.mbDSDataLayer;return{site:{country:null===(e=T.pageData)||void 0===e?void 0:e.country,currencyCode:null===(t=T.pageData)||void 0===t?void 0:t.currency,isProduction:null===(n=b.src)||void 0===n?void 0:n.isProduction,language:null===(a=T.pageData)||void 0===a?void 0:a.language},page:{location:window.location,type:null===(r=b.src)||void 0===r?void 0:r.type,variantInfo:{isVariant:null===(i=T.pageData)||void 0===i?void 0:i.isVariant,isOnDisplay:null===(o=T.pageData)||void 0===o?void 0:o.isOnDisplay,isOnDisplayDis:null===(l=T.pageData)||void 0===l?void 0:l.isOnDisplayDis,isDealer:null===(c=T.pageData)||void 0===c?void 0:c.isDealer,isWheelstand:null===(s=T.pageData)||void 0===s?void 0:s.isWheelstand,isLargeFormat:null===(u=T.pageData)||void 0===u?void 0:u.isLargeFormat,isPopup:null===(h=T.pageData)||void 0===h?void 0:h.isPopup,isDDTVariant:null===(d=T.pageData)||void 0===d?void 0:d.isDDTVariant},vehicle:{"build-your-own":null===(f=T.pageData)||void 0===f||null===(p=f.byo)||void 0===p?void 0:p.config.vehicle,"byo-model-line-selector":null===(v=T.pageData)||void 0===v||null===(E=v.modelLines)||void 0===E?void 0:E.config.vehicle,"model-page":null===(O=T.pageData)||void 0===O?void 0:O.vehicle,"class-page":null===(g=T.pageData)||void 0===g?void 0:g.vehicle,default:null===(y=T.pageData)||void 0===y?void 0:y.vehicle}}}}},s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:null,provider:null};if((0,a.Z)(this,e),this.api={logEvent:o.ZT},(t.type||t)===e.CONSTANTS.SATELLITE){t.provider||console.warn("Pass window._satellite as provider argument.");var n=(window||{})._satellite;try{this.api=new l(t.provider||n)}catch(e){console.error(e)}}else console.info("No analytics type defined")}return(0,r.Z)(e,[{key:"logEvent",value:function(e,t){this.api.logEvent(e,t)}},{key:"logScreenSize",value:function(){this.logEvent("screenSize",{screenSize:o.sp.getCurrentState()}),console.info("screenSize",o.sp.getCurrentState())}},{key:"getMappedValue",value:function(){return c.getValues()}},{key:"get",value:function(e){for(var t=null==e?void 0:e.split("."),n=this.getMappedValue();t.length;){var a;if(!(n=null===(a=n)||void 0===a?void 0:a[t.shift()]))break}return n}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.split("."),a=n.pop(),r=window.mbDSDataLayer;if(!r)return console.warn("'mbDSDataLayer' not found"),!1;for(;n.length;){var i,l=n.shift();if(null!==(i=r)&&void 0!==i&&i[l]||(r[l]={}),r=r[l],!o.Gu.isObject(r))return console.info("Target node '".concat(l,"' is not an object.")),!1}return r[a]=t,r[a]}}]),e}();(0,i.Z)(s,"CONSTANTS",{SATELLITE:"satellite"})},98248:function(e,t,n){var a=n(15671),r=n(43144),i=n(4942),o=n(61156),l=n(48218),c=n(70151);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var u="UNKNOWN",h=!0,d=window.mbNafta.applicationProperties.profileServiceLocale,f={loggedState:u,partialLoggedState:u,accountData:{}},p=null,v=function(){function e(){if((0,a.Z)(this,e),p)return p;p=this}return(0,r.Z)(e,[{key:"getAuthState",value:function(){var e=this.isCookie(l.E9.PROFILE_INFO),t=this.isCookie(l.E9.QUICK_REGISTER_ID)&&this.isCookie(l.E9.QUICK_REGISTER_EMAIL),n=e?this.parseProfileInfoCookie():{},a=t?this.parseQuickRegisterCookies():{};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},f,{loggedState:!!e&&h,partialLoggedState:!!t&&h,accountData:e?n:a})}},{key:"createAuthRedirectCookie",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||window.location.pathname+window.location.search+window.location.hash;(-1!==t.indexOf(window.location.pathname)||e)&&o.pR.setCookie({name:l.E9.AUTH_REDIRECT,value:t})}},{key:"authRedirect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.createAuthRedirectCookie(t),this.goToAuthPage(e)}},{key:"isCookie",value:function(e){return-1!==document.cookie.indexOf("".concat(e,"="))}},{key:"getCookieValue",value:function(e){return document.cookie.substring(document.cookie.indexOf("".concat(e,"="))).split(";")[0].split("".concat(e,"="))[1].replace(/['"]+/g,"")}},{key:"parseProfileInfoCookie",value:function(){var e=this.getCookieValue(l.E9.PROFILE_INFO).split(","),t={};return e.forEach((function(e){var n=e.split("|");t[n[0]]=decodeURIComponent(n[1])})),t}},{key:"parseQuickRegisterCookies",value:function(){return{id:this.getCookieValue(l.E9.QUICK_REGISTER_ID),email:this.getCookieValue(l.E9.QUICK_REGISTER_EMAIL),firstName:this.getCookieValue(l.E9.QUICK_REGISTER_FIRST_NAME)}}},{key:"getProfile",value:function(){return this.getAuthState()}},{key:"parseAuthProfile",value:function(e){var t=e.result,n=t.response.result.profile,a=t.accountIdentifier,r=t.changeEmailUrl,i=t.changePasswordUrl,o=t.editMobileURL,l=t.preferredDealerId,c=t.suggestedDealer;if(!n)throw new Error("Error parsing AuthProfile");return n.isMobileRegistered="MOBILE"===a,n.urls={changeEmailUrl:r,changePasswordUrl:i,editMobileURL:o},n.defaultPhone=n.mobilePhoneNumber||n.landlinePhone||n.primaryPhoneNumber||n.secondaryPhoneNumber,n.suggestedDealer=c,n.preferredDealerId=n.preferredDealerId||l,n}},{key:"getAuthProfile",value:function(){return(0,c.L)("".concat(d,"/secure/profile")).then(this.parseAuthProfile.bind(this))}},{key:"isLoggedIn",value:function(){return this.getAuthState().loggedState===h}},{key:"isPartiallyLoggedIn",value:function(){return this.getAuthState().partialLoggedState===h}},{key:"goToAuthPage",value:function(e){var t="".concat(d,"/ciam/authenticate/web?type=").concat(e);fetch(t,{headers:{"Content-Type":"application/json","Referrer-Policy":"origin"},method:"GET"}).then((function(e){return e.json()})).then((function(e){return window.location.replace(e.result)})).catch((function(e){throw console.warn(e),e}))}},{key:"getLoginToken",value:function(){return o.tO.localStorage.read(l.I.LOGIN_TOKEN)}}]),e}();(0,i.Z)(v,"AUTH_PAGES",{REGISTRATION:"registration",LOGIN:"login",LOGOUT:"logout"}),t.Z=v},70151:function(e,t,n){n.d(t,{L:function(){return c}});var a=n(4942),r=n(98248);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={body:null,headers:{"Content-type":"application/json","Referrer-Policy":"origin",Referer:window.location.href},method:"POST",shouldLogout:!0};function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new r.Z,a=n.getLoginToken(),i=o({},l,{},t);return fetch(e,{headers:o({},i.headers,{Authorization:"Bearer ".concat(a)}),body:i.body?JSON.stringify(i.body):null,method:i.method}).then((function(e){return 403===e.status?(i.shouldLogout&&n.authRedirect(r.Z.AUTH_PAGES.LOGOUT,"".concat(window.mbNafta.pageData.basePath,"/home")),e):e.json()})).catch((function(e){throw console.warn(e),e}))}t.Z={authenticationFetch:c}},52597:function(e,t,n){n.d(t,{Sd:function(){return I},$S:function(){return a.Z},Rh:function(){return r.Z}});var a=n(98248),r=n(70151),i=n(15671),o=n(43144),l=n(4942),c=n(48218),s=n(61156),u=n(30168);function h(){var e=(0,u.Z)(['\n    <a href="#" class="top-nav__link top-nav__link_parent top-nav__link_account"\n       data-menu-item="account">\n        <span class="top-nav__label">\n            ','\n        </span>\n    </a>\n    <div class="top-nav__account-links-container top-nav__sub-nav top-nav__level"\n         data-analytics-container="{ \'blade\': \'header-vehicles\' }">\n        <a href="#" class="top-nav__link_back-btn">\n            ','\n        </a>\n        <ul class="top-nav__account-links-container--account-links-active">\n            <li class="top-nav__item mbs-auth-nav mbs-auth-nav--greeting">\n\n            </li>\n        </ul>\n    </div>']);return h=function(){return e},e}function d(){var e=(0,u.Z)(['\n    <a href="#" class="top-nav__link top-nav__link_parent top-nav__link_account"\n       data-menu-item="account">\n        <span class="top-nav__label">\n            ','\n        </span>\n    </a>\n    <div class="top-nav__account-links-container top-nav__sub-nav top-nav__level"\n         data-analytics-container="{ \'blade\': \'header-vehicles\' }">\n        <a href="#" class="top-nav__link_back-btn">\n            ','\n        </a>\n        <ul class="top-nav__account-links-container--account-links-active">\n            <li class="top-nav__item mbs-auth-nav mbs-auth-nav--login">\n                <button class="top-nav__link" data-analytics-trigger="account-login">','</button>\n            </li>\n            <li class="top-nav__item mbs-auth-nav mbs-auth-nav--register">\n                <button class="top-nav__link" data-analytics-trigger="account-register">',"</button>\n            </li>\n        </ul>\n    </div>"]);return d=function(){return e},e}function f(){var e=(0,u.Z)(['\n<button class="mbs-auth-nav__cta top-nav__link" data-analytics-trigger="account-open">\n    <span class="mbs-auth-nav__name"></span>\n</button>\n<div class="mbs-auth-nav__dropdown" aria-haspopup="true" aria-expanded="false" data-analytics-container="{blade: \'header-user-subnav\'}">\n    <ul class="mbs-auth-nav__links-container">\n\n    </ul>\n</div>']);return f=function(){return e},e}function p(){var e=(0,u.Z)(['\n    <li class="mbs-auth-nav ','">\n        <a href="','" class="','  " target="','" rel="noopener" data-analytics-trigger="cta">',"</a>\n    </li>"]);return p=function(){return e},e}var v=function(e,t,n){return(0,s.e2)(p(),t?"mbs-auth-nav--small-link top-nav__item":"mbs-auth-nav--large-link",e.linkDest,t?"top-nav__link":"link link_in-text",n,e.linkText)};function E(){var e=(0,u.Z)(['\n    <li class="mbs-auth-nav ','">\n        <button class="mbs-auth-nav__button ','" data-analytics-trigger="cta">',"</button>\n    </li>"]);return E=function(){return e},e}var O=function(e,t){return(0,s.e2)(E(),t?"mbs-auth-nav--small-link top-nav__item":"mbs-auth-nav--large-link",t?"top-nav__link":"link link_in-text",e.linkText)},g={login:{title:"Log In",url:null,target:"_self"},register:{title:"Register",url:null,target:"_self"},logout:{url:null},localization:{hi:"Hi"},account:{title:"My Account"}};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T="mbs-auth-nav__dropdown--active",b="mbs-auth-nav__cta--active",A={links:{},profile:{},authentication:_({},g),onLogout:s.ZT},S=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;(0,i.Z)(this,e),this.container=t,this.config=_({},A,{},n),this.toggleDropdown=this.toggleDropdown.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this),this.dropdownOpen=!1,this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.render(),this.cacheDOM(),this.renderLinks(),this.showGreeting(),s.ZP.onReady(this.attachEvents.bind(this))}},{key:"showGreeting",value:function(){var e=this.config.profile.name;e.length>15&&(e="".concat(e.substring(0,15),"...")),this.nameElm.innerHTML="".concat(this.config.authentication.localization.hi," ").concat(e)}},{key:"cacheDOM",value:function(){this.element=this.container.querySelector(".".concat("mbs-auth-nav__dropdown")),this.linksElm=this.container.querySelector(".".concat("mbs-auth-nav__links-container")),this.nameElm=this.container.querySelector(".".concat("mbs-auth-nav__name")),this.cta=this.container.querySelector(".".concat("mbs-auth-nav__cta"))}},{key:"attachEvents",value:function(){this.clickHandler=new s.Lp(this.cta,this.toggleDropdown,this.close,{ignoreElems:this.element}),this.logOutCta.addEventListener(c.FP.CLICK,this.config.onLogout)}},{key:"detachEvents",value:function(){this.clickHandler.destroy(),this.clickHandler=null,this.logOutCta.removeEventListener(c.FP.CLICK,this.config.onLogout)}},{key:"toggleDropdown",value:function(){this.dropdownOpen?this.close():this.open()}},{key:"open",value:function(){this.element.classList.add(T),this.cta.classList.add(b),this.element.setAttribute("aria-expanded","true"),this.dropdownOpen=!0}},{key:"close",value:function(){this.element.classList.remove(T),this.cta.classList.remove(b),this.element.setAttribute("aria-expanded","false"),this.dropdownOpen=!1}},{key:"render",value:function(){this.container.appendChild((0,s.e2)(f())({getNode:!0}))}},{key:"renderLinks",value:function(){var e=this;this.config.links.forEach((function(t){var n;if(n=-1!==t.linkText.toLowerCase().indexOf("mercedes me")?"_blank":"_self",-1!==t.linkText.toLowerCase().indexOf("log out")){var a=O(t,!1)({getNode:!0});e.linksElm.appendChild(a),e.logOutCta=a.querySelector(".".concat("mbs-auth-nav__button"))}else{var r=v(t,!1,n)({getNode:!0});e.linksElm.appendChild(r)}}))}},{key:"destroy",value:function(){this.detachEvents(),this.cta.parentNode.removeChild(this.cta),this.element.parentNode.removeChild(this.element)}}]),e}();function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={links:{},authentication:R({},g),onLogout:s.ZT},k=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;(0,i.Z)(this,e),this.element=t,this.config=R({},L,{},n),this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.render(),this.cacheDOM(),s.ZP.onReady(this.attachEvents.bind(this))}},{key:"cacheDOM",value:function(){this.linksElm=document.querySelectorAll(".mbs-auth-nav--small-link")}},{key:"attachEvents",value:function(){this.logOutCta.addEventListener(c.FP.CLICK,this.config.onLogout)}},{key:"detachEvents",value:function(){this.logOutCta.removeEventListener(c.FP.CLICK,this.config.onLogout)}},{key:"render",value:function(){var e=this;this.config.links.forEach((function(t){var n;if(n=-1!==t.linkText.toLowerCase().indexOf("mercedes me")?"_blank":"_self",-1!==t.linkText.toLowerCase().indexOf("log out")){var a=O(t,!0)({getNode:!0});e.element.appendChild(a),e.logOutCta=a.querySelector(".".concat("mbs-auth-nav__button"))}else{var r=v(t,!0,n)({getNode:!0});e.element.appendChild(r)}}))}},{key:"destroy",value:function(){this.linksElm.forEach((function(e){e.parentNode.removeChild(e)})),this.detachEvents()}}]),e}();function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C="top-nav__link",w={authentication:P({},g)},I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;(0,i.Z)(this,e),this.element=document.querySelector(".".concat("mbs-auth-nav")),this.smallDevice=s.sp.getState().small,this.screenResize=this.screenResize.bind(this),this.profile=new a.Z,this.accountCookieData=this.profile.getProfile(),this.config=P({},w,{},t),this.logOutClickHandler=this.logOutClickHandler.bind(this),this.createTemplate(),this.render(),this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.update(),this.attachEvents()}},{key:"createTemplate",value:function(){var e=this.config.authentication,t=e.login,n=e.register,a=e.account;this.accountCookieData.loggedState?this.template=function(e){return(0,s.e2)(h(),e.title,e.title)}(a)({getNode:!0}):this.template=function(e,t,n){return(0,s.e2)(d(),n.title,n.title,e.title,t.title)}(t,n,a)({getNode:!0})}},{key:"cacheDOM",value:function(){this.drawerContainer=this.element.querySelector(".".concat("top-nav__account-links-container--account-links-active")),this.dropdownContainer=this.element.querySelector(".".concat("mbs-auth-nav--greeting")),this.accountCookieData.loggedState||(this.loginLink=this.template.querySelector(".".concat("mbs-auth-nav--login")).querySelector(".".concat(C)),this.registerLink=this.template.querySelector(".".concat("mbs-auth-nav--register")).querySelector(".".concat(C)))}},{key:"attachEvents",value:function(){s.sp.addResizeListener(this.screenResize),this.accountCookieData.loggedState||(this.loginLink.addEventListener(c.FP.CLICK,this.authLinkClickHandler.bind(this,a.Z.AUTH_PAGES.LOGIN)),this.registerLink.addEventListener(c.FP.CLICK,this.authLinkClickHandler.bind(this,a.Z.AUTH_PAGES.REGISTRATION)))}},{key:"detachEvents",value:function(){s.sp.removeResizeListener(this.screenResize),this.accountCookieData.loggedState||(this.loginLink.removeEventListener(c.FP.CLICK,this.authLinkClickHandler),this.registerLink.removeEventListener(c.FP.CLICK,this.authLinkClickHandler))}},{key:"authLinkClickHandler",value:function(e,t){t.preventDefault(),this.profile.authRedirect(e)}},{key:"logOutClickHandler",value:function(e){e.preventDefault(),this.profile.authRedirect(a.Z.AUTH_PAGES.LOGOUT)}},{key:"screenResize",value:function(){this.smallDevice=s.sp.getState().small,this.update()}},{key:"createNav",value:function(){var e=this.config.authentication.account;this.smallDevice&&!this.smallNav?(this.smallNav=new k(this.drawerContainer,{links:e.links,authentication:this.config.authentication,onLogout:this.logOutClickHandler}),this.largeNav&&(this.largeNav.destroy(),delete this.largeNav)):this.smallDevice||this.largeNav||(this.largeNav=new S(this.dropdownContainer,{links:e.links,profile:this.accountCookieData.accountData,authentication:this.config.authentication,onLogout:this.logOutClickHandler}),this.smallNav&&(this.smallNav.destroy(),delete this.smallNav))}},{key:"update",value:function(){this.accountCookieData.loggedState&&this.createNav()}},{key:"render",value:function(){this.element.appendChild(this.template)}},{key:"destroy",value:function(){this.detachEvents()}}]),e}()},70816:function(e,t,n){n.d(t,{g:function(){return v},s:function(){return z}});var a=n(42982),r=n(15671),i=n(43144),o=n(4942),l=n(61156);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=null,h="MB_USER_PROFILE",d={preferredDealer:null,lastLocation:{}},f=function(){function e(){if((0,r.Z)(this,e),u)return u;u=this,this.data=null,this.create()}return(0,i.Z)(e,[{key:"create",value:function(){var e=new Date;this.data=l.tO.localStorage.read(h),this.data||(this.data=d,l.tO.localStorage.create(h,this.data,new Date(e.setDate(e.getDate()+60))))}},{key:"normalizePreferredDealer",value:function(e){return["contact","isDealership","marketCode","regionCode"].map(Object.hasOwnProperty.bind(e)).some((function(e){return!e}))?(this.setPreferredDealer(null),null):e}},{key:"setPreferredDealer",value:function(e){this.data=s({},this.data,{preferredDealer:e}),l.tO.localStorage.update(h,this.data)}},{key:"getPreferredDealer",value:function(){return this.data.preferredDealer?this.normalizePreferredDealer(this.data.preferredDealer):this.data.preferredDealer}},{key:"setLastLocation",value:function(e){this.data=s({},this.data,{lastLocation:e}),l.tO.localStorage.update(h,this.data)}},{key:"getLastLocation",value:function(){return this.data.lastLocation||d.lastLocation}},{key:"get",value:function(){return this.data}}]),e}(),p=n(86709),v={TYPE:{LOCAL_STORAGE:"local storage"},STORAGE:{LAST_SEARCHED_LOCATION_LOCALSTORAGE:"LAST_SEARCHED_LOCATION",LAST_SELECTED_DEALER_LOCALSTORAGE:"LAST_SELECTED_DEALER",LAST_LOCATION_PROFILE_LS:"lastLocation",PREFERRED_DEALER_LOCALSTORAGE:"PREFERRED_DEALER",USER_PROFILE_LOCALSTORAGE:"MB_USER_PROFILE"},TARGET_OFFER_DATA:{DEALER_ID:"dealer_id",GEO_LOCATION_ZIP:"profile.geolocation.zip",TARGET:"target",USER_ATTRIBUTE:"user.crs_attribute_1",USER_ATTRIBUTE_QA:"user.crs_attribute_1_qa"},PRIORITIZED_DATA_TYPES:{LAST_SEARCHED_LOCATION:"lastSearchedLocation",LAST_SELECTED_DEALER:"lastSelectedDealer",PREFERRED_DEALER:"preferredDealer",TARGET_DEALER_ID:"targetDealer",TARGET_GEO_ZIP:"geolocalization"}};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=Symbol("legacyUserProfile"),y=Symbol("dataObj"),_=Symbol("config"),T=Symbol("createDataObj"),b=Symbol("targetData"),A=Symbol("personalizationApiInstance"),S=Symbol("setPriorityList"),D=Symbol("getPreferredDealer"),R=Symbol("setPreferredDealer"),L=Symbol("getLastSearchedLocation"),k=Symbol("setLastSearchedLocation"),m=Symbol("getLastSelectedDealer"),P=Symbol("setLastSelectedDealer"),C=Symbol("getLegacyProperty"),w=Symbol("setLegacyProperty"),I=Symbol("removeDataItem"),N=Symbol("getUserPreferenceData"),j=Symbol("setUpDealerLocationPrioritization"),Z=Symbol("getTargetDealerId"),G=Symbol("getTargetGeolocationZip"),F=null,U=Symbol("singletonEnforcer"),x={data:null,receievedFrom:"",type:""},H={},z=function(){function e(t){if((0,r.Z)(this,e),t!==U)throw new Error("Singleton; do not instantiate");return this[g]=new f,this[y]=this[T](),this[_]=window.mbNafta.ns("applicationProperties").dealerLocationPrioritizationConfig||H,this[b]={},this[A]=null,l.Gu.isEmpty(this[_])&&console.info("Dealers & Locations Prioritization JSON not found"),this[j]()}return(0,i.Z)(e,null,[{key:"getInstance",value:function(){return F||(F=new e(U)),F}}]),(0,i.Z)(e,[{key:T,value:function(){return Object.keys(v.PRIORITIZED_DATA_TYPES).reduce((function(e,t){return O({},e,(0,o.Z)({},v.PRIORITIZED_DATA_TYPES[t],null))}),{})}},{key:j,value:function(){var e=this;return new Promise((function(t){try{e[A]=p.Z.getInstance(p.Z.CONSTANTS.TARGET),e[A].loadPersonalization((function(){e[N](),t(e)}))}catch(n){console.warn("Personalization API no instantiated: ",n),e[A]=null,t(e)}}))}},{key:S,value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this[_]&&this[_][e]&&this[_][e][t]||[]}},{key:D,value:function(){var e=v.PRIORITIZED_DATA_TYPES.PREFERRED_DEALER,t=v.STORAGE.PREFERRED_DEALER_LOCALSTORAGE,n=l.tO.localStorage.read(t)||null,a=this[C](e),r=null;return n?r={type:"dealer",data:n,receievedFrom:e}:a&&(this[R](a),r={type:"dealer",data:a,receievedFrom:e}),this[y][e]=r,r}},{key:R,value:function(e,t){var n=v.PRIORITIZED_DATA_TYPES.PREFERRED_DEALER,a=v.STORAGE.PREFERRED_DEALER_LOCALSTORAGE,r=l.tO.localStorage.read(a)||null;return t&&this[w](n,e),r?l.tO.localStorage.update(a,e):l.tO.localStorage.create(a,e),this[y][n]={type:"dealer",data:e,receievedFrom:n},this[y][n]}},{key:L,value:function(){var e=v.PRIORITIZED_DATA_TYPES.LAST_SEARCHED_LOCATION,t=v.STORAGE,n=t.LAST_SEARCHED_LOCATION_LOCALSTORAGE,a=t.LAST_LOCATION_PROFILE_LS,r=l.tO.localStorage.read(n)||null,i=this[C](a),o=null;return r&&r.searchLocation?o={type:r.searchByType,data:r.searchLocation,receievedFrom:e}:i&&i.searchLocation&&(this[k](i.searchLocation,i.searchByType),o={type:i.searchByType,data:i.searchLocation,receievedFrom:e}),this[y][e]=o,o}},{key:k,value:function(e,t,n){var a=v.PRIORITIZED_DATA_TYPES.LAST_SEARCHED_LOCATION,r=v.STORAGE.LAST_SEARCHED_LOCATION_LOCALSTORAGE,i=l.tO.localStorage.read(r)||null,o=new Date,c=new Date(o.setDate(o.getDate()+7)),s={searchLocation:e,searchByType:t};return n&&this[w](a,s),i?l.tO.localStorage.update(r,s):l.tO.localStorage.create(r,s,c),this[y][a]={type:t,data:e,receievedFrom:a},this[y][a]}},{key:m,value:function(){var e=v.PRIORITIZED_DATA_TYPES.LAST_SELECTED_DEALER,t=v.STORAGE.LAST_SELECTED_DEALER_LOCALSTORAGE,n=l.tO.localStorage.read(t)||null;if(n&&n.dealerId){var a={type:"dealer",data:n,receievedFrom:e};return this[y][e]=a,a}return null}},{key:P,value:function(e){var t=v.STORAGE.LAST_SELECTED_DEALER_LOCALSTORAGE,n=v.PRIORITIZED_DATA_TYPES.LAST_SELECTED_DEALER,a=l.tO.localStorage.read(t)||null,r=new Date,i=new Date(r.setDate(r.getDate()+7));return a?l.tO.localStorage.update(t,e):l.tO.localStorage.create(t,e,i),this[y][n]={type:"dealer",data:e,receievedFrom:n},this[y][n]}},{key:I,value:function(e,t){var n=v.STORAGE,a=v.PRIORITIZED_DATA_TYPES;switch(t&&this[w](e,null),e){case a.LAST_SELECTED_DEALER:l.tO.localStorage.delete(n.LAST_SELECTED_DEALER_LOCALSTORAGE);break;case a.LAST_SEARCHED_LOCATION:l.tO.localStorage.delete(n.LAST_SEARCHED_LOCATION_LOCALSTORAGE);break;case a.PREFERRED_DEALER:l.tO.localStorage.delete(n.PREFERRED_DEALER_LOCALSTORAGE)}}},{key:C,value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.STORAGE.USER_PROFILE_LOCALSTORAGE;return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.TYPE.LOCAL_STORAGE)===v.TYPE.LOCAL_STORAGE&&(t=l.tO.localStorage.read(n)||null)&&t[e]?t[e]:null}},{key:w,value:function(e,t){var n=v.PRIORITIZED_DATA_TYPES;switch(e){case n.LAST_SEARCHED_LOCATION:this[g].setLastLocation(t);break;case n.PREFERRED_DEALER:this[g].setPreferredDealer(t)}}},{key:N,value:function(){if(!this[A]&&!("extractDataByProperty"in this[A]))return{};if(Object.keys(this[b]).length)return this[b];var e=v.TARGET_OFFER_DATA,t=e.GEO_LOCATION_ZIP,n=e.USER_ATTRIBUTE,a=e.USER_ATTRIBUTE_QA,r=this[A].extractDataByProperty(n),i=this[A].extractDataByProperty(a),o=this[A].extractDataByProperty(t);return 0!==Object.entries(r).length&&(this[b]=O({},r)),0!==Object.entries(i).length&&(this[b][n]=i[a]),0!==Object.entries(o).length&&(this[b]=O({},this[b],{},o)),this[b]}},{key:Z,value:function(){var e=v.TARGET_OFFER_DATA,t=e.USER_ATTRIBUTE,n=e.DEALER_ID,a=v.PRIORITIZED_DATA_TYPES.TARGET_DEALER_ID,r=this[b]&&this[b][t];if(r){var i=(0,l.Hx)(r)[n]||null;if(i){var o={data:i,receievedFrom:a,type:"dealerId"};return this[y][a]=o,o}}return null}},{key:G,value:function(){var e=v.TARGET_OFFER_DATA.GEO_LOCATION_ZIP,t=v.PRIORITIZED_DATA_TYPES.TARGET_GEO_ZIP,n=this[b]&&this[b][e];if(n){var a={data:n,receievedFrom:t,type:"zip"};return this[y][t]=a,a}return null}},{key:"get",value:function(e){var t,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=v.PRIORITIZED_DATA_TYPES;return this[S](e,a).find((function(e){switch(e){case r.PREFERRED_DEALER:t=n[D]();break;case r.LAST_SEARCHED_LOCATION:t=n[L]();break;case r.LAST_SELECTED_DEALER:t=n[m]();break;case r.TARGET_DEALER_ID:t=n[Z]();break;case r.TARGET_GEO_ZIP:t=n[G]()}return t})),t||x}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(t)||(t=[t]),null!==t[0]){var r=v.PRIORITIZED_DATA_TYPES;switch(e){case r.PREFERRED_DEALER:this[R].apply(this,(0,a.Z)(t).concat([n]));break;case r.LAST_SELECTED_DEALER:this[P].apply(this,(0,a.Z)(t));break;case r.LAST_SEARCHED_LOCATION:this[k].apply(this,(0,a.Z)(t).concat([n]))}}else this[I](e,n)}}]),e}();(0,o.Z)(z,"DATA_TYPES",v.PRIORITIZED_DATA_TYPES)},86709:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(15671),r=n(43144),i=n(4942),o=n(71002),l=n(61156),c=function(){function e(t){if((0,a.Z)(this,e),!t)throw new Error(e.CONSTANTS.ERROR_UNDEFINED);if(t!==window.adobe.target)throw new Error(e.CONSTANTS.ERROR_NOT_EQUAL);this.api=t,this.mbox=void 0,this.getCampaignOffer=this.getCampaignOfferFactory();var n=null;this.getOffers=function(){return n},this.setOffers=function(e){n=e}}return(0,r.Z)(e,[{key:"checkMBox",value:function(){return this.mbox=window.mbNafta.ns("personalization","target").mbox,!!this.mbox}},{key:"extractDataByProperty",value:function(t,n){if(!this.getOffers()||!e.CONSTANTS.ACTION||!t)return{};var a={},r=this.getOffers().filter((function(t){return t.action===e.CONSTANTS.ACTION}));return r.length?(r.forEach((function(e){e.content&&e.content.length&&e.content.forEach((function(e){return e[t]&&(n||(a[t]&&"object"===(0,o.Z)(a[t])?a[t]=[a[t],e[t]].flat():a[t]=e[t]),e[t]===n&&(a[n]&&"object"===(0,o.Z)(a[n])?a[n]=[a[n],e].flat():a[n]=e)),null}))})),a):{}}},{key:"getCampaignOfferFactory",value:function(){return window.adobe&&window.adobe.target&&window.adobe.target.getOffer?window.adobe.target.getOffer:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:l.ZT}).error(501,"Adobe Target Library Not Available")}}},{key:"loadPersonalization",value:function(e){var t=this,n=this.checkMBox.bind(this);return(0,l.MV)(n,2e3,150).then((function(){t.getCampaignOffer({mbox:t.mbox,success:function(n){t.setOffers(n||{}),e(n)},error:function(t,n){console.warn("TargetApi.loadPersonalization:getCampaignOffer",t,n),e()}})})).catch((function(t){console.warn("TargetApi.loadPersonalization:checkReadyState",t),e()}))}}]),e}();function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,i.Z)(c,"CONSTANTS",{ACTION:"setJson",ERROR_NOT_EQUAL:"TargetApi: This api requires the target provider.",ERROR_UNDEFINED:"TargetApi: Must pass personalization api to constructor."});var h=Symbol("singletonEnforcer"),d={},f=function(){function e(t,n){if((0,a.Z)(this,e),n!==h)throw new Error("Singleton; do not instantiate");if(t===e.CONSTANTS.TARGET){if(window.adobe=window.adobe||{},void 0===window.adobe.target)throw new Error(e.CONSTANTS.ERROR_TARGET_UNDEFINED);this.api=new c(window.adobe.target)}else console.error(e.CONSTANTS.ERROR_NO_PROVIDER,t);return this.callbackList=[],this}return(0,r.Z)(e,null,[{key:"getInstance",value:function(t){return d[t]&&t||(d[t]=new e(t,h)),d[t]}}]),(0,r.Z)(e,[{key:"extractDataByProperty",value:function(e,t){return this.api&&this.api.extractDataByProperty&&this.api.extractDataByProperty(e,t)}},{key:"getTargetModifiers",value:function(t){if(!this.extractDataByProperty)return{};var n={},a=this.extractDataByProperty(e.CONSTANTS.COMPONENT,t);return Object.keys(a).forEach((function(e){a[e].length?a[e].forEach((function(e){e.modifiers&&e.modifiers.length&&(n=u({},n,{},e.modifiers[0]))})):a[e].modifiers&&a[e].modifiers.length&&(n=u({},n,{},a[e].modifiers[0]))})),(0,i.Z)({},t,n)}},{key:"getOffers",value:function(){return this.api&&this.api.getOffers&&this.api.getOffers()}},{key:"loadPersonalization",value:function(e){return this.api&&this.api.loadPersonalization&&!this.getOffers()?(this.loadingResults||(this.loadingResults=this.api.loadPersonalization(this.callCallbackMethods.bind(this))),this.callbackList.push(e),this.loadingResult):e()}},{key:"callCallbackMethods",value:function(){this.callbackList.forEach((function(e){return e()}))}},{key:"setOffers",value:function(e){return this.api&&this.api.setOffers&&this.api.setOffers(e)}}]),e}();(0,i.Z)(f,"CONSTANTS",{COMPONENT:"component",TARGET:"target",ERROR_NO_PROVIDER:"PersonalizationApi: No personalization provider set: type:",ERROR_TARGET_UNDEFINED:"PersonalizationApi Error: target not defined. Will not instantiate TargetApi."});var p=f},30907:function(e,t,n){function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.d(t,{Z:function(){return a}})},42982:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(30907),r=n(40181);function i(e){return function(e){if(Array.isArray(e))return(0,a.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},40181:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(30907);function r(e,t){if(e){if("string"==typeof e)return(0,a.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,a.Z)(e,t):void 0}}}},function(e){e.O(0,[2830,4569,1156],(function(){return 22157,e(e.s=22157)})),e.O()}]);
//# sourceMappingURL=analytics.js.map