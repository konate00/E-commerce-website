"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[7214],{17214:function(e,t,i){i.d(t,{Z:function(){return le}});var a=i(15671),n=i(43144),r=i(48218),o=i(61156),s=i(82051),l=i(83224),c=i(30168);function u(){var e=(0,c.Z)(['\n    <picture class="model-page-hero__picture">\n        <source media="(max-width: 767px)" srcset="','">\n        <source media="(min-width: 768px)" srcset="','">\n    </picture>\n']);return u=function(){return e},e}var h=function(){function e(){(0,a.Z)(this,e),this.init()}return(0,n.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.attachEvents(),this.renderLoader(),this.vehicleData=window.mbNafta.ns("pageData").vehicle,this.imgDimensions=null,this.modelHeroVehiclePictureElms=null,this.mediaServerApi=s.W.getInstance(),this.getVehicleImages()}},{key:"cacheDOM",value:function(){this.modelHeroVehicleElm=document.querySelector(".".concat("model-page-hero__vehicle"))}},{key:"attachEvents",value:function(){var e=this;o.Jw.addEventListener(r.fD.UPDATE_EXTERIOR_COLOR,(function(t){e.onExteriorColorUpdate(t)}))}},{key:"onExteriorColorUpdate",value:function(e){e.detail.optionId&&(this.vehicleData.options.exterior.PAINT[0].id=e.detail.optionId,this.renderLoader(),this.getVehicleImages())}},{key:"renderLoader",value:function(){this.loader=new l.T,o.jG.append(this.loader.render(),this.modelHeroVehicleElm)}},{key:"getVehicleImages",value:function(){var e=this;this.mediaServerApi.getBuildImage(this.vehicleData,{view:s.W.VIEW_TYPES.EXTERIOR,pov:s.W.POV_TYPES.FRONT,presetCategory:s.W.PRESET_CATEGORIES.MODEL}).then((function(t){e.getMediaServerType(),e.preloadImages(t.respObj)}))}},{key:"getMediaServerType",value:function(){var e=this;this.mediaServerApi.getMediaServerType({year:this.vehicleData.year,className:this.vehicleData.class,model:this.vehicleData.model}).then((function(t){t===s.W.MEDIA_SERVER_TYPES.BBD&&e.modelHeroVehicleElm.classList.add("model-page-hero__vehicle--bbd")}))}},{key:"preloadImages",value:function(e){var t=this,i=new Image;i.onload=function(){t.imgDimensions={width:i.width,height:i.height},i.onload=null,i.classList.add("model-page-hero__image"),i.setAttribute("alt",t.vehicleData.meta.altTag),t.renderVehicle(e,i)},i.src=o.sp.getState().small?e.small.retina:e.large.retina}},{key:"renderVehicle",value:function(e,t){var i,a,n=null!=this.modelHeroVehiclePictureElms;o.jG.append((i=e.large.retina,a=e.small.retina,(0,o.e2)(u(),a||i,i||a))({getNode:!0}),this.modelHeroVehicleElm),this.modelHeroVehiclePictureElms=Array.from(this.modelHeroVehicleElm.querySelectorAll(".".concat("model-page-hero__picture"))),o.jG.append(t,this.modelHeroVehiclePictureElms[this.modelHeroVehiclePictureElms.length-1]),this.loader.destroy(),n&&this.modelHeroVehicleElm.removeChild(this.modelHeroVehiclePictureElms.shift())}}]),e}(),d=function(){function e(){(0,a.Z)(this,e),this.modelHero=null,this.createModelHero()}return(0,n.Z)(e,[{key:"createModelHero",value:function(){this.modelHero=new h}}]),e}(),m=i(42982);function f(){var e=(0,c.Z)(['\n    <img src="','" alt="','" class="model-selector__image">\n']);return f=function(){return e},e}var p="model-selector",v="model-selector--open",b="no-scroll",g=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.imagesLoad=!1,this.init()}return(0,n.Z)(e,[{key:"init",value:function(){this.currentScreenState=o.sp.getState(),this.isOpen=!1,this.cacheDOM(),this.attachEvents(),this.mediaServerApi=s.W.getInstance(),this.tabbables.disableTabbables(),this.tabOutsideHandler=new o.yM(this.modelSelectorElm,{onBlur:this.closeDrawer.bind(this)})}},{key:"cacheDOM",value:function(){this.bodyElm=document.querySelector("body"),this.htmlElm=document.querySelector("html"),this.modelSelectorElm=document.querySelector(".".concat(p)),this.modelSelectorItemsElm=document.querySelectorAll(".".concat("model-selector__menu-item")),this.modelSelectorToggleElm=document.querySelector(".".concat("model-selector__toggle")),this.modelSelectorClickGuardElm=document.querySelector(".".concat("model-selector__click-guard")),this.modelSelectorMenusetElm=document.querySelector(".".concat("model-selector__menuset")),this.modelSelectorMenusetWrapperElm=document.querySelector(".".concat("model-selector__menuset-wrapper")),this.disclaimerMarkersElm=Array.from(this.modelSelectorMenusetElm.querySelectorAll(".".concat("disclaimer__marker"))),this.topNavElm=window.mbNafta.ns("pageData").globalHeader?document.querySelector(".".concat("top-bar")):document.querySelector("#".concat("top-nav")),this.tabbables=new o.cs(this.modelSelectorMenusetElm)}},{key:"attachEvents",value:function(){var e=this;o.sp.addResizeListener(this.onScreenResize.bind(this),150),this.modelSelectorToggleElm.addEventListener(r.FP.CLICK,this.onToggleClick.bind(this)),this.disclaimerMarkersElm.forEach((function(t){t.addEventListener(r.FP.CLICK,e.onDisclaimerClick.bind(e))})),o.Jw.addEventListener(r.fD.GLOBAL_NAV_MENU_OPENED,this.closeDrawer.bind(this))}},{key:"getVehiclesImages",value:function(){var e=this;(0,m.Z)(this.modelSelectorItemsElm).forEach((function(t){var i={bodyStyle:window.mbNafta.ns("pageData").vehicle.bodyStyle,class:t.getAttribute("data-class"),model:t.getAttribute("data-model"),vehicleName:"",year:t.getAttribute("data-year"),options:{exterior:{PAINT:[{id:t.getAttribute("data-exterior-paint")}]}}};e.mediaServerApi.getBuildImage(i,{view:s.W.VIEW_TYPES.EXTERIOR_THUMB,pov:s.W.POV_TYPES.FRONT,presetCategory:s.W.PRESET_CATEGORIES.MODEL}).then((function(i){e.getMediaServerType(t),e.renderVehicle(i.respObj,t)})).catch((function(e){window.console.info("ModelSelector catch msg = ",e)}))}))}},{key:"getMediaServerType",value:function(e){this.mediaServerApi.getMediaServerType({year:e.getAttribute("data-year"),className:e.getAttribute("data-class"),model:e.getAttribute("data-model")}).then((function(t){t===s.W.MEDIA_SERVER_TYPES.BBD&&e.classList.add("model-selector__menu-item--bbd")}))}},{key:"renderVehicle",value:function(e,t){var i,a,n=(i=e.large[o.sp.isRetina()?"retina":"regular"],a=t.getAttribute("data-model"),(0,o.e2)(f(),i,a))({getNode:!0});n.onload=this.setDrawerHeight.bind(this),o.jG.insert(n,t.querySelector(".".concat("model-selector__image-wrapper")))}},{key:"onScreenResize",value:function(e){this.isOpen&&!o.Gu.objectsAreEqual(e,this.currentScreenState)?(this.currentScreenState=e,this.setDrawerHeight()):this.currentScreenState=e}},{key:"onKeydownHandler",value:function(e){this.isOpen&&e.keyCode===r.sd.ESC&&(e.preventDefault(),this.closeDrawer(),this.modelSelectorToggleElm.focus())}},{key:"onToggleClick",value:function(){this.isOpen?this.closeDrawer():this.openDrawer()}},{key:"onDisclaimerClick",value:function(){this.closeDrawer()}},{key:"openDrawer",value:function(){this.bodyElm.classList.add(b),this.htmlElm.classList.add(b),this.modelSelectorElm.classList.remove(p),this.modelSelectorElm.classList.add(v),this.setDrawerHeight(),!1===this.imagesLoad&&(this.getVehiclesImages(),this.imagesLoad=!0),this.isOpen=!0,this.tabbables.enableTabbables(),document.body.addEventListener(r.FP.KEYDOWN,this.onKeydownHandler.bind(this))}},{key:"closeDrawer",value:function(){this.bodyElm.classList.remove(b),this.htmlElm.classList.remove(b),this.modelSelectorElm.classList.add(p),this.modelSelectorElm.classList.remove(v),this.modelSelectorMenusetWrapperElm.style.height=null,this.modelSelectorMenusetElm.style.height=null,this.isOpen=!1,this.tabbables.disableTabbables(),document.body.removeEventListener(r.FP.KEYDOWN,this.onKeydownHandler)}},{key:"setDrawerHeight",value:function(){var e=this.modelSelectorElm.getBoundingClientRect();this.modelSelectorMenusetElm.style.height=null;var t=this.topNavElm?this.topNavElm.offsetHeight:0,i=Math.min(this.modelSelectorMenusetElm.getBoundingClientRect().height,window.innerHeight-(t+e.height));this.modelSelectorMenusetWrapperElm.style.height="".concat(i,"px"),this.modelSelectorMenusetElm.style.height="".concat(i,"px")}}]),e}(),y=function(){function e(){(0,a.Z)(this,e),this.modelSelector=null,this.createModelSelector()}return(0,n.Z)(e,[{key:"createModelSelector",value:function(){this.modelSelector=new g}}]),e}(),E=i(83189),w=i(14569),O="color-selector__colors__item-btn--selected",S="aria-checked",T=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.selectedColorSwatchElm=null,this.headerSwatchElm=null,this.headerSwatchContext=null,this.headerSwatchTransitionStep=0,this.carousel=null,this.init()}return(0,n.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.colorsElm.length>0&&(this.carousel=new E.A(this.element),this.attachEvents(),this.primeHeaderSwatch(),this.createColorCategoryToolTip())}},{key:"cacheDOM",value:function(){var e=this;this.selectedColorLabelElms=[].slice.call(this.element.querySelectorAll(".".concat("color-selector__colors__name"))).reduce((function(e,t){return e[t.dataset.colorCategory]=t,e}),{}),this.headerSwatchElm=this.element.querySelector(".".concat("color-selector__circle__img")),this.colorsElm=Array.from(this.element.querySelectorAll(".".concat("color-selector__colors__item-btn"))),this.colorsElm.forEach((function(t){t.classList.contains(O)&&(e.selectedColorSwatchElm=t)}))}},{key:"attachEvents",value:function(){var e=this;this.colorsElm.forEach((function(t){t.addEventListener(r.FP.CLICK,(function(){return e.changeSelectedColor(t)})),t.addEventListener(r.FP.MOUSEENTER,(function(){return e.setColorLabel(t)})),t.addEventListener(r.FP.MOUSELEAVE,(function(){return e.restoreSelectedColor()}))}))}},{key:"primeHeaderSwatch",value:function(){var e=this,t=this.selectedColorSwatchElm.querySelector("img");t.complete&&t.naturalWidth>0?(this.headerSwatchContext=this.headerSwatchElm.getContext("2d"),this.headerSwatchContext.drawImage(t,0,0)):setTimeout((function(){e.primeHeaderSwatch()}),20)}},{key:"changeSelectedColor",value:function(e){this.selectedColorSwatchElm=e,this.colorsElm.forEach((function(e){e.classList.remove(O),e.setAttribute(S,!1)})),this.selectedColorSwatchElm.classList.add(O),this.selectedColorSwatchElm.setAttribute(S,!0),this.setColorLabel(this.selectedColorSwatchElm),this.updateHeaderSwatch(),o.Jw.dispatchEvent(o.Jw.createCustomEvent(r.fD.UPDATE_EXTERIOR_COLOR,{detail:{optionId:this.selectedColorSwatchElm.dataset.optionId}}))}},{key:"updateHeaderSwatch",value:function(){var e=this;this.headerSwatchContext.globalAlpha=1/30*this.headerSwatchTransitionStep,this.headerSwatchContext.drawImage(this.selectedColorSwatchElm.querySelector("img"),0,0),this.headerSwatchTransitionStep+=1,this.headerSwatchTransitionStep<=30?setTimeout((function(){e.updateHeaderSwatch()}),10):this.headerSwatchTransitionStep=0}},{key:"restoreSelectedColor",value:function(){var e=this.element.querySelector(".".concat(O));this.setColorLabel(e)}},{key:"setColorLabel",value:function(e){var t=this;Object.keys(this.selectedColorLabelElms).forEach((function(i){t.selectedColorLabelElms[i].innerHTML=e.dataset.colorCategory===i?e.dataset.colorName:""}))}},{key:"createColorCategoryToolTip",value:function(){var e=this.element.querySelectorAll("[data-tool-tip]");e.length&&[].slice.call(e).map(w.toolTipParser.createToolTip)}}]),e}(),D=function(){function e(t){(0,a.Z)(this,e),this.modelColorSelector=null,this.createModelColorSelector(t)}return(0,n.Z)(e,[{key:"createModelColorSelector",value:function(e){this.modelColorSelector=new T(e)}}]),e}(),C=function(){function e(t){(0,a.Z)(this,e),this.buildCtaElem=t,this.url=null,this.init()}return(0,n.Z)(e,[{key:"init",value:function(){this.attachEvents(),this.url=this.buildCtaElem.getAttribute("href")}},{key:"attachEvents",value:function(){var e=this;o.Jw.addEventListener(r.fD.UPDATE_EXTERIOR_COLOR,(function(t){e.onExteriorColorUpdate(t.detail.optionId)}))}},{key:"onExteriorColorUpdate",value:function(e){if(e){var t=this.url;t=t.indexOf("?")>=0?"".concat(t,"&options=").concat(e):"".concat(t,"?options=").concat(e),this.buildCtaElem.setAttribute("href",t)}}}]),e}(),k=function(){function e(t){(0,a.Z)(this,e),this.modelCta=null,this.createModelCta(t)}return(0,n.Z)(e,[{key:"createModelCta",value:function(e){this.modelCta=new C(e)}}]),e}(),A=i(4788),_=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.init()}return(0,n.Z)(e,[{key:"init",value:function(){this.accordionElement=this.element.querySelector("[data-accordion]"),this.accordion=A.accordionParser.createAccordion({element:this.accordionElement})}}]),e}(),P=i(4942),L=i(79645);function M(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function I(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?M(Object(i),!0).forEach((function(t){(0,P.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):M(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var N={dataAnalyticContainer:"{'blade': 'model package options modal'}"},j=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.modalOpenersElm=[],this.autoNumIncr=0,this.openDetailsModal=this.openDetailsModal.bind(this),this.init()}return(0,n.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.attachEvents(),this.accordion=A.accordionParser.createAccordion({element:this.accordionElm})}},{key:"cacheDOM",value:function(){this.accordionElm=this.element.querySelector("[".concat("data-accordion","]")),this.modalOpenersElm=this.element.querySelectorAll("[".concat("modal-detail-opener","]"))}},{key:"attachEvents",value:function(){var e=this;[].slice.call(this.modalOpenersElm).forEach((function(t){t.addEventListener(r.FP.CLICK,e.openDetailsModal)}))}},{key:"openDetailsModal",value:function(e){var t=e.currentTarget,i=this.filterOptionsByPackage(t.dataset.packageName),a={carousel:{navEnabledSmall:!0,theme:"modal-feature-detail",startIndex:parseInt(t.dataset.optionIndex,10)-1},modal:I({},N)};new L.s(i,a).open({callingContainer:t})}},{key:"filterOptionsByPackage",value:function(e){var t=this;return[].slice.call(this.modalOpenersElm).reduce((function(i,a){if(t.autoNumIncr=0,a.dataset.packageName!==e)return i;var n=I({},a.dataset);return n.disclaimers=JSON.parse(n.disclaimers),n.disclaimers.forEach((function(e){e.code="AUTONUM"===e.code?t.getAutoNum():e.code})),[].concat((0,m.Z)(i),[n])}),[])}},{key:"getAutoNum",value:function(){return this.autoNumIncr=this.autoNumIncr+1,this.autoNumIncr}}]),e}();function Z(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function R(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(i),!0).forEach((function(t){(0,P.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var V="model-page-features__options-list__cta",F={dataAnalyticContainer:"{'blade': 'model feature options modal'}"},x=window.mbNafta.ns("pageData","modelFeatures").features||[],H=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.viewCtas=[],this.modalOpeners=[],this.isAllFeaturesDrawerOpen=!1,this.autoNumIncr=0,this.openCloseDrawers=this.openCloseDrawers.bind(this),this.openDetailsModal=this.openDetailsModal.bind(this),this.init()}return(0,n.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.createToggleDrawers(),this.attachEvents()}},{key:"cacheDOM",value:function(){this.viewCtas=this.element.querySelectorAll(".".concat(V)),this.modalOpeners=this.element.querySelectorAll("[".concat("modal-detail-opener","]"))}},{key:"attachEvents",value:function(){var e=this;[].slice.call(this.modalOpeners).forEach((function(t){t.addEventListener(r.FP.CLICK,e.openDetailsModal)})),[].slice.call(this.viewCtas).forEach((function(t){t.addEventListener(r.FP.CLICK,e.openCloseDrawers)}))}},{key:"parsePackageData",value:function(e){var t=""!==window.mbNafta.ns("pageData").jsonPackagesData?JSON.parse(window.mbNafta.ns("pageData").jsonPackagesData):"",i="";return""!==t&&t.forEach((function(t){t.packageGroup.options.forEach((function(t){t.packageOpts.forEach((function(a){a.option&&a.option.name===e&&(""!==i&&(i+=", "),i+=t.name)}))}))})),i}},{key:"openDetailsModal",value:function(e){var t=this,i=e.currentTarget,a=this.filterOptionsBasedOnDOM(e.currentTarget.dataset);a.forEach((function(e){e.packageAvailable=t.parsePackageData(e.title)}));var n=-1;[].slice.call(this.modalOpeners).some((function(e){return e.dataset.categoryName===i.dataset.categoryName&&(n+=1),e===i}));var r={carousel:{navEnabledSmall:!0,theme:"modal-feature-detail",startIndex:n},modal:R({},F)};new L.s(a,r).open({callingContainer:i})}},{key:"openCloseDrawers",value:function(e){this.isAllFeaturesDrawerOpen=!this.isAllFeaturesDrawerOpen,o.Jw.dispatchEvent(o.Jw.createCustomEvent(r.fD.TOGGLE_DRAWER_TRIGGER,{detail:{classElement:V,element:e.currentTarget}}))}},{key:"createToggleDrawers",value:function(){[].slice.call(this.viewCtas).map((function(e){return new w.ToggleDrawer(e)}))}},{key:"filterOptionsBasedOnDOM",value:function(e){var t=this,i=e.categoryName;return[].slice.call(this.modalOpeners).reduce((function(e,a){if(a.dataset.categoryName!==i)return e;if(!t.isAllFeaturesDrawerOpen&&!a.parentElement.classList.contains("model-page-features__feature-card"))return e;var n=x.find((function(e){return e.category===i})).options.find((function(e){var t=e.optionDetail;return t&&t.multimediaAssets&&t.optionName===a.dataset.optionName}));return n?(t.autoNumIncr=0,[].concat((0,m.Z)(e),[t.mapDetailToModalDetail(n)])):e}),[])}},{key:"mapDetailToModalDetail",value:function(e){var t=this,i=(e.optionDetail.disclaimers||[]).map((function(e){return{desc:e.disclaimerText||"",code:("AUTONUM"===e.legend?t.getAutoNum():e.legend)||""}}));return e.optionDetail.customDisclaimer&&i.splice(0,0,{desc:e.optionDetail.customDisclaimer}),{standardText:e.standard?window.mbNafta.ns("pageData").localization.standard:window.mbNafta.ns("pageData").localization.optional,title:e.optionDetail.optionName,disclaimers:i,description:e.optionDetail.text,imageUrl:e.optionDetail.multimediaAssets[0].imgLarge,imageAlt:e.optionDetail.multimediaAssets[0].imgAltText}}},{key:"getAutoNum",value:function(){return this.autoNumIncr=this.autoNumIncr+1,this.autoNumIncr}}]),e}(),q=i(62279),U=i(22209);function B(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?B(Object(i),!0).forEach((function(t){(0,P.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):B(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var W="aria-controls",G={viewMore:"View More",viewLess:"View Less",featuresCount:"{0} of {1} features"},K=function(){function e(t,i){(0,a.Z)(this,e),this.element=t,this.config=i,this.init()}return(0,n.Z)(e,[{key:"init",value:function(){this.simpleTabs=null,this.toggleDrawers=[],this.vehicleData=window.mbNafta.ns("pageData").vehicle,this.localization=Y({},window.mbNafta.ns("pageData").localization.modelTrims,{},G),this.setBindings(),this.cacheDOM(),this.createTabs(),this.renderTabsFooter(),this.initToggleDrawers(),this.mediaServerApi=s.W.getInstance(),this.getVehicleImages(this.modelTrimVehicleImageElm)}},{key:"setBindings",value:function(){this.onDrawerToggle=this.onDrawerToggle.bind(this)}},{key:"cacheDOM",value:function(){this.simpleTabsElm=this.element.querySelector("[".concat("data-simple-tabs","]")),this.modelTrimVehicleImageElm=this.element.querySelector(".".concat("model-trim-package__vehicle-image")),this.modelTrimFeaturesElms=[].slice.call(this.element.querySelectorAll(".".concat("model-trim-package__features-standard",", .").concat("model-trim-package__features-optional")))}},{key:"createTabs",value:function(){var e=this,t={tabCurrent:"feature-tab__button--current",tabLatent:"feature-tab__button",showFirstTab:!0,useLocationHash:!1};this.simpleTabs=new q.x(this.simpleTabsElm,t),this.simpleTabs.tabCtasElms.forEach((function(t){t.addEventListener(r.FP.CLICK,e.onClickTab.bind(e,t))}))}},{key:"onClickTab",value:function(e){this.config.onClickTabCallback&&this.config.onClickTabCallback(e.getAttribute(W))}},{key:"setTab",value:function(e,t){var i=e.slice(0,-1),a=this.element.querySelector("[".concat(W,"='").concat(i).concat(t,"']"));this.simpleTabs.handleCtaClick({target:a,preventDefault:function(){}})}},{key:"renderTabsFooter",value:function(e){var t=this;this.modelTrimFeaturesElms.forEach((function(i){var a=i.querySelector(".".concat("model-trim-package__feature-list")),n=i.querySelector(".".concat("model-trim-package__feature-count"));n.innerHTML=(0,o.NR)(t.localization.featuresCount,[e?n.dataset.totalFeatures:a.children.length,n.dataset.totalFeatures])}))}},{key:"initToggleDrawers",value:function(){var e=this;this.modelTrimFeaturesElms.forEach((function(t){var i=t.querySelector(".".concat("model-trim-package__feature-cta")),a=t.querySelector(".".concat("model-trim-package__hidden-list"));if(i){var n=new w.ToggleDrawer(i,{onToggle:e.onDrawerToggle,toggleDrawer:a,closedText:e.localization.viewLess,openedText:e.localization.viewMore});e.toggleDrawers.push(n)}}))}},{key:"onDrawerToggle",value:function(e,t){this.setDrawer(t),this.config.onToggleDrawerCallback&&this.config.onToggleDrawerCallback(t);var i=this.element.offsetTop+this.simpleTabsElm.offsetTop-window.innerHeight/2;!t&&i<window.scrollY&&(0,o.X5)(i)}},{key:"setDrawer",value:function(e){this.toggleDrawers.forEach((function(t){t[e?"openDrawer":"closeDrawer"]()})),this.renderTabsFooter(e)}},{key:"getVehicleImages",value:function(e){var t=this;this.mediaServerApi.getBuildImage(Y({},this.vehicleData,{modelLine:e.dataset.trimCode}),{view:s.W.VIEW_TYPES.EXTERIOR,pov:s.W.POV_TYPES.FRONT,presetCategory:s.W.PRESET_CATEGORIES.MODEL}).then((function(i){t.preloadImages(i.respObj,e)}))}},{key:"preloadImages",value:function(e,t){var i=new U.PictureLoader({media:{imgL:e.large.retina,imgS:e.small.retina,alt:""},className:"model-trim-package__vehicle-picture"});t.appendChild(i.render())}}]),e}(),J=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.init()}return(0,n.Z)(e,[{key:"init",value:function(){this.trims=[],this.expandedDrawers=!1,this.currentTab=null,this.setBindings(),this.cacheDOM(),this.attachEvents(),this.createTrims()}},{key:"setBindings",value:function(){this.onBreakpointCross=this.onBreakpointCross.bind(this),this.handleTabSync=this.handleTabSync.bind(this),this.handleDrawerSync=this.handleDrawerSync.bind(this)}},{key:"cacheDOM",value:function(){this.modelTrimElms=[].slice.call(this.element.querySelectorAll(".".concat("model-trim-package")))}},{key:"attachEvents",value:function(){o.sp.addBreakpointListener(this.onBreakpointCross)}},{key:"detachEvents",value:function(){o.sp.removeBreakpointListener(this.onBreakpointCross)}},{key:"createTrims",value:function(){var e=this,t={onClickTabCallback:this.handleTabSync,onToggleDrawerCallback:this.handleDrawerSync};this.modelTrimElms.forEach((function(i){e.trims.push(new K(i,t))}))}},{key:"handleTabSync",value:function(e){this.currentTab=e,o.sp.gte(o.sp.SIZES.LARGE)&&this.trims.forEach((function(t,i){t.setTab(e,i)}))}},{key:"handleDrawerSync",value:function(e){this.expandedDrawers=e,o.sp.gte(o.sp.SIZES.LARGE)&&this.trims.forEach((function(t){t.setDrawer(e)}))}},{key:"onBreakpointCross",value:function(){this.handleDrawerSync(this.expandedDrawers),this.currentTab&&this.handleTabSync(this.currentTab)}}]),e}(),z=i(81995),X="data-form-config",Q="data-vehicle",$=window.mbNafta.pageData,ee=$.country,te=$.currency,ie=$.language,ae=$.vehicle,ne=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.setLinkFormData()}return(0,n.Z)(e,[{key:"setLinkFormData",value:function(){var e=this,t=this.element.querySelectorAll(".quick-links__item"),i={sourceType:z.wK.SOURCE_TYPE.MODEL};null==t||t.forEach((function(t){var a=t.getAttribute("href");(null==a?void 0:a.indexOf("/intercept/lead-form/"))>-1&&(t.getAttribute(X)||t.setAttribute(X,JSON.stringify(i)),!t.getAttribute(Q)&&ae&&t.setAttribute(Q,JSON.stringify(e.parseVehicle())))}))}},{key:"parseVehicle",value:function(){var e=ae.bodyStyle,t=ae.model,i=ae.msrp,a=ae.name,n=ae.year,r=o.uf.toCurrency(o.uf.toNumber(i),ee,ie,te);return{bodyStyle:e,class:ae.class,model:t,modelId:t,modelName:a,msrp:{priceCurrency:r},price:i,year:n,type:"NEW"}}}]),e}(),re=i(8453),oe=i(98243),se=i(71890),le={ModelHero:d,ModelSelector:y,ModelColorSelector:D,ModelCta:k,ModelSpecsList:_,ModelPackagesList:j,ModelFeatures:H,ModelTrimSet:J,ModelQuickLinks:ne,TabbedModule:re.Z,StickyNav:oe.StickyNav,InventoryPreferences:se.Z}},71890:function(e,t,i){i.d(t,{Z:function(){return y}});var a=i(4942),n=i(87757),r=i.n(n),o=i(15861),s=i(15671),l=i(43144),c=i(61156),u=i(52597),h=i(56571),d=i(19418),m=i(77498),f=i(78618),p=i(7081);function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){(0,a.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g={CA:"ca",CPO:"CPO",COUNTRY:"country",DATA_MODULE_TYPE:"data-module-type",DATA_REGISTRATION:"data-registration",DATA_SECONDARY_MODULE_TYPE:"data-secondary-module-type",DEALER_ID:"dealer_id",FALSE:"false",HYBRID_MODULE_TYPE:"cta_pref_1",INVENTORY:"inventory",NBA:"INVENTORY",OFFERS:"offers"},y=function(){function e(t){var i=this;(0,s.Z)(this,e),this.element=t,this.inventoryPreferenceApi=null,this.module=null,this.offerData=null,this.modifiers={},this.saveRecentlyViewedVehicleToUserProfile(),this.baseModuleType=this.filterModuleType(this.element.getAttribute(g.DATA_MODULE_TYPE)),this.isRegistration=JSON.parse(this.element.getAttribute(g.DATA_REGISTRATION))||!1,this.baseModuleType?this.isRegistration?(0,m.m7)().then((function(e){i.recentlyViewedVehicle=(0,m.p9)(g[i.baseModuleType.toUpperCase()],e),i.cacheDOM(),i.init()})).catch((function(e){console.log("Error retrieving the recently viewed vehicle: ".concat(e)),i.cacheDOM(),i.init()})):(this.cacheDOM(),this.init()):console.warn("No Preferences Module set")}var t;return(0,l.Z)(e,[{key:"cacheDOM",value:function(){this.experienceMount=document.querySelector(".".concat("inventory-experience-mount"))}},{key:"saveRecentlyViewedVehicleToUserProfile",value:function(){var e,t=(0,m.Xs)(),i=null===(e=(new u.$S).getProfile())||void 0===e?void 0:e.loggedState;null!=t&&t.recentlyViewed&&i&&f.Z.dispatch((0,p.hb)(t))}},{key:"init",value:(t=(0,o.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.Z;case 3:this.inventoryPreferenceApi=e.sent,this.modifiers=this.inventoryPreferenceApi.getModifiers(),this.experienceMount&&this.moveModuletoUpperContainer(),this.createThreeUpModule(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("No preferences loaded:",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return t.apply(this,arguments)})},{key:"setVehicleData",value:function(){var e,t,i=window.mbNafta.ns("pageData","vehicle"),a=(i.models||[]).filter((function(e){return e.model.isAMG===i.isAMG}));if(i.options||!a.length)return i;var n=i.classId,r=i.bodystyleId,o=a[0],s=o.paintGroup,l=void 0===s?[]:s,c=o.model,u=c.year,h=c.code,d=c.msrp,m=c.name,f=c.vehicleBodystyle,p=c.vehicleClass;return b({},i,{class:p?p.code:n,bodyStyle:f?f.code:r,year:u,model:h,msrp:d,name:m,meta:{altTag:"".concat(m," Exterior Image")},models:a,options:{exterior:{PAINT:[{id:(null===(e=l[0])||void 0===e||null===(t=e.options[0])||void 0===t?void 0:t.id)||""}]}}})}},{key:"filterModuleType",value:function(e){return"none"!==e&&e}},{key:"getModelsList",value:function(){for(var e=(0,m.Qf)(),t=[],i=1;i<4;i+=1){var a="model_pref_".concat(i),n=this.inventoryPreferenceApi.getOfferData(a),r=Boolean("string"==typeof n&&n.length);r&&t.push(n),!r&&e[a]&&t.push(e[a])}return t}},{key:"createThreeUpModule",value:function(){var e=window.mbNafta.ns("pageData",g.COUNTRY),t=this.inventoryPreferenceApi.getOfferData(g.HYBRID_MODULE_TYPE)||"";e===g.CA&&t===g.OFFERS&&(t=g.INVENTORY);var i=this.filterModuleType(this.element.getAttribute(g.DATA_SECONDARY_MODULE_TYPE)),a={element:this.element,moduleConfig:{baseModuleType:this.baseModuleType,hybridModuleType:t,location:this.inventoryPreferenceApi.getDealer(),modelLists:this.getModelsList().filter((function(e){return e})),registration:this.isRegistration,secondaryModuleType:i,recentlyViewedVehicle:this.recentlyViewedVehicle},onDestroyCallback:c.ZT,personalizationConfig:b({country:e,modifiers:this.modifiers},window.mbNafta.ns("applicationProperties","inventoryConfig"),{},window.mbNafta.ns("applicationProperties")),vehicleData:this.setVehicleData()};this.module=new d.Z(a)}},{key:"moveModuletoUpperContainer",value:function(){this.element=this.experienceMount.appendChild(this.element)}}]),e}()},62279:function(e,t,i){i.d(t,{Z:function(){return d},x:function(){return g}});var a=i(15671),n=i(43144),r=i(4942),o=i(48218),s=i(61156);function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}var c={updateHash:!1,onTabActivate:s.ZT},u={37:-1,38:-1,39:1,40:1},h=function(){function e(t,i){var n=this;(0,a.Z)(this,e),(0,r.Z)(this,"onTabClick",(function(e){var t=e.currentTarget;n.activateTab(t,!1)})),(0,r.Z)(this,"onTabFocus",(function(){n.tabElms.forEach((function(e){return e.setAttribute("tabindex","0")}))})),(0,r.Z)(this,"onTabBlur",(function(e){var t=e.currentTarget;n.tabElms.forEach((function(e){return e.setAttribute("tabindex","-1")})),t.setAttribute("tabindex","0")})),(0,r.Z)(this,"onKeyDown",(function(e){switch(e.keyCode){case o.sd.END:e.preventDefault(),n.focusLastTab();break;case o.sd.HOME:e.preventDefault(),n.focusFirstTab()}})),(0,r.Z)(this,"onKeyUp",(function(e){switch(e.keyCode){case o.sd.LEFT:case o.sd.RIGHT:n.switchTabOnArrowPress(e);break;case o.sd.ENTER:case o.sd.SPACE:n.activateTab(e.currentTarget)}})),(0,r.Z)(this,"switchTabOnArrowPress",(function(e){var t=e.keyCode;if(u[t]){var i=e.currentTarget;if(void 0!==i.index){var a=n.tabElms[i.index+u[t]];a?a.focus():t===o.sd.LEFT?n.focusLastTab():t===o.sd.RIGHT&&n.focusFirstTab()}}})),(0,r.Z)(this,"activateTab",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.deactivateTabs(),e.setAttribute("aria-selected","true");var i=e.getAttribute("aria-controls"),a=document.getElementById(i);a.removeAttribute("hidden"),n.config.onTabActivate&&n.config.onTabActivate(a,t)})),(0,r.Z)(this,"deactivateTabs",(function(){for(var e=0;e<n.tabElms.length;e+=1)n.tabElms[e].setAttribute("aria-selected","false");for(var t=0;t<n.panelElms.length;t+=1)n.panelElms[t].setAttribute("hidden","true")})),(0,r.Z)(this,"focusFirstTab",(function(){n.tabElms[0].focus()})),(0,r.Z)(this,"focusLastTab",(function(){n.tabElms[n.tabElms.length-1].focus()})),t&&t instanceof Element?(this.element=t,this.config=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){(0,r.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},c,{},i),this.tabListElm=null,this.tabElms=null,this.panelElms=null,this.cacheDOM(),this.attachEvents()):console.warn("element should be an instance of Element")}return(0,n.Z)(e,[{key:"cacheDOM",value:function(){this.tabListElm=this.element.querySelector("[role=tablist]"),this.tabElms=this.element.querySelectorAll("[role=tab]"),this.panelElms=this.element.querySelectorAll("[role=tabpanel]")}},{key:"attachEvents",value:function(){var e=this;this.tabElms.forEach((function(t,i){t.index=i,t.addEventListener(o.FP.BLUR,e.onTabBlur),t.addEventListener(o.FP.CLICK,e.onTabClick),t.addEventListener(o.FP.FOCUS,e.onTabFocus),t.addEventListener(o.FP.KEYDOWN,e.onKeyDown),t.addEventListener(o.FP.KEYUP,e.onKeyUp)}))}}]),e}(),d=h;function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}var f="simple-tabs__content--pre-init",p="aria-controls",v="aria-hidden",b={linksContainer:"data-simple-tabs-links",tabsContainer:"simple-tabs",tabClass:"simple-tabs__link",contentClass:"simple-tabs__content",tabCurrent:"simple-tabs__current-item",tabLatent:"simple-tabs__link-latent",callback:s.ZT,useLocationHash:!0},g=function(){function e(t,i){(0,a.Z)(this,e),t?(this.element=t,this.config=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){(0,r.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},b,{},i),this.cacheDOM(),this.init()):console.warn("No simple tabs element found")}return(0,n.Z)(e,[{key:"cacheDOM",value:function(){this.linksContainerElm=this.element.querySelector("[".concat(this.config.linksContainer,"]")),this.tabCtasElms=this.linksContainerElm.querySelectorAll("[".concat(p,"]"))}},{key:"init",value:function(){var e=this;this.tabContentsElms=[],this.element.classList.add(this.config.tabsContainer),this.handleCtaClick=this.handleCtaClick.bind(this);var t=window.location.hash.substr(1),i=!1;this.tabCtasElms.forEach((function(t){t.classList.add(e.config.tabClass);var i=t.getAttribute(p),a=e.element.querySelector("#".concat(i));e.tabContentsElms.push(a)})),this.tabContentsElms.forEach((function(a){a.classList.add(e.config.contentClass),a.classList.remove(f);var n=a.getAttribute("id");t===n&&(e.setCurrentTab(n),i=!0)})),(!t||!i&&this.config.showFirstTab)&&this.tabContentsElms[0].setAttribute(v,!1),this.attachEvents()}},{key:"destroy",value:function(){this.detachEvents()}},{key:"attachEvents",value:function(){var e=this;this.tabCtasElms.forEach((function(t){t.addEventListener(o.FP.CLICK,e.handleCtaClick)}))}},{key:"detachEvents",value:function(){var e=this;this.tabCtasElms.forEach((function(t){t.removeEventListener(o.FP.CLICK,e.handleCtaClick)}))}},{key:"handleCtaClick",value:function(e){e.preventDefault();var t=e.target.getAttribute(p),i=this.element.querySelector("#".concat(t)),a=i.getAttribute("id");i.setAttribute(v,!1),this.setCurrentTab(a)}},{key:"setCurrentTab",value:function(e){var t=this;this.tabContentsElms.forEach((function(t){t.id===e?t.setAttribute(v,!1):t.setAttribute(v,!0)})),this.tabCtasElms.forEach((function(i){i.getAttribute(p)!==e?(i.classList.remove(t.config.tabCurrent),i.classList.add(t.config.tabLatent)):(i.classList.remove(t.config.tabLatent),i.classList.add(t.config.tabCurrent))})),this.config.useLocationHash&&(history.replaceState?history.replaceState(null,null,"#".concat(e)):location.hash="#".concat(e)),this.config.callback(e)}}]),e}();(0,r.Z)(g,"PRE_INIT_CLASS",f)}}]);
//# sourceMappingURL=515f4afc9871270ceb44.bundle.js.map