"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[3087],{68053:function(e,t,i){i.d(t,{Z:function(){return ie}});var n=i(15671),a=i(43144),l=i(61156),r={TILE:"tile",CAROUSEL_ITEM:"carouselItem"},s=i(30168);function o(){var e=(0,s.Z)(['\n    <div class="gallery ','">\n        <div class="gallery__preview-container"\n            data-preview-container>\n        </div>\n    </div>\n']);return o=function(){return e},e}function c(){var e=(0,s.Z)(['\n    <a href="#" class="gallery__item gallery__item--','" data-analytics-trigger="gallery-expand">\n        ',"\n    </a>\n"]);return c=function(){return e},e}function u(){var e=(0,s.Z)(['\n    <div class="gallery__section gallery__section--','">\n        <div class="gallery__items" data-section-media>\n            ',"\n            ","\n        </div>\n    </div>\n"]);return u=function(){return e},e}function d(){var e=(0,s.Z)(['\n    <div class="gallery" id="gallery_','">\n        <div class="gallery__container"\n             data-gallery-items>\n        </div>\n    </div>\n']);return d=function(){return e},e}var h=i(42982),g=i(4942),y=i(14569),v=i(48218);function f(){var e=(0,s.Z)(['\n                    <li class="more-info-bar__cta-list-item">\n                        <a class="more-info-bar__cta ','" href="','" target="','" '," ",">","</a>\n                    </li>\n                "]);return f=function(){return e},e}function m(){var e=(0,s.Z)(['\n    <div class="more-info-bar">\n        <button class="more-info-bar__toggle" aria-expanded="false">\n            <span class="more-info-bar__toggle-copy">','</span>\n        </button>\n        <div class="more-info-bar__content">\n            <div class="more-info-bar__copy-container">\n                ',"\n                ","\n                ",'\n            </div>\n            <ul class="more-info-bar__cta-container">\n                ',"\n            </ul>\n        </div>\n    </div>\n"]);return m=function(){return e},e}var b="more-info-bar__toggle",p="aria-expanded",T=function(){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];(0,n.Z)(this,e),Object.assign(this,{element:t,details:i,CTAs:a}),this.init()}return(0,a.Z)(e,[{key:"init",value:function(){this.createMoreInfoBar(),this.cacheDOM(),this.attachEventListeners()}},{key:"cacheDOM",value:function(){this.moreInfoToggleElem=this.moreInfoBar.querySelector(".".concat(b))}},{key:"attachEventListeners",value:function(){this.moreInfoToggleElem.addEventListener(v.FP.CLICK,this.toggleClickHandler.bind(this))}},{key:"toggleClickHandler",value:function(e){var t=(0,l.wr)(e.target,".".concat(b));(e.target&&e.target.matches(".".concat(b))||t)&&(this.moreInfoBar.classList.toggle("active"),this.moreInfoBar.classList.contains("active")?(this.moreInfoToggleElem.setAttribute(p,"true"),this.tabbables.enableTabbables()):(this.moreInfoToggleElem.setAttribute(p,"false"),this.tabbables.disableTabbables()))}},{key:"createMoreInfoBar",value:function(){this.moreInfoBar=function(e){var t=e.buttonContent,i=void 0===t?"More Info":t,n=e.title,a=void 0===n?"":n,r=e.endpoint,s=void 0===r?"":r,o=e.captionHeading,c=void 0===o?"":o,u=e.captionDescription,d=void 0===u?"":u,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,l.e2)(m(),i,function(e,t){return t&&e?'<a href="'.concat(t,'" class="more-info-bar__model" data-analytics-trigger="cta">').concat(e,"</a>"):e?'<span class="more-info-bar__model">'.concat(e,"</span>"):""}(a,s),function(e){return e?'<span class="more-info-bar__caption-heading">'.concat(e,"</span>"):""}(c),function(e){return e?'<p class="more-info-bar__caption-description">'.concat(null!=e?e:"","</p>"):""}(d),h.map((function(e){return(0,l.dy)(f(),e.className,e.endpoint,e.target,"download"===e.type?"download":"",function(e){return Object.prototype.hasOwnProperty.call(e,"dataAnalyticsTrigger")?'data-analytics-trigger="'.concat(e.dataAnalyticsTrigger,'"'):""}(e),e.label)})).join(""))}(this.details,this.CTAs)({getNode:!0}),this.tabbables=new l.cs(this.moreInfoBar.querySelector(".".concat("more-info-bar__content"))),this.tabbables.disableTabbables()}},{key:"render",value:function(){return this.moreInfoBar}}]),e}(),w=i(75402),_=i(90459);function C(){var e=(0,s.Z)(['<button class="youtube-trigger ','"\n            aria-label="','">\n        <picture class="youtube-trigger__picture ','">\n            <source media="(max-width: 767px)" srcset="','" />\n            <img src="','" alt="','" class="youtube-trigger__image ','" role="','" />\n        </picture>\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n             xml:space="preserve" viewBox="0 0 62 62" class="youtube-trigger__icon-play">\n            <circle class="youtube-trigger__circle" cx="31" cy="31" r="31"></circle>\n            <polygon class="youtube-trigger__triangle" points="24,17.6 24,43.4 41.3,30.4 "></polygon>\n        </svg>\n    </button>']);return C=function(){return e},e}var k=function(e,t,i){var n=i.altText,a=void 0===n?"":n,r=i.imgClass,s=void 0===r?"":r,o=i.pictureClass,c=void 0===o?"":o,u=i.buttonClass,d=void 0===u?"":u,h=i.videoTitle,g=void 0===h?"":h;return(0,l.e2)(C(),d,g?(0,l.NR)(_.Z.modalAlertYouTube,[g]):_.Z.modalAlertYouTubeFallback,c,e,t,a,s,!a&&"presentation")},I=i(24745);function M(){var e=(0,s.Z)(['\n                    <li class="gallery-info__cta-list-item">\n                        <a class="link link_plain-link gallery-info__cta ','" href="','" target="','" '," ",">","</a>\n                    </li>\n                "]);return M=function(){return e},e}function S(){var e=(0,s.Z)(['\n    <div class="modal-carousel modal-carousel--youtube">\n        <div class="modal-carousel__image">\n            ','\n        </div>\n        <div class="wrapper gallery-info__content ','">\n            <div class="gallery-info__copy-container">\n                ',"\n                ","\n                ",'\n            </div>\n            <ul class="gallery-info__cta-container">\n                ',"\n            </ul>\n        </div>\n    </div>"]);return S=function(){return e},e}var E=function(e){var t,i,n=e.videoId,a=e.videoTranscript,r=e.videoTriggerImage,s=e.modelTitle,o=e.modelPath,c=e.captionHeading,u=e.captionDescription,d=e.CTAs,h=void 0===d?[]:d;return(0,l.e2)(S(),(0,I.Z)({videoId:n,videoTranscript:a,imageUrl:r})({getNode:!1}),a?"gallery-info__content--with-transcript":"",(t=s,(i=o)&&t?'<a href="'.concat(i,'" class="link link_plain-link gallery-info__model" data-analytics-trigger="cta">').concat(t,"</a>"):t?'<span class="gallery-info__model">'.concat(t,"</span>"):""),function(e){return e?'<span class="gallery-info__caption-heading">'.concat(e,"</span>"):""}(c),function(e){return e?'<p class="gallery-info__caption-description">'.concat(null!=e?e:"","</p>"):""}(u),h.map((function(e){return(0,l.dy)(M(),e.className,e.endpoint,e.target,"download"===e.type?"download":"",function(e){return Object.prototype.hasOwnProperty.call(e,"dataAnalyticsTrigger")?'data-analytics-trigger="'.concat(e.dataAnalyticsTrigger,'"'):""}(e),e.label)})).join(""))};function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var L=function(){function e(t){var i=t.videoId,a=t.videoTranscript,l=t.details;(0,n.Z)(this,e),this.videoId=i,this.videoTranscript=a,this.details=l,this.init()}return(0,a.Z)(e,[{key:"init",value:function(){this.setBindings(),this.createTemplate()}},{key:"setBindings",value:function(){this.initialize=this.initialize.bind(this),this.beforeYouTubeModalClose=this.beforeYouTubeModalClose.bind(this)}},{key:"createTemplate",value:function(){this.element=E(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(Object(i),!0).forEach((function(t){(0,g.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({videoId:this.videoId,videoTranscript:this.videoTranscript},this.details))({getNode:!0});var e=this.element.querySelector(".".concat("youtube-modal__outer-container"));this.youtube=new w.u9({videoId:this.videoId,videoTranscript:this.videoTranscript,youTubeElement:e})}},{key:"getElement",value:function(){return this.element}},{key:"initialize",value:function(){this.youtube.initialize()}},{key:"beforeYouTubeModalClose",value:function(){this.youtube.beforeYouTubeModalClose()}}]),e}();function D(){var e=(0,s.Z)(["\n    <picture>\n        ",'\n        <img src="','" alt="','" class="','" />\n    </picture>\n']);return D=function(){return e},e}var j=(window.mbNafta.ns("pageData").localization||{moreInfo:"More Info"}).moreInfo,G=(window.mbNafta.ns("pageData").variantInfo||{isDDTVariant:!1}).isDDTVariant;var A=function(){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=a.details,r=a.callback,s=a.inModal;(0,n.Z)(this,e),this.galleryItemType=t,this.media=i,this.details=l,this.callback=r,this.inModal=s,this.element=null,this.youTubeModal=null,this.hasMoreInforBar=!1,this.onClick=this.onClick.bind(this),this.onYouTubeTriggerClick=this.onYouTubeTriggerClick.bind(this),this.destroy=this.destroy.bind(this),this.onBeforeModalClose=this.onBeforeModalClose.bind(this),this.createItem(),this.attachEvents()}return(0,a.Z)(e,[{key:"createItem",value:function(){var e=this.media,t=e.imgLarge,i=e.imgSmall,n=e.imgAltText,a=e.isYouTubeTrigger,s=e.overlayImage,o=e.videoTitle,u=e.youtube,d=e.youtubeTranscript;switch(this.galleryItemType){case r.TILE:this.element=a?l.jG.fromTemplate(k(i.replace(/\s/g,"%20"),t.replace(/\s/g,"%20"),{altText:n,buttonClass:"gallery__item gallery__item--tile gallery__button",videoTitle:o})({getNode:!1})):l.jG.fromTemplate(function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,l.dy)(c(),n,function(e,t,i,n,a){return'\n        <picture class="gallery__picture">\n            <source media="(max-width: 767px)" srcset="'.concat(t||e,'">\n            <img src="').concat(e,'" alt="').concat(i,'" class="gallery__image gallery__image--').concat(n,'">\n        </picture>\n        ').concat(a?'\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                xml:space="preserve" viewBox="0 0 62 62" class="youtube-trigger__icon-play">\n                <circle class="youtube-trigger__circle" cx="31" cy="31" r="31"></circle>\n                <polygon class="youtube-trigger__triangle" points="24,17.6 24,43.4 41.3,30.4 "></polygon>\n            </svg>\n        ':"","\n    ")}(e,t,i,n,a)).trim()}(t.replace(/\s/g,"%20"),i.replace(/\s/g,"%20"),n,this.galleryItemType,a));break;case r.CAROUSEL_ITEM:if(this.element=function(e,t,i){var n=e.imgAltText,a=e.imgSmall,r=e.overlayImage,s=e.videoTitle,o=e.youtube,c=e.youtubeTranscript,u=t.modelTitle,d=t.modelPath,h=t.captionHeading,g=t.captionDescription,y=t.CTAs,v=l.jG.fromTemplate('<div class="carousel-gallery-item"></div>');if(v.dataset.analyticsContainer=JSON.stringify(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.mbNafta.ns("pageData","vehicle");return{media:{body:e.bodystyleId,class:e.classId,isAMG:e.isAMG}}}()).replace(/"/g,"'"),o&&i?l.jG.insert(E({videoId:o,videoTranscript:c,videoTriggerImage:r.replace(/\s/g,"%20"),modelTitle:u,modelPath:d,captionHeading:h,captionDescription:g,CTAs:y})({getNode:!0}),v):o?l.jG.insert(k(a.replace(/\s/g,"%20"),r.replace(/\s/g,"%20"),{altText:n,imgClass:"modal__image",videoTitle:s})({getNode:!0}),v):l.jG.insert(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.altText,a=void 0===n?"":n,r=i.cssClass,s=void 0===r?"":r;return(0,l.e2)(D(),e?'<source media="(max-width: 767px)" srcset="'.concat(e,'" />'):"",t,a,s)}(a.replace(/\s/g,"%20"),r.replace(/\s/g,"%20"),{cssClass:"modal__image"})({getNode:!0}),v),(y.length||u||h||g)&&!o&&!G){var f=new T(null,{buttonContent:j,title:u,endpoint:d,captionHeading:h,captionDescription:g},y);v.appendChild(f.render())}return v}(this.media,this.details,this.inModal),this.hasMoreInforBar=!!(this.details.CTAs.length||this.details.modelTitle||this.details.captionHeading||this.details.captionDescription)&&!this.media.youtube&&!G,this.tabbables=new l.cs(this.element),this.hasMoreInforBar&&this.tabbables.addIgnoreElems(this.element.querySelector(".".concat("more-info-bar__content"))),u&&!this.inModal){var h=this.element.querySelector(".".concat("youtube-trigger"));this.youtubeTrigger=new w.cB(h,u,this.onYouTubeTriggerClick)}if(u&&this.inModal){var g=this.element.querySelector(".".concat("youtube-modal__outer-container"));this.youtube=new w.u9({videoId:u,videoTranscript:d,triggerImageLarge:s.replace(/\s/g,"%20"),youTubeElement:g})}break;default:console.error("GalleryItemType not found")}}},{key:"afterModalOpen",value:function(){this.youtube&&this.youtube.initialize(),this.tabbables&&this.tabbables.enableTabbables()}},{key:"enable",value:function(){this.youtube&&this.youtube.enable(),this.tabbables&&this.tabbables.enableTabbables()}},{key:"disable",value:function(){this.youtube&&this.youtube.disable(),this.tabbables&&this.tabbables.disableTabbables(),this.hasMoreInforBar&&this.element.querySelector(".".concat("more-info-bar")).classList.contains("active")&&this.element.querySelector(".".concat("more-info-bar__toggle")).click()}},{key:"destroy",value:function(){this.youtube&&this.youtube.beforeYouTubeModalClose(),this.youtubeTrigger&&this.youtubeTrigger.destroy(),this.detachEvents(),this.element.remove(),this.element=null}},{key:"attachEvents",value:function(){this.element.addEventListener(v.FP.CLICK,this.onClick)}},{key:"detachEvents",value:function(){this.element.removeEventListener(v.FP.CLICK,this.onClick)}},{key:"onClick",value:function(e){"function"==typeof this.callback&&(e.preventDefault(),this.callback(this.element,{media:this.media,details:this.details}))}},{key:"onYouTubeTriggerClick",value:function(){this.youTubeVideoModalContent=new L({videoId:this.media.youtube,videoTranscript:this.media.youtubeTranscript,details:this.details}),this.youTubeModal=new w.vK(this.media.youtube,this.youTubeVideoModalContent.getElement(),{afterModalOpen:this.youTubeVideoModalContent.initialize,beforeModalClose:this.onBeforeModalClose})}},{key:"onBeforeModalClose",value:function(){this.youTubeVideoModalContent.beforeYouTubeModalClose(),this.youtubeTrigger.focus()}},{key:"render",value:function(){return this.element}}]),e}(),P=[];function x(e){var t=new A(r.CAROUSEL_ITEM,e.media,{details:e.details,callback:e.callback,inModal:e.inModal});return P.push(t),t.render()}var Z=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.inModal,l=void 0!==a&&a,r=i.selectedGalleryItem,s=void 0===r?t[0].galleryItems[0]:r,o=i.theme,c=void 0===o?"":o;(0,n.Z)(this,e),this.galleryData=t,this.inModal=l,this.selectedGalleryItem=s,this.gallery=null,this.carouselElm=null,this.carousel=null,this.theme=c,this.createGallery=this.createGallery.bind(this),this.afterModalOpen=this.afterModalOpen.bind(this),this.onSlideCallback=this.onSlideCallback.bind(this),this.createGallery()}return(0,a.Z)(e,[{key:"createGallery",value:function(){this.gallery=l.jG.fromTemplate(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,l.dy)(o(),e).trim()}(this.theme)),this.carouselElm=this.gallery.querySelector("[".concat("data-preview-container","]")),this.setData(this.galleryData)}},{key:"setData",value:function(e){var t,i=this;this.galleryData=e;var n=(t=Array.prototype).concat.apply(t,(0,h.Z)(this.galleryData.map((function(e){return e.galleryItems}))));this.startIndex=n.findIndex((function(e){return e===i.selectedGalleryItem})),this.carousel=function(e,t,i,n){return e.forEach((function(e){e.inModal=n})),function(e,t,i,n){var a=y.Carousel.CAROUSEL_TYPES[n?"FIXED_BOTTOM":"BOTTOM"],r=new y.Carousel(e.map(x),{navigationType:a,startIndex:i});return l.jG.insert(r.getCarousel(),t),r}(e,t,i,n)}(n,this.carouselElm,this.startIndex,this.inModal),this.carousel.config.onSlideCallback=this.onSlideCallback}},{key:"updateData",value:function(e){this.destroy(!1),this.selectedGalleryItem=e[0].galleryItems[0],this.setData(e)}},{key:"afterModalOpen",value:function(){P[this.startIndex].afterModalOpen()}},{key:"onSlideCallback",value:function(e,t){P&&(P[e].enable(),P[t].disable())}},{key:"destroy",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.gallery.remove(),this.carousel.destroy(),P.forEach((function(e){e.destroy()})),P=[]}},{key:"render",value:function(){return this.gallery}}]),e}();(0,g.Z)(Z,"THEMES",{DARK:"gallery--dark"});var B=i(123),F=(window.mbNafta.ns("pageData").localization||{display:"Display"}).display,q=function(){function e(t){(0,n.Z)(this,e),this.galleryData=t,this.gallery=null,this.gallerySections=null,this.gallerySectionsElm=null,this.mediaElms=[],this.galleryItemObjects=[],this.createGallery=this.createGallery.bind(this),this.createGallerySection=this.createGallerySection.bind(this),this.createGalleryItem=this.createGalleryItem.bind(this),this.onSelectItem=this.onSelectItem.bind(this),this.createGallery()}return(0,a.Z)(e,[{key:"createGallery",value:function(){this.gallery=l.jG.fromTemplate((0,l.dy)(d(),(0,l.fV)()).trim()),this.gallerySectionsElm=this.gallery.querySelector("[".concat("data-gallery-items","]")),this.setData(this.galleryData)}},{key:"setData",value:function(e){this.galleryData=e,this.gallerySections=this.galleryData.map(this.createGallerySection),this.viewMore=new B.default(this.gallerySections),l.jG.append(this.viewMore.render(),this.gallerySectionsElm)}},{key:"updateData",value:function(e){this.destroy(!1),this.setData(e)}},{key:"createGallerySection",value:function(e){var t,i=e.type,n=e.galleryItems.map(this.createGalleryItem),a=l.jG.fromTemplate((t=i,(0,l.dy)(u(),t,"gallery-1-2"===t?'\n                <div class="gallery__column gallery__column--1"></div>\n                <div class="gallery__column gallery__column--2"></div>\n            ':"","gallery-2-1"===t?'\n                <div class="gallery__column gallery__column--2"></div>\n                <div class="gallery__column gallery__column--1"></div>\n            ':"").trim())),r=a.querySelector("[".concat("data-section-media","]"));return this.populateGallerySection(i,n,r),a}},{key:"populateGallerySection",value:function(e,t,i){var n=i.querySelector(".".concat("gallery__column--1")),a=i.querySelector(".".concat("gallery__column--2"));switch(e){case"gallery-1-2":t.forEach((function(e,t){l.jG.append(e.render(),0===t?n:a)}));break;case"gallery-2-1":t.forEach((function(e,t){l.jG.append(e.render(),2===t?n:a)}));break;default:t.forEach((function(e){l.jG.append(e.render(),i)}))}}},{key:"createGalleryItem",value:function(e){var t=e.media,i=t.imgAltText,n=t.imgLarge,a=t.imgSmall,l=t.videoTitle,s=t.youtube,o=e.details,c=o.captionHeading,u=o.modelTitle,d=u&&c?"".concat(F," ").concat(u," ").concat(c):i,h=new A(r.TILE,{imgLarge:n,imgSmall:a,imgAltText:d,videoTitle:l,isYouTubeTrigger:void 0!==s},{callback:this.onSelectItem.bind(this,e)});return this.galleryItemObjects.push(h),this.mediaElms.push(h.render()),this.carousel=null,h}},{key:"onSelectItem",value:function(e,t){var i,n=this;this.carousel=new Z(this.galleryData,{inModal:!0,selectedGalleryItem:e,theme:Z.THEMES.DARK}),(i=new y.Modal(void 0,{modalContent:this.carousel.render(),sizeLarge:y.Modal.SIZES.FULL_OVERLAY,callbacks:{afterOpen:this.carousel.afterModalOpen,beforeClose:function(){i.destroy(),i=null,n.carousel&&n.carousel.destroy()}}})).open({callingContainer:t})}},{key:"destroy",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.gallery.remove(),this.galleryItemObjects.forEach((function(e){e.destroy()})),this.galleryItemObjects=[],this.viewMore&&this.viewMore.destroy()}},{key:"render",value:function(){return this.gallery}}]),e}(),z=i(49632);function N(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function R(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?N(Object(i),!0).forEach((function(t){(0,g.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Y=window.mbNafta.ns("pageData").localization||{buildThisVehicle:"Build This Vehicle",download:"Download",galleryFilters:{all:"All",interior:"Interior",exterior:"Exterior",media:"Media"}},V=Y.buildThisVehicle,H=Y.download,K=Y.galleryFilters,U={ALL:"all",MEDIA:"media",IMAGE:"image"};function X(e){var t=[],i={type:"link",endpoint:"",target:"_self",rel:"noopener",className:"",label:""},n=e.media,a=n.byoCTA,l=n.wallpaperImage;return a&&t.push(R({},i,{},{endpoint:a,label:V,dataAnalyticsTrigger:"cta-build"})),l&&t.push(R({},i,{},{endpoint:l,target:"_blank",rel:"noopener",className:"download",label:H,type:"download"})),t}function J(e){return i=(t=e).media,n=i.thumbnailImage,a=i.overlayImage,l=t.multimediaAsset,r=l.imgAltText,s=l.imgLarge,{thumbnailImage:n,overlayImage:a,imgSmall:l.imgSmall,imgLarge:s,imgAltText:r,videoTitle:l.videoTitle,youtube:l.youtube,youtubeTranscript:l.youtubeTranscript};var t,i,n,a,l,r,s}function Q(e){return{modelTitle:(t=e.media).modelTitle,modelPath:t.modelPath,captionHeading:t.captionHeading,captionDescription:t.captionDescription,CTAs:X(e)};var t}function W(e){return{galleryCategory:e.galleryCategory,mediaType:e.mediaType,media:J(e),details:Q(e)}}function $(e){var t=function(e){var t=e.map((function(e){return e.galleryItems})).flatten().filter((function(e){return e.mediaType!==U.IMAGE})).map((function(){return U.MEDIA})).unique();return[U.ALL].concat(e.map((function(e){return e.galleryCategory})).unique()).concat(t).map((function(e){return{label:K[e],value:e}}))}(e);return{filters:t,data:e.map((function(e){return e.galleryItems=e.galleryItems.map(W),e}))}}var ee=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).endpoint,t=void 0===e?"":e;return t?fetch(t,{credentials:"same-origin"}).then((function(e){return e.json()})).then($):Promise.reject("Gallery endpoint not defined")},te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return t===U.MEDIA?function(e){var t={type:"gallery-2-up",galleryCategory:"",galleryItems:[]};return e.reduce((function(e,t){return e.concat(t.galleryItems.filter((function(e){return e.mediaType!==U.IMAGE})))}),[]).reduce((function(e,i,n){if(n%2==0){var a=Object.assign({},t);a.galleryItems.push(i),e.push(a)}else e[e.length-1].galleryItems.push(i);return e}),[])}(e):"all"===t?e:e.filter((function(e){return e.galleryCategory===t}))},ie=function(){function e(t){(0,n.Z)(this,e),this.element=t,this.data=null,this.isCarouselGallery=!1,this.galleryDataEndpoint=this.element.dataset.jsonEndpoint,this.enableFilters="false"===this.element.dataset.disableFilters,this.filteredData=null,this.filterBy={label:"All",value:"all"},this.getData().then(this.createGalleryFilter.bind(this)).then(this.createGallery.bind(this)).then(this.attachEvents.bind(this))}return(0,a.Z)(e,[{key:"getData",value:function(){var e=this;return ee({endpoint:this.galleryDataEndpoint}).then((function(t){e.data=t.data,e.filters=t.filters}))}},{key:"createGalleryFilter",value:function(){this.enableFilters&&(this.galleryFilter=new z.q(this.filters,{selectionCallback:this.filterData.bind(this)}),this.element.appendChild(this.galleryFilter.render()))}},{key:"createGallery",value:function(){l.sp.getState().small?(this.galleryModule=new Z(this.data),this.isCarouselGallery=!0):(this.galleryModule=new q(this.data),this.isCarouselGallery=!1),this.element.appendChild(this.galleryModule.render()),this.enableFilters&&(this.galleryFilter.updateToggleAriaAttribute(),this.galleryFilter.setAriaControlId(this.galleryModule.gallery.id))}},{key:"filterData",value:function(e){this.filteredData=te(this.data,e),this.galleryModule.updateData(this.filteredData)}},{key:"attachEvents",value:function(){l.sp.addResizeListener(this.onResizeHandler.bind(this))}},{key:"onResizeHandler",value:function(){this.galleryModule&&(this.isCarouselGallery&&!l.sp.getState().small||!this.isCarouselGallery&&l.sp.getState().small)&&(this.galleryFilter&&(this.galleryFilter.destroy(),this.createGalleryFilter()),this.galleryModule.destroy(),this.createGallery())}}]),e}()},49356:function(e,t,i){var n=i(15671),a=i(43144),l=i(14569),r=function(){function e(t){(0,n.Z)(this,e),this.element=t,this.carousels=null,this.init.bind(this)()}return(0,a.Z)(e,[{key:"init",value:function(){this.carousels=l.carouselParser.createCarousel(this.element)}}]),e}();t.Z=r},4835:function(e,t,i){var n=i(15671),a=i(43144),l=i(75402),r=function(){function e(t){(0,n.Z)(this,e),this.element=t,this.videoId=this.element.dataset.videoId,this.videoTranscript=this.element.dataset.videoTranscript,this.youTubeTrigger=null,this.youTubeModal=null,this.init()}return(0,a.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOM(),this.modalTriggerElem&&(this.youTubeTrigger=new l.cB(this.modalTriggerElem,this.videoId,this.onModalTriggerClick)),this.youTubeModalContent=new l.u9({videoId:this.videoId,videoTranscript:this.videoTranscript})}},{key:"setBindings",value:function(){this.onModalTriggerClick=this.onModalTriggerClick.bind(this),this.onBeforeModalClose=this.onBeforeModalClose.bind(this)}},{key:"cacheDOM",value:function(){this.modalTriggerElem=this.element.querySelector(".".concat("youtube-trigger"))}},{key:"onBeforeModalClose",value:function(){this.youTubeModalContent.beforeYouTubeModalClose(),this.youTubeTrigger.focus()}},{key:"onModalTriggerClick",value:function(){this.youTubeModal=new l.vK(this.videoId,this.youTubeModalContent.createYouTubeModalElement(),{afterModalOpen:this.youTubeModalContent.initialize,beforeModalClose:this.onBeforeModalClose})}}]),e}();t.Z=r},123:function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var n=i(4942),a=i(15671),l=i(43144),r=i(48218),s=i(61156),o=i(30168);function c(){var e=(0,o.Z)(['\n    <div class="view-more">\n        <div data-view-more-sections></div>\n        <div class="view-more-cta__container">\n            <button class="view-more-cta" data-analytics-trigger="cta">\n                <span data-view-more-label></span>\n                <span class="icon-mb"></span>\n            </button>\n        </div>\n    </div>\n']);return c=function(){return e},e}function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var d="view-more-cta--visible",h="view-more-cta--less",g="hide",y="hide--override-flex",v=window.mbNafta.ns("pageData").localization,f={initialSections:3,moreSections:2,disableViewLess:!1,disableLargePlus:!1,labels:{viewMore:v.viewMore||"View More",viewLess:v.viewLess||"View Less",viewAll:v.viewAll||"View All"}},m=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;(0,a.Z)(this,e),this.sections=t,this.sectionsElm=null,this.viewCta=null,this.viewCtaLabel=null,this.onPageLoad=!0,this.config=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},f,{},i),this.visibleSections=this.config.initialSections,this.isLargePlus=s.sp.gte(s.sp.SIZES.LARGE),this.onClick=this.onClick.bind(this),this.onScreenResize=this.onScreenResize.bind(this),this.destroy=this.destroy.bind(this),this.createViewMoreCta()}return(0,l.Z)(e,[{key:"createViewMoreCta",value:function(){this.viewMore=s.jG.fromTemplate((0,s.dy)(c()).trim()),this.sectionsElm=this.viewMore.querySelector("[".concat("data-view-more-sections","]")),this.viewCta=this.viewMore.querySelector(".".concat("view-more-cta")),this.addSections(),this.sections.length>this.config.initialSections&&(this.viewCtaLabel=this.viewCta.querySelector("[".concat("data-view-more-label","]")),this.setMoreCtaLabel(),this.attachEvents(),this.viewCta.classList.add(d),this.config.disableLargePlus&&this.updateEnabled())}},{key:"setMoreCtaLabel",value:function(){this.sections.length-this.visibleSections>this.config.moreSections?this.viewCtaLabel.innerText=this.config.labels.viewMore:this.viewCtaLabel.innerText=this.config.labels.viewAll}},{key:"addLessCtaClass",value:function(){this.viewCta.classList.add(h)}},{key:"removeLessCtaClass",value:function(){this.viewCta.classList.remove(h)}},{key:"addSections",value:function(){var e=this;[].slice.call(this.sections).forEach((function(t,i){var n=new s.cs(t);i>e.visibleSections-1?t.classList.add(g):t.classList.remove(g),i>=e.sectionsElm.childNodes.length&&s.jG.append(t,e.sectionsElm),e.onPageLoad||i!==e.visibleSections-1||n.allTabbables[0].focus()})),this.onPageLoad=!1}},{key:"removeSections",value:function(){var e=this;[].slice.call(this.sections).forEach((function(t,i){i>e.visibleSections-1&&t.classList.add(g)}))}},{key:"onClick",value:function(e){var t=this;if(e.preventDefault(),this.visibleSections===this.sections.length)this.visibleSections=this.config.initialSections,this.scrollToSectionsTop().then((function(){t.setMoreCtaLabel(),t.removeLessCtaClass(),t.removeSections()}));else{var i=this.visibleSections;this.sections.length-this.visibleSections<=this.config.moreSections?(this.visibleSections=this.sections.length,this.viewCtaLabel.innerText=this.config.labels.viewLess,this.config.disableViewLess?this.viewCta.classList.remove(d):this.addLessCtaClass()):(this.visibleSections=this.visibleSections+this.config.moreSections,this.setMoreCtaLabel()),this.addSections(),this.sections[i]&&this.sections[i].firstElementChild.firstElementChild.focus()}}},{key:"scrollToSectionsTop",value:function(){return(0,s.X5)(this.sections[0].getBoundingClientRect().top+window.pageYOffset)}},{key:"onScreenResize",value:function(){var e=s.sp.gte(s.sp.SIZES.LARGE);this.isLargePlus!==e&&(this.isLargePlus=e,this.updateEnabled())}},{key:"updateEnabled",value:function(){this.isLargePlus?(this.sections.forEach((function(e){e.classList.add(y)})),this.viewCta.classList.add(g)):(this.sections.forEach((function(e){e.classList.remove(y)})),this.viewCta.classList.remove(g))}},{key:"attachEvents",value:function(){this.viewCta.addEventListener(r.FP.CLICK,this.onClick),this.config.disableLargePlus&&s.sp.addBreakpointListener(this.onScreenResize)}},{key:"detachEvents",value:function(){this.viewCta.removeEventListener(r.FP.CLICK,this.onClick),s.sp.removeBreakpointListener(this.onScreenResize)}},{key:"destroy",value:function(){this.detachEvents(),this.viewMore.remove()}},{key:"render",value:function(){return this.viewMore}}]),e}()}}]);
//# sourceMappingURL=3adc3a7bc762a15570d9.bundle.js.map