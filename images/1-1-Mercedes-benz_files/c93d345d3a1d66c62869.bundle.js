"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[2722],{66066:function(e,t,i){i.d(t,{Z:function(){return u}});var n=i(15671),s=i(43144),r=i(61156),a=i(6080),o=i(82051),l=i(83224),c=i(30168);function h(){var e=(0,c.Z)(['\n    <picture class="color-picker-hero__picture">\n        <source media="(max-width: 767px)" srcset="','">\n        <source media="(min-width: 768px)" srcset="','">\n    </picture>\n']);return h=function(){return e},e}var u=function(){function e(t){(0,n.Z)(this,e),this.element=t,this.id="picker_".concat(this.element.dataset.id),this.init()}return(0,s.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOM(),this.attachEvents(),this.vehicleData=window.mbNafta.ns("pageData").colorPickerHero[this.id].vehicle,this.buildPath=window.mbNafta.ns("pageData").colorPickerHero[this.id].buttonsPath.build,this.imgDimensions=null,this.colorPickerHeroVehiclePictureElms=null,this.mediaServerApi=o.W.getInstance(),this.initColorPicker(),this.setVHVariable()}},{key:"setBindings",value:function(){this.onExteriorColorUpdate=this.onExteriorColorUpdate.bind(this),this.setVHVariable=this.setVHVariable.bind(this)}},{key:"cacheDOM",value:function(){this.colorLabelElm=this.element.querySelector(".".concat("color-picker-hero__color")),this.colorPickerHeroVehicleElm=this.element.querySelector(".".concat("color-picker-hero__vehicle"))}},{key:"attachEvents",value:function(){r.sp.addResizeListener(this.setVHVariable)}},{key:"initColorPicker",value:function(){this.colorPicker=new a.z({baseClass:"color-picker-hero",buildPath:this.buildPath,content:{},element:this.element,loadVehicleImages:this.onExteriorColorUpdate,vehicleData:this.vehicleData})}},{key:"onExteriorColorUpdate",value:function(e,t){this.vehicleData.options.exterior.PAINT[0].id=e,this.colorLabelElm&&t&&(this.colorLabelElm.textContent=t),this.renderLoader(),this.getVehicleImages()}},{key:"setVHVariable",value:function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vhVar","".concat(e,"px"))}},{key:"renderLoader",value:function(){this.loader=new l.T,r.jG.append(this.loader.render(),this.colorPickerHeroVehicleElm)}},{key:"getVehicleImages",value:function(){var e=this;this.mediaServerApi.getBuildImage(this.vehicleData,{view:o.W.VIEW_TYPES.EXTERIOR,pov:o.W.POV_TYPES.FRONT,presetCategory:o.W.PRESET_CATEGORIES.MODEL}).then((function(t){return e.preloadImages(t.respObj)}))}},{key:"preloadImages",value:function(e){var t=this,i=new Image;i.onload=function(){t.imgDimensions={width:i.width,height:i.height},i.onload=null,i.classList.add("color-picker-hero__image"),i.setAttribute("alt",t.vehicleData.meta.altTag),t.renderVehicle(e,i)},i.src=r.sp.getState().small?e.small.retina:e.large.retina}},{key:"renderVehicle",value:function(e,t){var i,n,s=null!=this.colorPickerHeroVehiclePictureElms;r.jG.append((i=e.large.retina,n=e.small.retina,(0,r.e2)(h(),n||i,i||n))({getNode:!0}),this.colorPickerHeroVehicleElm),this.colorPickerHeroVehiclePictureElms=Array.from(this.colorPickerHeroVehicleElm.querySelectorAll(".".concat("color-picker-hero__picture"))),r.jG.append(t,this.colorPickerHeroVehiclePictureElms[this.colorPickerHeroVehiclePictureElms.length-1]),this.loader.destroy(),s&&this.colorPickerHeroVehicleElm.removeChild(this.colorPickerHeroVehiclePictureElms.shift())}}]),e}()},21783:function(e,t,i){i.d(t,{Z:function(){return u}});var n=i(15671),s=i(43144),r=i(61156),a=i(14569),o="featured-cta-group__carousel",l="featured-cta-group__mosaic",c="carousel",h="mosaic",u=function(){function e(t){(0,n.Z)(this,e),this.element=t,this.view=h,this.carouselInstance=null,this.init()}return(0,s.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOM(),this.attachEvents(),this.carouselInstance=a.carouselParser.createCarousel(this.element)[0].carousel,this.render(),this.element.classList.add("featured-cta-group--ready")}},{key:"setBindings",value:function(){this.onResize=this.onResize.bind(this)}},{key:"cacheDOM",value:function(){this.itemsContainer=this.element.querySelector(".".concat("featured-cta-group__list"))}},{key:"attachEvents",value:function(){r.sp.addResizeListener(this.onResize)}},{key:"detachEvents",value:function(){r.sp.removeResizeListener(this.onResize)}},{key:"onResize",value:function(){this.render()}},{key:"render",value:function(){r.sp.gte(r.sp.SIZES.LARGE)?this.renderMosaic():this.renderCarousel()}},{key:"renderMosaic",value:function(){var e;this.view!==h&&(this.view=h,this.itemsContainer.classList.replace(o,l),null===(e=this.carouselInstance)||void 0===e||e.deactivate())}},{key:"renderCarousel",value:function(){var e;this.view!==c&&(this.view=c,this.itemsContainer.classList.replace(l,o),null===(e=this.carouselInstance)||void 0===e||e.activate())}}]),e}()},33180:function(e,t,i){i.d(t,{Z:function(){return c}});var n=i(15671),s=i(43144),r=i(61156),a="full-height-hero__countdowntimer",o="full-height-hero__hide-countdowntimer",l=["full-height-hero__countdowntimer-timer-days","full-height-hero__countdowntimer-timer-hours","full-height-hero__countdowntimer-timer-minutes","full-height-hero__countdowntimer-timer-seconds"],c=function(){function e(t){(0,n.Z)(this,e),this.element=t,this.copyContainerStyles={},this.id=null,this.init(),this.getHeading()&&this.startTimeIsInPast()&&this.endTimeIsInFuture()&&this.initCountDown()}return(0,s.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOM(),this.attachEvents(),this.onScreenResize()}},{key:"initCountDown",value:function(){var e=this;this.render(0),this.updateTitle();try{this.totalSecondsRemaining=this.calculateSecondsRemaining(),window.mbNafta.pageData.timeouts=[]}catch(e){console.log("Unable to get countdown settings."),this.totalSecondsRemaining=3600}this.timer=null,this.on=!1,this.startTimeIsInPast()&&this.endTimeIsInFuture()&&(this.startTimer(),this.showElement(),document.addEventListener("visibilitychange",(function(){window.mbNafta.pageData.timeouts.map((function(e){return clearTimeout(e)})),e.totalSecondsRemaining=e.calculateSecondsRemaining(),e.on=!1,e.startTimer()})))}},{key:"setBindings",value:function(){this.onScreenResize=this.onScreenResize.bind(this)}},{key:"cacheDOM",value:function(){var e=this;this.copyContainerElm=this.element.querySelector(".".concat("full-height-hero__interior")),this.countDownElement=this.element.querySelector(".".concat(a)),this.countDownTimerElementTitle=this.element.querySelector(".".concat("full-height-hero__countdowntimer-title")),this.id=this.countDownElement.getAttribute("id"),this.countDownTimerUnitList=[],l.map((function(t){return e.countDownTimerUnitList.push(e.element.querySelector(".".concat(t))),t}))}},{key:"attachEvents",value:function(){r.sp.addResizeListener(this.onScreenResize)}},{key:"onScreenResize",value:function(){var e;r.Gu.isEmpty(this.copyContainerStyles)&&(this.copyContainerStyles=null!==(e=window.getComputedStyle(this.copyContainerElm))&&void 0!==e?e:{}),this.element.style.setProperty("--cchVar",this.copyContainerStyles.getPropertyValue("height"))}},{key:"convertSecondsToHours",value:function(e){var t=Math.floor(e/86400).toString().padStart(2,"0"),i=Math.floor(e%86400/3600).toString().padStart(2,"0"),n=Math.floor(e%3600/60).toString().padStart(2,"0"),s=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(i,":").concat(n,":").concat(s)}},{key:"showElement",value:function(){this.element.querySelector(".".concat(a)).classList.remove("".concat(o))}},{key:"hideElement",value:function(){this.element.querySelector(".".concat(a)).classList.add("".concat(o))}},{key:"getCountdownEndTime",value:function(){return window.mbNafta.ns("pageData","homePageHero","countdown")[this.id].countdownEndTime}},{key:"getCountdownStartTime",value:function(){return window.mbNafta.ns("pageData","homePageHero","countdown")[this.id].countdownStartTime}},{key:"getHeading",value:function(){return window.mbNafta.ns("pageData","homePageHero","countdown")[this.id].countdownHeading}},{key:"calculateSecondsRemainingFromStartTime",value:function(){return this.getCountdownEndTime()-this.getCountdownStartTime()}},{key:"calculateSecondsRemaining",value:function(){return this.getCountdownEndTime()-Math.floor(Date.now()/1e3)}},{key:"startTimeIsInPast",value:function(){return this.getCountdownStartTime()<Math.floor(Date.now()/1e3)}},{key:"endTimeIsInFuture",value:function(){return this.getCountdownEndTime()>Math.floor(Date.now()/1e3)}},{key:"accurateTimer",value:function(e,t){var i,n;i=(new Date).getTime()+t,n=setTimeout((function s(){i+=t,e(),clearTimeout(n),n=setTimeout(s,i-(new Date).getTime()),window.mbNafta.pageData.timeouts.push(n)}),i-(new Date).getTime()),window.mbNafta.pageData.timeouts.push(n)}},{key:"startTimer",value:function(){var e=this;this.on||this.accurateTimer((function(){e.totalSecondsRemaining>1?e.totalSecondsRemaining-=1:(e.stopTimer(),e.hideElement()),e.on=!0,e.render(e.totalSecondsRemaining)}),1e3)}},{key:"stopTimer",value:function(){this.on=!1,window.mbNafta.pageData.timeouts.map((function(e){return clearTimeout(e)}))}},{key:"updateTitle",value:function(){this.countDownTimerElementTitle.innerHTML=this.getHeading()}},{key:"render",value:function(e){var t=this;this.convertSecondsToHours(e).split(":").map((function(e,i){return t.countDownTimerUnitList[i].innerHTML=e,e}))}}]),e}()},87407:function(e,t,i){i.d(t,{Z:function(){return v}});var n=i(15671),s=i(43144),r=i(61156),a=i(48218),o="aria-disabled",l="tabindex",c="vehicle-specs-comparison-tile__tile-container--transition",h="home-page-slider-hero__range--transition",u="left",d="right",m={small:.0328125,large:.04427083,xlarge:24,xxlarge:24},v=function(){function e(t){(0,n.Z)(this,e),this.element=t,this.currentScreenState=r.sp.getCurrentState(),this.heroCopyStyles={},this.presentedSide="",this.imageAspectRatio=null,this.elementComputedWidth=window.getComputedStyle(this.element).getPropertyValue("width"),this.element&&"100%"===this.elementComputedWidth?this.addObservers():this.init()}return(0,s.Z)(e,[{key:"init",value:function(){this.setBindings(),this.pruneTiles(),this.cacheDOMElements(),this.attachEvents(),this.setVHVariable(),this.setA11yButtonPosition(),this.setElementsOnScreen(),this.adjustSliderHandlePosition()}},{key:"setBindings",value:function(){this.moveElementsWithCursor=this.moveElementsWithCursor.bind(this),this.onA11yButtonClick=this.onA11yButtonClick.bind(this),this.onBreakpointCross=this.onBreakpointCross.bind(this),this.onImageClipTransitionEnd=this.onImageClipTransitionEnd.bind(this),this.onImageLoad=this.onImageLoad.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onObserver=this.onObserver.bind(this),this.onRangeTransitionEnd=this.onRangeTransitionEnd.bind(this),this.onScreenResize=(0,r.P2)(this.onScreenResize.bind(this),10),this.onTouchStart=this.onTouchStart.bind(this)}},{key:"pruneTiles",value:function(){[].slice.call(this.element.querySelectorAll(".".concat("vehicle-specs-comparison-tile"))).forEach((function(e,t){t>=2&&e.remove()}))}},{key:"cacheDOMElements",value:function(){this.imageClip=this.element.querySelector("#".concat("vehicle-specs-comparison-tile__left-tile-container")),this.imageContainer=this.element.querySelector(".".concat("vehicle-specs-comparison-tile__image-container")),this.accessibleButtons=[].slice.call(this.element.querySelectorAll(".".concat("home-page-slider-hero__accessible-button"))),this.range=this.element.querySelector(".".concat("home-page-slider-hero__range")),this.sliderElms=[].slice.call(this.element.querySelectorAll(".".concat("slider-image"))),this.imageElm=this.sliderElms[0],this.tileCtas=[].slice.call(this.element.querySelectorAll(".".concat("vehicle-specs-comparison-tile__cta"))),this.specTiles=[].slice.call(this.element.querySelectorAll(".".concat("vehicle-specs-comparison-tile__specs"))),this.heroCopyElm=this.element.querySelector(".".concat("full-height-hero__copy-container")),this.navItems=document.querySelector(".".concat("hero-flipbook__nav-selector"))}},{key:"setA11yButtonPosition",value:function(){var e;r.Gu.isEmpty(this.heroCopyStyles)&&(this.heroCopyStyles=null!==(e=window.getComputedStyle(this.heroCopyElm))&&void 0!==e?e:{}),this.element.style.setProperty("--cchVar",this.heroCopyStyles.getPropertyValue("height"))}},{key:"onImageLoad",value:function(){var e=this;this.accessibleButtons.forEach((function(t){t.addEventListener(a.FP.CLICK,e.onA11yButtonClick)})),this.setImageAspectRatio(),this.evalImage()}},{key:"addObservers",value:function(){0===this.element.offsetWidth&&(this.observer=new ResizeObserver(this.onMutation.bind(this)),this.observer.observe(this.element,{attributes:!0}))}},{key:"onMutation",value:function(){this.element.offsetWidth>0&&this.mutationsComplete()}},{key:"mutationsComplete",value:function(){this.init(),this.observer.disconnect()}},{key:"evalImage",value:function(){var e;if(this.imageAspectRatio&&1!==this.imageAspectRatio||this.setImageAspectRatio(),r.sp.isLandscape&&!r.sp.gte(r.sp.SIZES.XLARGE)){var t=this.element.getBoundingClientRect(),i=t.height;e=t.width/i}else e=this.elemWidth/window.innerHeight;var n=e>this.imageAspectRatio?"add":"remove";this.sliderElms.forEach((function(e){e.classList[n]("slider-image__full-width")}))}},{key:"setImageAspectRatio",value:function(){this.imageAspectRatio=Math.round(this.imageElm.naturalWidth/this.imageElm.naturalHeight*1e3)/1e3}},{key:"onScreenResize",value:function(){this.setVHVariable(),this.maintainRangePosition(),this.evalImage(),this.setA11yButtonPosition(),this.setElementsOnScreen()}},{key:"onBreakpointCross",value:function(e){this.currentScreenState=e}},{key:"onObserver",value:function(e){var t;e[0].isIntersecting&&(r.Jw.dispatchEvent(r.Jw.createCustomEvent(a.fD.FORCE_ASSET_LOAD,{detail:{lazyloaderIdSet:[(null===(t=this.imageContainer)||void 0===t?void 0:t.getAttribute("data-lazyloader-id"))||""]}})),r.sw.removeObserver(this.vObserver))}},{key:"setVHVariable",value:function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vhVar","".concat(e,"px"))}},{key:"maintainRangePosition",value:function(){switch(this.presentedSide){case u:this.range.style.left="".concat(this.imageClip.offsetWidth-this.getDragStop(),"px");break;case d:this.range.style.left="".concat(this.getDragStop(),"px");break;default:this.range.style.left="".concat(this.elemWidth/2,"px")}}},{key:"getThresholds",value:function(){var e=this.elemWidth/2,t=e/4,i=this.range.getBoundingClientRect(),n=i.width,s=i.x;return{leftSnapPosition:this.getDragStop(),leftThreshold:e-t,midpoint:e,rangePosition:s+n/2,rightSnapPosition:this.elemWidth-this.getDragStop(),rightThreshold:e+t}}},{key:"getRangeSnapPositions",value:function(){var e=this.getThresholds(),t=e.leftSnapPosition,i=e.leftThreshold,n=e.midpoint,s=e.rangePosition,a=e.rightSnapPosition,o=e.rightThreshold;return s<i?{rangePosition:t,clipPosition:r.sp.gte(r.sp.SIZES.XLARGE)?"":"0"}:s>o?{rangePosition:a,clipPosition:r.sp.gte(r.sp.SIZES.XLARGE)?"":this.elemWidth}:{rangePosition:n}}},{key:"getRangeOnClickSnapPosition",value:function(e){var t=e.currentTarget,i=this.getDragStop();return{rangePosition:t.dataset.side===d?this.elemWidth-i:i,clipPosition:t.dataset.side===d?this.elemWidth:"0"}}},{key:"getDragStop",value:function(){var e,t=Math.ceil((null===(e=this.navItems)||void 0===e?void 0:e.getBoundingClientRect().width)/2)||0;return r.sp.gte(r.sp.SIZES.XLARGE)?m[this.currentScreenState]+t:Math.round(this.elemWidth*m[this.currentScreenState]+t)}},{key:"fireAnalyticsEvent",value:function(e){var t,i,n,s=this.getThresholds(),r=s.rangePosition,a=s.leftThreshold,o=s.rightThreshold,l=u,c=d;"BUTTON"===e.target.nodeName?(i=e.target.dataset.side,n=e.target.dataset.side===d?"50":"-50"):r<a?(i=l,n="-50"):r>o?(i=c,n="50"):(i="center",n="0"),null===(t=window._satellite)||void 0===t||t.track("heroSliderMoved",{direction:i,stopId:n})}},{key:"moveElementsWithCursor",value:function(e){e.preventDefault(),this.moveSliderElements({rangePosition:e.clientX||e.changedTouches[0].clientX})}},{key:"onA11yButtonClick",value:function(e){var t=this,i=e.currentTarget.dataset.side,n=this.getDragStop();this.prepTransitions(),requestAnimationFrame((function(){t.moveSliderElements({rangePosition:i===d?n:t.elemWidth-n,clipPosition:i===d?"0":t.elemWidth}),t.fireAnalyticsEvent(e)}))}},{key:"onTouchStart",value:function(e){e.preventDefault(),e.changedTouches&&(this.element.addEventListener(a.FP.TOUCHMOVE,this.moveElementsWithCursor),this.element.addEventListener(a.FP.TOUCHEND,this.onMouseUp))}},{key:"onMouseDown",value:function(e){e.preventDefault(),e.clientX&&(this.element.addEventListener(a.FP.MOUSEMOVE,this.moveElementsWithCursor,!1),this.element.addEventListener(a.FP.MOUSEUP,this.onMouseUp))}},{key:"onMouseUp",value:function(e){var t=this;this.prepTransitions(),requestAnimationFrame((function(){t.setElementsOnScreen(e)}))}},{key:"onImageClipTransitionEnd",value:function(){this.imageClip.removeEventListener(a.FP.TRANSITION_END,this.onImageClipTransitionEnd),this.imageClip.classList.remove(c),this.setPresentedSlide()}},{key:"onRangeTransitionEnd",value:function(){this.range.removeEventListener(a.FP.TRANSITION_END,this.onRangeTransitionEnd),this.range.classList.remove(h)}},{key:"prepTransitions",value:function(){this.range.addEventListener(a.FP.TRANSITION_END,this.onRangeTransitionEnd),this.range.classList.add(h),this.imageClip.addEventListener(a.FP.TRANSITION_END,this.onImageClipTransitionEnd),this.imageClip.classList.add(c)}},{key:"setPresentedSlide",value:function(){var e=this;this.tileCtas.forEach((function(t){t.dataset.side===e.presentedSide?(t.setAttribute(o,"false"),t.removeAttribute(l)):(t.setAttribute(o,"true"),t.setAttribute(l,"-1"))}))}},{key:"attachEvents",value:function(){var e;r.sp.addResizeListener(this.onScreenResize),r.sp.addBreakpointListener(this.onBreakpointCross),this.vObserver=r.sw.addObserver(this.element,this.onObserver,{threshold:0}),this.range.addEventListener(a.FP.MOUSEDOWN,this.onMouseDown),this.range.addEventListener(a.FP.TOUCHSTART,this.onTouchStart),null===(e=this.imageElm)||void 0===e||e.addEventListener(a.FP.LOAD,this.onImageLoad)}},{key:"detachEvents",value:function(e){e.clientX&&(this.element.removeEventListener(a.FP.MOUSEMOVE,this.moveElementsWithCursor,!1),this.element.removeEventListener(a.FP.MOUSEUP,this.onMouseUp)),e.changedTouches&&(this.element.removeEventListener(a.FP.TOUCHMOVE,this.moveElementsWithCursor),this.element.removeEventListener(a.FP.TOUCHEND,this.onMouseUp))}},{key:"moveSliderElements",value:function(e){var t=e.rangePosition,i=e.clipPosition,n=(void 0===i?null:i)||t;this.range.style.left="".concat(t,"px"),this.imageClip.style.clipPath="inset(0px ".concat(this.elemWidth-n,"px 0px 0px)"),this.specTiles[1].style.opacity=1-n/this.elemWidth*2,this.specTiles[0].style.opacity=2*(n/this.elemWidth-.5),"0"===n?this.presentedSide=d:n===this.elemWidth?this.presentedSide=u:this.presentedSide=""}},{key:"setElementsOnScreen",value:function(e){e&&(e.preventDefault(),this.detachEvents(e),this.fireAnalyticsEvent(e)),this.moveSliderElements(this.getRangeSnapPositions())}},{key:"adjustSliderHandlePosition",value:function(){if(this.navItems){var e=this.navItems.getBoundingClientRect().height;this.range.style.marginTop="".concat(e/2+35,"px")}}},{key:"elemWidth",get:function(){var e="100%"===this.elementComputedWidth?this.element.offsetWidth:this.elementComputedWidth;return parseInt(e,10)}}]),e}()},1224:function(e,t,i){i.d(t,{Z:function(){return g}});var n=i(4942),s=i(15671),r=i(43144),a=i(61156),o=i(82799),l=i(90921);function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var h={clickCallback:a.ZT,clickOutsideCallback:a.ZT},u=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.Z)(this,e),this.element=t,this.index=i,this.config=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},h,{},r),this.init()}return(0,r.Z)(e,[{key:"init",value:function(){this.setBindings()}},{key:"setBindings",value:function(){this.onClick=this.onClick.bind(this),this.onClickOutside=this.onClickOutside.bind(this)}},{key:"onClick",value:function(){this.config.clickCallback(this.index)}},{key:"onClickOutside",value:function(){this.config.clickOutsideCallback(this.index)}},{key:"setActive",value:function(e){this.element.classList[e?"add":"remove"]("image-hotspot__marker--active")}},{key:"destroy",value:function(){this.detachEvents()}}]),e}(),d=i(30168);function m(){var e=(0,d.Z)(["\n    <div class=\"image-hotspot__bubble\" data-analytics-container=\"{'blade': 'image-hotspot-bubble'}\">\n        ","\n        ","\n        ",'\n        <span class="image-hotspot__bubble-nub"></span>\n    </div>\n']);return m=function(){return e},e}function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var f="image-hotspot__bubble-heading",b={bubbleContainerSelector:"",disclaimerLabel:window.mbNafta.ns("pageData","localization").disclaimer||"Disclaimer",responsiveBreakpoint:a.sp.SIZES.LARGE,smallOffsetPct:3.28125},g=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,s.Z)(this,e),this.element=t,this.config=p({},b,{},i),this.element&&this.element.dataset){var n=this.element.dataset,r=n.bubbleContainerSelector,o=n.responsiveBreakpoint;this.config.bubbleContainerSelector=r||this.config.bubbleContainerSelector,this.config.responsiveBreakpoint=o||this.config.responsiveBreakpoint}this.state={currentScreenStateGte:a.sp.gte(this.config.responsiveBreakpoint),activeMarkerIndex:null},this.markers=[],this.bubbleElm=null,this.init()}return(0,r.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOMElements(),this.setBubbleContainer(),this.attachEvents(),this.createMarkers()}},{key:"setBindings",value:function(){this.onScreenResize=this.onScreenResize.bind(this),this.onBreakpointCross=this.onBreakpointCross.bind(this),this.markerClickCallback=this.markerClickCallback.bind(this),this.markerClickOutsideCallback=this.markerClickOutsideCallback.bind(this),this.onBeforeBlur=this.onBeforeBlur.bind(this),this.onDisclaimerMarkerClick=this.onDisclaimerMarkerClick.bind(this)}},{key:"cacheDOMElements",value:function(){this.bodyElm=window.document.querySelector("body")}},{key:"setBubbleContainer",value:function(){var e=this.config.bubbleContainerSelector;e&&(this.bubbleContainerElm=document.querySelector(e)),this.bubbleContainerElm||(this.bubbleContainerElm=this.element)}},{key:"attachEvents",value:function(){a.sp.addResizeListener(this.onScreenResize),a.sp.addBreakpointListener(this.onBreakpointCross),window.addEventListener(o.Z.OPEN_DISCLAIMER,this.onDisclaimerMarkerClick)}},{key:"detachEvents",value:function(){a.sp.removeResizeListener(this.onScreenResize),a.sp.removeBreakpointListener(this.onBreakpointCross),this.markers.forEach((function(e){e.clickOutsideHandler.destroy()})),this.detachBubbleEvents()}},{key:"updateEventListeners",value:function(){var e=this.state.activeMarkerIndex;this.markers[e].clickOutsideHandler.setIgnoreElems(this.bubbleElm),this.tabOutsideHandler=new a.yM(this.bubbleElm,{onBeforeBlur:this.onBeforeBlur})}},{key:"createMarkers",value:function(){var e=this;[].slice.call(this.element.querySelectorAll(".".concat("image-hotspot__marker"))).forEach((function(t,i){var n=t.dataset,s=n.cta,r=n.ctaUrl,o=n.description,l=n.disclaimers,c=n.heading,h=n.headingUrl,d=n.leftLarge,m=n.leftSmall,v=n.topLarge,p=n.topSmall,f=new u(t,i,{clickCallback:e.markerClickCallback,clickOutsideCallback:e.markerClickOutsideCallback});e.markers.push({markerObj:f,markerElm:t,content:{cta:s,ctaUrl:r,description:o,disclaimers:l,heading:c,headingUrl:h},coords:{leftLarge:d,leftSmall:m,topLarge:v,topSmall:p},clickOutsideHandler:new a.Lp(t,f.onClick,f.onClickOutside)})}))}},{key:"onScreenResize",value:function(){this.bubbleElm&&this.positionBubble()}},{key:"onBreakpointCross",value:function(){var e=this.state.currentScreenStateGte,t=this.config.responsiveBreakpoint,i=a.sp.gte(t);e!==i&&this.clearBubble(),this.setState({currentScreenStateGte:i})}},{key:"markerClickCallback",value:function(e){var t=this.state.activeMarkerIndex;this.clearBubble(),e!==t&&(this.setState({activeMarkerIndex:e}),this.addBubble())}},{key:"markerClickOutsideCallback",value:function(e){e===this.state.activeMarkerIndex&&this.clearBubble()}},{key:"onBeforeBlur",value:function(){var e=this.state.activeMarkerIndex;this.markers[e].markerElm.focus(),this.clearBubble()}},{key:"onDisclaimerMarkerClick",value:function(e){e.detail.currentTarget&&this.clearBubble()}},{key:"addBubbleDisclaimers",value:function(){var e=this,t=this.state.activeMarkerIndex,i=this.markers[t].content,n=this.config.disclaimerLabel,s=this.bubbleElm.querySelector(".".concat("image-hotspot__bubble-descr"))||this.bubbleElm.querySelector(".".concat(f));this.bubbleDisclaimers=[],i.disclaimers&&i.disclaimers.length>0&&i.disclaimers.split(",").forEach((function(t){var i=t.split("|"),r=new l.d({autoNum:"true"===i[1],disclaimerLabel:n,legend:i[0]});e.bubbleDisclaimers.push(r),a.jG.insertAdjacentElement(r.element,s,a.jG.POSITIONS.BEFORE_END)}))}},{key:"removeBubbleDisclaimers",value:function(){this.bubbleDisclaimers&&this.bubbleDisclaimers.length>0&&this.bubbleDisclaimers.forEach((function(e){e.destroy()}))}},{key:"addBubble",value:function(){var e,t,i,n,s,r,o=this.state,l=o.currentScreenStateGte,c=o.activeMarkerIndex,h=this.markers[c],u=h.content,d=h.coords;this.bubbleElm=(t=(e=u).heading,i=e.headingUrl,n=e.description,s=e.cta,r=e.ctaUrl,(0,a.e2)(m(),i?'<a href="'.concat(i,'" class="image-hotspot__bubble-heading" data-analytics-trigger="link-hero-flyout">\n                <span>').concat(t,"</span>\n            </a>"):'<span class="image-hotspot__bubble-heading image-hotspot__bubble-heading--unlinked" tabindex="-1">'.concat(t,"</span>"),n?'<span class="image-hotspot__bubble-descr">'.concat(n,"</span>"):"",s&&r?'<a class="link link_plain-link image-hotspot__bubble-cta" href="'.concat(r,'" data-analytics-trigger="cta-hero-flyout">').concat(s,"</a>"):""))({getNode:!0}),this.bubbleNubElm=this.bubbleElm.querySelector(".".concat("image-hotspot__bubble-nub")),this.bubbleElm.style.top="".concat(l?d.topLarge:d.topSmall,"%"),a.jG.append(this.bubbleElm,this.bubbleContainerElm),this.addBubbleDisclaimers(),this.updateEventListeners(),this.positionBubble(),this.setFocus(),this.markers[c].markerObj.setActive(!0)}},{key:"positionBubble",value:function(){var e=this.state,t=e.currentScreenStateGte,i=e.activeMarkerIndex,n=this.markers[i],s=n.coords,r=n.markerElm,a=this.config.smallOffsetPct;this.resetBubblePosition();var o=this.bubbleElm.getBoundingClientRect(),l=t?s.leftLarge:s.leftSmall,c=this.bodyElm.offsetWidth*a/100;if(o.x<c){this.bubbleElm.style.left="calc(".concat(l,"% + ").concat(c-o.x+r.offsetWidth/2,"px)");var h=c-o.x;this.bubbleNubElm.style.left="calc(50% - ".concat(h,"px)")}else if(o.x+o.width>this.bodyElm.offsetWidth-c){var u=o.x+o.width-(this.bodyElm.offsetWidth-c);this.bubbleElm.style.left="calc(".concat(l,"% - ").concat(u-r.offsetWidth/2,"px)"),this.bubbleNubElm.style.left="calc(50% + ".concat(u,"px)")}}},{key:"resetBubblePosition",value:function(){var e=this.state,t=e.currentScreenStateGte,i=e.activeMarkerIndex,n=this.markers[i],s=n.coords,r=n.markerElm,a="".concat(t?s.leftLarge:s.leftSmall,"%");this.bubbleElm.style.left="calc(".concat(a," + ").concat(r.offsetWidth/2,"px)"),this.bubbleNubElm.style.left=""}},{key:"clearBubble",value:function(){var e=this.state.activeMarkerIndex;this.removeBubbleDisclaimers(),this.bubbleElm&&(this.bubbleElm.remove(),this.bubbleElm=null,this.setState({activeMarkerIndex:null}),this.markers[e].markerObj.setActive(!1)),this.tabOutsideHandler&&(this.tabOutsideHandler=this.tabOutsideHandler.destroy())}},{key:"setFocus",value:function(){var e=this.state.activeMarkerIndex,t=this.markers[e].content,i=t.cta,n=t.ctaUrl;(t.headingUrl||i&&n?this.bubbleElm.querySelector("a"):this.bubbleElm.querySelector(".".concat(f))).focus()}},{key:"setState",value:function(e){this.state=p({},this.state,{},e)}},{key:"destroy",value:function(){this.detachEvents(),this.clearBubble()}}]),e}()},51860:function(e,t,i){i.d(t,{Z:function(){return u}});var n=i(15671),s=i(43144),r=i(68551),a=i(61156),o="data-model-finder-light-item";function l(e,t){var i={};return i.element=t,i.label=t.dataset.modelFinderLightCategory,i.selected=!!t.dataset.modelFinderLightSelected,i.value=e||0,i}var c={categorySelectorLabelText:(window.mbNafta&&window.mbNafta.ns("moduleData","modelFinderLight").localization||{categorySelectorLabelText:"Discover"}).categorySelectorLabelText},h="data-model-finder-light-selected",u=function(){function e(t){if((0,n.Z)(this,e),this.categorySelectorElement=null,this.selectControl=null,this.selectedItem=null,this.element=t,this.items=[],!t)return console.warn("No model finder light content.");this.items=function(e){for(var t=function(e){return e.querySelectorAll("[".concat(o,"]"))}(e),i=[],n=0;n<t.length;n+=1)i.push(l(n.toString(),t[n]));return i}(t),this.cacheDOM(),this.init()}return(0,s.Z)(e,[{key:"cacheDOM",value:function(){this.categorySelectorElement=this.element.querySelector("[".concat("data-category-selector","]")),this.selectWrapperElement=this.element.querySelector(".".concat("model-finder-light__dropdown-wrapper"))}},{key:"createSelectControl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.selectControl=new r.Yw(e,{cssClass:"model-finder-light__select-control",defaultSelection:0,labelText:c.categorySelectorLabelText,ariaLabelText:c.categorySelectorLabelText,selectionCallback:this.onSelectCategory.bind(this),theme:"dropdown",analyticsTrigger:"cta-attributes"}),this.categorySelectorElement.innerHTML="",a.jG.append(this.selectControl.render(),this.categorySelectorElement)}},{key:"destroy",value:function(){this.categorySelectorElement=null,this.selectControl.destroy(),this.selectedItem=null,this.items=[],this.element.remove()}},{key:"getSelectedItem",value:function(){return this.selectedItem}},{key:"init",value:function(){this.items.length>1?(this.createSelectControl(this.items),this.setSelectedItem(this.items[0])):this.selectWrapperElement.classList.add("model-finder-light__dropdown-wrapper--empty")}},{key:"onSelectCategory",value:function(e){this.getSelectedItem().element.setAttribute(h,!1),this.setSelectedItem(this.items[e])}},{key:"setSelectedItem",value:function(e){this.selectedItem=e,e.element.setAttribute(h,!0)}}]),e}()},13632:function(e,t,i){i.d(t,{Z:function(){return p}});var n=i(4942),s=i(15671),r=i(43144),a=i(61156),o=i(48218),l=i(65025),c=function(e){var t=e.dataset,i=t.offerDetailsModal,n=t.marketType,s=function(e){var t={};return e.dealerIds&&e.dealerIds.split(",").forEach((function(e){t[e]=!0})),t}(t),r=e.querySelector("#".concat(i)).innerHTML;return new l.Z(e,r,n,s)};function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var d="sales-promo-offer__tile",m="active",v={tileWidths:{small:89.5,large:44.600391},tileMargins:{small:"10px",large:"1.9389323vw"},centeringOffsets:{small:2,large:0},outerContainerWidths:{small:93.4375,large:91.14583},intersectionRatio:.8,WIDTH:"width"},p=function(){function e(t){(0,s.Z)(this,e),this.element=t,this.state={currentScreenState:a.sp.getCurrentState(),currentTileIndex:0,nextTileIndex:0},window.mbNafta.ns("pageData").wcmmode.edit||window.mbNafta.ns("pageData").wcmmode.preview||this.init()}return(0,r.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOMElements(),this.attachEvents(),this.salesPromoTiles.forEach((function(e){c(e)})),this.checkSwiper()}},{key:"setBindings",value:function(){this.onScreenResize=this.onScreenResize.bind(this),this.setActiveTile=this.setActiveTile.bind(this),this.activeTileUpdateCallback=this.activeTileUpdateCallback.bind(this),this.onTileClick=this.onTileClick.bind(this),this.onObserver=this.onObserver.bind(this)}},{key:"cacheDOMElements",value:function(){this.salesPromoTiles=[].slice.call(this.element.querySelectorAll(".".concat(d))),this.pics=[].slice.call(this.element.querySelectorAll(".".concat(d," picture"))),this.salesPromoContainer=this.element.querySelector(".".concat("sales-promo-offer__container")),this.salesPromoOuterWrapper=this.element.querySelector(".".concat("sales-promo-offer__outer-wrapper")),this.salesPromoInnerWrapper=this.element.querySelector(".".concat("sales-promo-offer__inner-wrapper"))}},{key:"attachEvents",value:function(){var e=this;a.sp.addResizeListener(this.onScreenResize),this.salesPromoTiles.forEach((function(t){t.addEventListener(o.FP.CLICK,e.onTileClick)})),this.vObserver=a.sw.addObserver(this.element,this.onObserver,{threshold:0})}},{key:"detachEvents",value:function(){a.sw.removeObserver(this.vObserver)}},{key:"onTileClick",value:function(e){var t=this.getState().currentTileIndex,i=this.salesPromoTiles.indexOf(e.currentTarget);i!==t&&this.swiper.goToTile(i)}},{key:"checkSwiper",value:function(){a.sp.getCurrentState()===a.sp.SIZES.SMALL&&this.salesPromoTiles.length>1&&!this.swiperEnabled?(this.enableSwiper(),this.swiper.setContainerPosition()):this.swiperEnabled&&this.disableSwiper()}},{key:"enableSwiper",value:function(){var e=this.getState().currentTileIndex;this.swiper=new a.tq(this.salesPromoOuterWrapper,this.salesPromoInnerWrapper,this.salesPromoTiles,this.activeTileUpdateCallback,v,e),this.setContainerWidth(),this.swiperEnabled=!0}},{key:"disableSwiper",value:function(){this.swiper.destroy(),this.unsetContainerWidth(),this.unsetContainerPosition(),this.swiperEnabled=!1}},{key:"setContainerWidth",value:function(){var e=this.getState().currentScreenState;this.salesPromoInnerWrapper.style.width="calc(".concat(v.tileWidths[e],"vw * ").concat(this.salesPromoTiles.length," + ").concat(v.tileMargins[e]," * ").concat(this.salesPromoTiles.length-1,")")}},{key:"unsetContainerWidth",value:function(){this.salesPromoInnerWrapper.style.width=""}},{key:"unsetContainerPosition",value:function(){this.salesPromoInnerWrapper.style.transform=""}},{key:"onScreenResize",value:function(){var e=this.getState().currentScreenState,t=a.sp.getCurrentState();e!==t&&(this.updateState({currentScreenState:t}),this.checkSwiper())}},{key:"onObserver",value:function(e){if(e[0].isIntersecting){var t=[];this.pics.forEach((function(e){t.push(e.getAttribute("data-lazyloader-id"))})),a.Jw.dispatchEvent(a.Jw.createCustomEvent(o.fD.FORCE_ASSET_LOAD,{detail:{lazyloaderIdSet:t}})),this.detachEvents()}}},{key:"activeTileUpdateCallback",value:function(e){this.updateState({nextTileIndex:e}),this.setActiveTile()}},{key:"setActiveTile",value:function(){var e=this.getState().nextTileIndex;this.unsetActiveTile(),this.salesPromoTiles[e].classList.add(m),this.salesPromoTiles[e].focus(),this.updateState({currentTileIndex:e})}},{key:"unsetActiveTile",value:function(){var e=this.getState().currentTileIndex;this.salesPromoTiles[e].classList.remove(m)}},{key:"goToNextTile",value:function(){var e=this.getState().currentTileIndex,t=e<this.salesPromoTiles.length-1?e+1:0;this.swiper.goToTile(t)}},{key:"updateState",value:function(e){this.state=u({},this.state,{},e)}},{key:"getState",value:function(){return u({},this.state)}},{key:"destroy",value:function(){this.detachEvents()}}]),e}()},65025:function(e,t,i){i.d(t,{Z:function(){return a}});var n=i(15671),s=i(43144),r=i(14569),a=function(){function e(t,i,s,r){(0,n.Z)(this,e),this.element=t,this.modalContentOfferDetails=i,this.marketType=s,this.dealerIds=r,this.init()}return(0,s.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.attachEvents()}},{key:"cacheDOM",value:function(){this.offerDetailsCTA=this.element.querySelector("[data-".concat("modal-button","]"))}},{key:"attachEvents",value:function(){this.offerDetailsCTA&&this.offerDetailsCTA.addEventListener("click",this.clickHandlerOfferDetailsCTA.bind(this))}},{key:"clickHandlerOfferDetailsCTA",value:function(){var e;(e=new r.Modal(void 0,{modalContent:this.modalContentOfferDetails,sizeSmall:r.Modal.SIZES.FULLSCREEN,callbacks:{beforeClose:function(){e.destroy(),e=null}}})).open({callingContainer:this.offerDetailsCTA})}},{key:"testMarketType",value:function(e,t,i){var n="national"===this.marketType||this.dealerIds[e]||!e&&"standard"===this.marketType;return this.element.classList[n&&!i?"remove":"add"]("hide"),this.element.classList[t?"add":"remove"]("featured-offer--last"),n}}]),e}()}}]);
//# sourceMappingURL=c93d345d3a1d66c62869.bundle.js.map