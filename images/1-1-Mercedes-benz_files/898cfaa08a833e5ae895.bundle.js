"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[9645],{79645:function(e,t,i){i.d(t,{s:function(){return C}});var n=i(4942),a=i(15671),r=i(43144),o=i(48218),s=i(75402),l=i(14569),c=i(61156),u=i(30168),d=i(24745);function h(){var e=(0,u.Z)(['\n    <div class="modal-carousel">\n        <div class="modal-carousel__image">\n            ',"\n            ","\n            ",'\n        </div>\n        <div class="modal-carousel__details">\n            ',"\n            ","\n            ","\n            ","\n            ","\n            ","\n            ","\n            ","\n            ","\n        </div>\n    </div>"]);return h=function(){return e},e}var p=window.mbNafta.ns("pageData").localization.availableIn,v=window.mbNafta.ns("pageData").country,y=window.mbNafta.ns("pageData").language;function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var m={onDisclaimerOpen:c.ZT},f=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,a.Z)(this,e),this.config=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},m,{},r),this.content=i,this.disclaimerMarkers=null,this.itemData=t,this.itemData.disclaimerCopy=i.viewDisclaimer,this.hasDisclaimers=this.itemData.disclaimers&&this.itemData.disclaimers.length>0,this.youtube=null,this.toggleDrawer=null,this.onDisclaimerMarkerClick=this.onDisclaimerMarkerClick.bind(this),this.afterModalOpen=this.afterModalOpen.bind(this),this.init()}return(0,r.Z)(e,[{key:"init",value:function(){this.createTemplate(),this.createDisclaimerDrawer(),this.attachEvents()}},{key:"afterModalOpen",value:function(){this.youtube&&this.youtube.initialize()}},{key:"createTemplate",value:function(){if(this.element=(t=this.itemData,i=t.title,n=t.description,a=t.imageUrl,r=t.imageAlt,o=t.standardText,l=t.price,u=t.disclaimers,g=t.packageAvailable,m=t.videoId,f=t.videoTranscript,b=t.html5video,w=t.link,T=t.disclaimerCta,k=t.disclaimerCopy,E=t.ctaClass,D=t.descriptionContainer,(0,c.e2)(h(),b?function(e,t){return'\n  <video class="multimedia-asset__video" poster="'.concat(t,'"\n         autoplay="" loop="" role="presentation" playsinline="" muted="">\n      <source src="').concat(e,'" type="video/mp4">\n  </video>')}(b,a):"",m&&!b?(0,d.Z)({videoId:m,imageUrl:a,videoTranscript:f})({getNode:!1}):"",b||m?"":function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'\n  <picture>\n      <source media="(max-width: 767px)">\n      <img class="responsive-image" src="'.concat(e,'" alt="').concat(t,'">\n  </picture>')}(a,r),D?'<div class="modal-carousel__details-wrapper">':"",o?'<div class="modal-carousel__standard">'.concat(o,"</div>"):"",i?'<div class="modal-carousel__title">'.concat(i,"</div>"):"",l?'<div class="modal-carousel__price">'.concat(l,"</div>"):"",n?'<div class="modal-carousel__desc">'.concat(n,"</div>"):"",g?'<p class="modal-carousel__package">'.concat(p).concat("ca"===v&&"fr"===y?"":" ","<strong>").concat(g,"</strong></p>"):"",w?'<div class="modal-carousel__link '.concat(E,'">').concat(w,"</div>"):"",u?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,c.fV)();return"\n    ".concat(0===e.length?"":'<div class="modal-carousel__disclaimer">\n            <button\n              class="disclaimer__toggle disclaimer__drawer-cta"\n              aria-expanded="false"\n              aria-controls="modal-options-toggle-container-'.concat(i,'"\n              data-timing=".3s"\n              data-analytics-trigger="cta">\n              <span class="button_toggle-copy" data-toggle-drawer-button>').concat(t,'</span>\n              <span class="icon-mb icon-arrow-down-square"></span>\n            </button>\n            <div id="modal-options-toggle-container-').concat(i,'" class="disclaimer__drawer">\n              <ul>\n                ').concat(e.reduce((function(e,t){return e+"<li>\n                        ".concat(t.code&&"custom"!==t.code?'<p class="disclaimer__legend" data-legend="'.concat(t.code,'">').concat(t.code,"</p>"):"",'\n                        <div class="disclaimer__text">').concat(t.desc,"</div>\n                    </li>")}),""),"\n              </ul>\n            </div>\n        </div>"))}(u,T,k):"",D?"</div>":""))({getNode:!0}),this.itemData.videoId&&!this.itemData.html5video){var e=this.element.querySelector(".".concat("youtube-modal__outer-container"));this.youtube=new s.u9({videoId:this.itemData.videoId,videoTranscript:this.itemData.videoTranscript,triggerImageLarge:this.itemData.imageUrl,youTubeElement:e})}var t,i,n,a,r,o,l,u,g,m,f,b,w,T,k,E,D}},{key:"createDisclaimerDrawer",value:function(){if(this.hasDisclaimers){var e=this.element.querySelector(".".concat("disclaimer__toggle")),t=this.element.querySelector(".".concat("disclaimer__drawer"));this.disclaimerMarkers=Array.prototype.slice.call(this.element.querySelectorAll(".".concat("disclaimer__marker"))),this.toggleDrawer=new l.ToggleDrawer(e,{onToggle:this.onDrawerButtonClick.bind(this),closedText:this.content.closeDisclaimer,openedText:this.content.viewDisclaimer,toggleDrawer:t})}}},{key:"attachEvents",value:function(){var e=this;this.hasDisclaimers&&this.disclaimerMarkers&&Object.values(this.disclaimerMarkers).forEach((function(t){t.addEventListener(o.FP.CLICK,e.onDisclaimerMarkerClick)}))}},{key:"detachEvents",value:function(){var e=this;this.hasDisclaimers&&this.disclaimerMarkers&&Object.values(this.disclaimerMarkers).forEach((function(t){t.removeEventListener(o.FP.CLICK,e.onDisclaimerMarkerClick)}))}},{key:"onDrawerButtonClick",value:function(e){e.stopPropagation(),this.toggleDrawer.isExpanded&&!e.detail.legend?this.config.onDisclaimerOpen(this.toggleDrawer.drawer):e.detail.legend&&this.scrollToDisclaimers(e.detail.legend)}},{key:"onDisclaimerMarkerClick",value:function(e){e.preventDefault();var t=e.currentTarget.attributes.getNamedItem("data-legend").nodeValue;this.toggleDrawer&&!this.toggleDrawer.isExpanded?this.toggleDrawer.onClickCallback(e):this.scrollToDisclaimers(t)}},{key:"scrollToDisclaimers",value:function(e){var t=this.toggleDrawer.drawer.querySelector('[data-legend="'.concat(e,'"]'));t&&this.config.onDisclaimerOpen(t)}},{key:"enable",value:function(){this.youtube&&this.youtube.enable()}},{key:"disable",value:function(){this.youtube&&this.youtube.disable()}},{key:"destroy",value:function(){this.detachEvents(),this.toggleDrawer&&this.toggleDrawer.destroy(),this.element.remove()}},{key:"render",value:function(){return this.element}}]),e}();function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function w(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var T={closeDisclaimer:"Close Disclaimer",viewDisclaimer:"View Disclaimer"},k=window.mbNafta.ns("pageData").localization,E={theme:l.Modal.THEMES.DEFAULT,themeModifier:null,sizeSmall:l.Modal.SIZES.FULLSCREEN,sizeLarge:l.Modal.SIZES.INSET,dataAnalyticContainer:"{'blade': 'options modal'}"},D={infinite:!0,labels:{next:k.next,prev:k.previous,skipAll:k.skipAllSlides,skipToStart:k.skipToSlidesStart},navigationType:l.Carousel.CAROUSEL_TYPES.FIXED_BOTTOM,startIndex:0},C=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.Z)(this,e),this.modalConfig=w({},E,{},i.modal),this.carouselConfig=w({},D,{},i.carousel),this.optionsData=t,this.content=w({},T,{},k,{},window.mbNafta.ns("pageData").disclaimerLocalization),this.modal=null,this.carousel=null,this.modalCarouselItems=[],this.onSlideCallback=this.onSlideCallback.bind(this),this.beforeOpen=this.beforeOpen.bind(this),this.afterOpen=this.afterOpen.bind(this),this.beforeClose=this.beforeClose.bind(this),this.scrollToElement=this.scrollToElement.bind(this),this.init()}return(0,r.Z)(e,[{key:"init",value:function(){this.createModal()}},{key:"createModal",value:function(){this.modal=new l.Modal(void 0,w({modalContent:void 0,callbacks:{beforeOpen:this.beforeOpen,afterOpen:this.afterOpen,beforeClose:this.beforeClose}},this.modalConfig))}},{key:"createCarousel",value:function(){var e=this,t=this.optionsData.map((function(t){var i=new f(t,e.content,{onDisclaimerOpen:e.scrollToElement});return e.modalCarouselItems.push(i),i.render()}));this.carouselConfig.onSlideCallback=this.onSlideCallback,this.carousel=new l.Carousel(t,this.carouselConfig)}},{key:"destroyCarousel",value:function(){this.modalCarouselItems.forEach((function(e){e.destroy()})),this.modalCarouselItems=[],this.carousel.destroy()}},{key:"onSlideCallback",value:function(e,t){this.modalCarouselItems[e].enable(),this.modalCarouselItems[t].disable()}},{key:"beforeOpen",value:function(){this.createCarousel()}},{key:"afterOpen",value:function(e){this.getModalContainer()&&this.getModalContainer().appendChild(this.carousel.getCarousel()),this.modalCarouselItems[this.carouselConfig.startIndex].afterModalOpen(),this.carouselConfig.onAfterOpen&&this.carouselConfig.onAfterOpen(e)}},{key:"beforeClose",value:function(){this.carouselConfig.onBeforeClose&&this.carouselConfig.onBeforeClose(),this.getModalContainer()&&(this.getModalContainer().removeChild(this.carousel.getCarousel()),this.destroyCarousel())}},{key:"scrollToElement",value:function(e){this.modal.scrollToElement(e)}},{key:"getModalContainer",value:function(){return document.querySelector("[".concat("data-modal-content","]"))}},{key:"open",value:function(e){this.modal.open(e)}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modal.close(e)}},{key:"destroy",value:function(){this.modal.destroy()}}]),e}();(0,n.Z)(C,"SIZES",w({},l.Modal.SIZES))},90459:function(e,t){var i=Object.assign({alertYouTube:"Click here to watch video.",hideVideoTranscript:"Hide Video Transcript",modalAlertYouTube:"Click to launch {0} in a pop-up",modalAlertYouTubeFallback:"Click to launch this video in a pop-up",showVideoTranscript:"Show Video Transcript"},window.mbNafta.ns("pageData","youtube").localization),n=i.alertYouTube,a=i.hideVideoTranscript,r=i.modalAlertYouTube,o=i.modalAlertYouTubeFallback,s=i.showVideoTranscript;t.Z={alertYouTube:n,hideVideoTranscript:a,modalAlertYouTube:r,modalAlertYouTubeFallback:o,showVideoTranscript:s}},75402:function(e,t,i){i.d(t,{_F:function(){return f},vK:function(){return b.Z},u9:function(){return w.Z},cB:function(){return k}});var n=i(4942),a=i(15671),r=i(43144),o=i(48218),s=i(61156),l=!1,c=null,u=function(){function e(){return(0,a.Z)(this,e),c||(c=this),this.init()}return(0,r.Z)(e,[{key:"loadScript",value:function(){if(!l){var e=window.document.createElement("script");e.src="https://www.youtube.com/iframe_api",e.onload=function(){l=!0},window.document.getElementsByTagName("head")[0].appendChild(e)}return this}},{key:"init",value:function(){return this.loadScript(),new Promise((function(e){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function)e(window.YT);else{var t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){t&&t(),e(window.YT)}}}))}}]),e}(),d=i(82963),h=i(61120),p=i(60136),v=function(e){function t(e){var i;return(0,a.Z)(this,t),(i=(0,d.Z)(this,(0,h.Z)(t).call(this,"satellite"))).player=null,i.videoId=e,i.progressInterval=null,i.wasPaused=!1,i.progressReported={25:!1,50:!1,75:!1},i}return(0,p.Z)(t,e),(0,r.Z)(t,[{key:"logVideoEvent",value:function(e){this.logEvent("videoTrack",{videoId:this.videoId,videoEvent:e})}},{key:"handleStateChange",value:function(e){var t=e.data===window.YT.PlayerState.UNSTARTED,i=e.data===window.YT.PlayerState.PLAYING,n=e.data===window.YT.PlayerState.PAUSED,a=e.data===window.YT.PlayerState.ENDED;this.player=e.target,t&&(this.progressInterval=window.setInterval(this.calcProgress.bind(this),250),this.start()),n&&(this.wasPaused=!0),i&&(this.wasPaused?(this.wasPaused=!1,this.resume()):this.play()),a&&(window.clearInterval(this.progressInterval),this.complete())}},{key:"calcProgress",value:function(){var e=this.player.getCurrentTime(),t=this.player.getDuration(),i=Math.round(e/t*100);0!==i&&i%25==0&&(this.progressReported[i]||(this.progressReported[i]=!0,this.percentagePlayed(i)))}},{key:"start",value:function(){this.logVideoEvent("video start")}},{key:"play",value:function(){this.logVideoEvent("video play")}},{key:"resume",value:function(){this.logVideoEvent("video resume")}},{key:"percentagePlayed",value:function(e){100!==e&&this.logVideoEvent("video ".concat(e,"% played"))}},{key:"complete",value:function(){this.logVideoEvent("video complete")}}]),t}(i(75253).Z);function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var g={autoplay:1,fs:1,iv_load_policy:3,modestbranding:1,origin:"//".concat(window.document.domain),playsinline:1,rel:0,wmode:"transparent"},m=function(){function e(t,i,r){var o=this,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,a.Z)(this,e),this.videoId=t,this.placeholder=i,this.callback=r,this.API=null,this.analyticsAPI=null,this.player=null,this.playerVars=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},g,{},l),this.onReady=s.ZT,this.playerVars.events&&this.playerVars.events.onReady&&(this.onReady=this.playerVars.events.onReady),this.promise=(new u).then((function(e){o.API=e})).then(this.initializeVideoPlayer.bind(this)),this.attachEvents()}return(0,r.Z)(e,[{key:"attachEvents",value:function(){var e=this;window.addEventListener(o.fD.PAUSE_YOUTUBE_VIDEO,(function(t){e.pauseYoutubeVideo(t)}))}},{key:"pauseYoutubeVideo",value:function(e){this.isPlayerReady()&&e.detail&&e.detail.videoId===this.videoId&&this.player.pauseVideo()}},{key:"dispatchStateEvent",value:function(e){s.Jw.dispatchEvent(s.Jw.createCustomEvent(o.fD.YOUTUBE_VIDEO_STATE_CHANGE,{detail:{videoId:this.videoId,player:e.target.a,currentState:e.data,states:window.YT.PlayerState}}))}},{key:"isPlayerReady",value:function(){return this.player&&"function"==typeof this.player.playVideo}},{key:"initializeVideoPlayer",value:function(){var e=this;return null===this.placeholder?this.player=null:this.player=new this.API.Player(this.placeholder,{width:640,height:320,videoId:this.videoId,events:{onReady:function(t){e.analyticsAPI=new v(e.videoId),e.onReady(t)},onStateChange:function(t){e.analyticsAPI&&e.analyticsAPI.handleStateChange(t);var i=t.data===e.API.PlayerState.ENDED;e.dispatchStateEvent(t),e.callback(i)}},playerVars:this.playerVars}),this.player}}],[{key:"createInstance",value:function(e,t){return new this(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.ZT,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}}]),e}(),f=m,b=i(42129),w=i(19936),T=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.ZT;(0,a.Z)(this,e),this.element=t,this.videoId=i,this.clickCallback=n,this.init()}return(0,r.Z)(e,[{key:"init",value:function(){this.setBindings(),this.attachEvents()}},{key:"setBindings",value:function(){this.onClick=this.onClick.bind(this)}},{key:"attachEvents",value:function(){this.element&&this.element.addEventListener(o.FP.CLICK,this.onClick)}},{key:"detachEvents",value:function(){this.element&&this.element.removeEventListener(o.FP.CLICK,this.onClick)}},{key:"onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.clickCallback(this.element,this.videoId)}},{key:"focus",value:function(){this.element.focus()}},{key:"destroy",value:function(){this.detachEvents()}}]),e}(),k=T},24745:function(e,t,i){var n=i(30168),a=i(61156),r=i(90459);function o(){var e=(0,n.Z)(['\n    <div class="youtube-modal__outer-container" data-video-id="','">\n        <div class="youtube-modal__container">\n            ','\n            <div class="youtube-container-iframe"></div>\n        </div>\n        <div class="youtube-transcript__wrapper wrapper ','">\n            <button class="youtube-transcript__toggle-button"\n                    aria-controls="youtube-transcript','"\n                    aria-expanded="false"\n                    data-toggle-drawer-button>','</button>\n            <div class="youtube-transcript__content rte" tabindex="-1"\n                 aria-hidden="true"\n                 id="youtube-transcript','">\n                 ',"\n            </div>\n        </div>\n    </div>\n"]);return o=function(){return e},e}t.Z=function(e){var t=e.videoId,i=e.imageUrl,n=e.videoTranscript,s=e.uid,l=void 0===s?(0,a.fV)():s;return(0,a.e2)(o(),t,i?'\n                <button class="youtube-trigger youtube-trigger__modal hide"\n                        aria-hidden="true"\n                        style="background-image: url(\''.concat(i,'\');">\n                    <span class="offscreen">').concat(r.Z.alertYouTube,'</span>\n                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                         xml:space="preserve" viewBox="0 0 62 62" class="youtube-trigger__icon-play">\n                        <circle class="youtube-trigger__circle" cx="31" cy="31" r="31"></circle>\n                        <polygon class="youtube-trigger__triangle" points="24,17.6 24,43.4 41.3,30.4 "></polygon>\n                    </svg>\n                </button>'):"",n?"":"hide",l,r.Z.showVideoTranscript,l,n)}},42129:function(e,t,i){var n=i(4942),a=i(15671),r=i(43144),o=i(48218),s=i(61156),l=i(14569);function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var u={afterModalOpen:s.ZT,beforeModalClose:s.ZT},d=function(){function e(t,i,r,o,s){(0,a.Z)(this,e),this.videoId=t,this.contentElem=i,this.callbacks=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},u,{},r),this.theme=o,this.triggerElement=s,this.init()}return(0,r.Z)(e,[{key:"init",value:function(e){this.triggerElement=e||this.triggerElement,this.setBindings(),this.initYouTubeModal(),this.youTubeModal.open({callingContainer:this.triggerElement})}},{key:"setBindings",value:function(){this.onAfterYouTubeModalOpen=this.onAfterYouTubeModalOpen.bind(this),this.onBeforeYouTubeModalClose=this.onBeforeYouTubeModalClose.bind(this),this.closeYouTubeModal=this.closeYouTubeModal.bind(this),this.destroy=this.destroy.bind(this)}},{key:"onAfterYouTubeModalOpen",value:function(){this.callbacks.afterModalOpen(),s.Jw.dispatchEvent(s.Jw.createCustomEvent(o.fD.YOUTUBE_MODAL_OPENED,{detail:{youTubeId:this.videoId,pageElement:this.contentElem}}))}},{key:"onBeforeYouTubeModalClose",value:function(){this.callbacks.beforeModalClose(),s.Jw.dispatchEvent(s.Jw.createCustomEvent(o.fD.YOUTUBE_MODAL_CLOSED,{detail:{youTubeId:this.videoId,pageElement:this.contentElem}})),this.destroy()}},{key:"initYouTubeModal",value:function(){this.youTubeModal=new l.Modal(void 0,{modalContent:this.contentElem,callbacks:{afterOpen:this.onAfterYouTubeModalOpen,beforeClose:this.onBeforeYouTubeModalClose},theme:this.theme,sizeSmall:l.Modal.SIZES.FULLSCREEN,sizeLarge:l.Modal.SIZES.DEFAULT})}},{key:"closeYouTubeModal",value:function(){this.youTubeModal&&this.youTubeModal.close()}},{key:"destroy",value:function(){this.youTubeModal&&(this.youTubeModal.destroy(),this.youTubeModal=null)}}]),e}();t.Z=d},19936:function(e,t,i){var n=i(15671),a=i(43144),r=i(48218),o=i(61156),s=i(14569),l=i(75402),c=i(90459),u=i(24745),d=function(){function e(t){var i=t.videoId,a=t.youTubeElement,r=t.videoTranscript;(0,n.Z)(this,e),this.videoId=i,this.youTubeModalElem=a,this.videoTranscript=r,this.transcriptDrawer=null,this.setBindings()}return(0,a.Z)(e,[{key:"setBindings",value:function(){this.initialize=this.initialize.bind(this),this.onTriggerClick=this.onTriggerClick.bind(this),this.beforeYouTubeModalClose=this.beforeYouTubeModalClose.bind(this),this.onYouTubePlayerReady=this.onYouTubePlayerReady.bind(this),this.onTranscriptToggle=this.onTranscriptToggle.bind(this)}},{key:"cacheDOM",value:function(){this.transcriptWrapperElem=this.youTubeModalElem.querySelector(".".concat("youtube-transcript__wrapper")),this.transcriptToggleButtonElem=this.youTubeModalElem.querySelector(".".concat("youtube-transcript__toggle-button")),this.transcriptContentElem=this.youTubeModalElem.querySelector(".".concat("youtube-transcript__content"))}},{key:"detachEvents",value:function(){this.triggerElem&&this.triggerElem.removeEventListener(r.FP.CLICK)}},{key:"initialize",value:function(){this.youTubePlayerVars={events:{onReady:this.onYouTubePlayerReady}},this.initYouTubePlayer(),this.cacheDOM(),!this.transcriptDrawer&&this.videoTranscript&&this.initTranscriptDrawer()}},{key:"update",value:function(e,t){this.ytPlayer.loadVideoById({videoId:e}),this.videoId=e,this.videoTranscript=t,this.transcriptDrawer&&(this.transcriptDrawer.isExpanded&&this.transcriptToggleButtonElem.click(),this.transcriptDrawer.destroy(),this.transcriptDrawer=null,this.transcriptWrapperElem.classList.add("hide")),this.videoTranscript&&(this.transcriptContentElem.innerHTML=this.videoTranscript,this.transcriptWrapperElem.classList.remove("hide"),this.initTranscriptDrawer())}},{key:"enable",value:function(){this.ytPlayer||this.enableTrigger(),!this.transcriptDrawer&&this.videoTranscript&&(this.cacheDOM(),this.initTranscriptDrawer())}},{key:"disable",value:function(){this.ytPlayer&&this.ytPlayer.pauseVideo(),this.transcriptDrawer&&this.transcriptDrawer.closeDrawer()}},{key:"enableTrigger",value:function(){this.triggerElem&&(this.triggerElem.classList.remove("hide"),this.triggerElem.removeAttribute("aria-hidden"),this.triggerElem.addEventListener(r.FP.CLICK,this.onTriggerClick))}},{key:"disableTrigger",value:function(){this.triggerElem&&(this.triggerElem.removeEventListener(r.FP.CLICK,this.onTriggerClick),this.triggerElem.remove(),this.triggerElem=null)}},{key:"onTriggerClick",value:function(){this.initialize()}},{key:"beforeYouTubeModalClose",value:function(){this.transcriptDrawer&&(this.transcriptDrawer.destroy(),this.transcriptDrawer=null)}},{key:"onYouTubePlayerReady",value:function(e){this.ytPlayer=e.target,this.disableTrigger()}},{key:"initYouTubePlayer",value:function(){var e=this.youTubeModalElem.querySelector(".".concat("youtube-container-iframe"));l._F.createInstance(this.videoId,e,o.ZT,this.youTubePlayerVars)}},{key:"createYouTubeModalElement",value:function(){return this.youTubeModalElem=(0,u.Z)({videoTranscript:this.videoTranscript})({getNode:!0}),this.youTubeModalElem}},{key:"initTranscriptDrawer",value:function(){this.transcriptDrawer=new s.ToggleDrawer(this.transcriptToggleButtonElem,{closedText:c.Z.hideVideoTranscript,openedText:c.Z.showVideoTranscript,onToggle:this.onTranscriptToggle})}},{key:"onTranscriptToggle",value:function(e){this["true"===e.target.getAttribute("aria-expanded")?"transcriptContentElem":"transcriptToggleButtonElem"].focus()}},{key:"destroy",value:function(){this.detachEvents(),this.transcriptDrawer&&(this.transcriptDrawer.destroy(),this.transcriptDrawer=null),this.ytPlayer&&this.ytPlayer.destroy()}},{key:"triggerElem",get:function(){return this.te||(this.te=this.youTubeModalElem.querySelector(".".concat("youtube-trigger__modal"))),this.te},set:function(e){this.te=e}}]),e}();t.Z=d}}]);
//# sourceMappingURL=898cfaa08a833e5ae895.bundle.js.map