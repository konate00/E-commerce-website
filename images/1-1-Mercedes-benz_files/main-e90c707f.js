"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[3637],{35722:function(e,t,i){var n=i(99997);t.Z={FormsPreFooter:n.Z}},36179:function(e,t,i){i.d(t,{Z:function(){return s}});var n=i(15671),o=i(43144),a=i(83166),s={HotspotCoordinatesGenerator:function(){function e(t){(0,n.Z)(this,e),this.element=t,this.setBindings(),this.cacheDOM(),this.panorama=new a.Z(this.panoWrapperElm,{output:"overlay",controlBar:!1,initialControlCenter:{x:300,y:-30,z:10}}),this.panorama.init(this.setPanorama)}return(0,o.Z)(e,[{key:"setBindings",value:function(){this.setPanorama=this.setPanorama.bind(this)}},{key:"cacheDOM",value:function(){this.panoWrapperElm=this.element.querySelector(".".concat("hotspot-coordinates-generator__pano-wrapper"))}},{key:"setPanorama",value:function(){this.panoImg=new Image,this.panoImg.src=this.element.dataset.imageSrc,this.panorama.createPanorama(this.panoImg,"image"),this.panorama.createViewer(),this.panorama.addViewer()}}]),e}()}},75629:function(e,t,i){var n=i(36582),o=i(98243),a=i(14569),s=i(49356),r=i(95086),l=i(4835),c=i(8453),h=i(44390),u=i(47984),d=i(91683),m=i(90680),f=i(47552),v=i(99997),g=i(73043),p=i(93847),b=i(31732),y=i(99307),E=i(69805),k=i(68053),Z=i(37816),T=i(13425),S=i(85614),_=i(40294),O=i(18814),L=i(42063),M=i(2315),w=i(45969),F=i(20597),C=i(71890);t.Z={ImageToggleLinks:n.Z,StickyNav:o.StickyNav,ToggleDrawer:a.ToggleDrawer,MultiMediaAsset:s.Z,MultiMediaTile:r.Z,MultiMediaYouTube:l.Z,TabbedModule:c.Z,MapModule:h.Z,TextBlock:u.Z,ImageSlider:d.Z,FAQModule:m.Z,OverlayTileGrid:f.Z,FormsPreFooter:v.Z,AngledImage:g.Z,AlertBanner:p.Z,SubPageNav:b.Z,IframeModule:y.Z,PlugInModule:E.Z,Gallery:k.Z,ScrollToSticky:o.ScrollToSticky,DealerLocator:Z.Z,LargeTileGrid:T.Z,AccessoriesSelector:S.y,AccessoriesPromoGrid:S.Y,TextTile:_.Z,LetUsKnow:O.Z,PepForm:L.Z,OnlineTestDriveForm:M.Z,SponsorshipForm:w.Z,ComplianceLetterForm:F.Z,InventoryPreferences:C.Z}},18626:function(e,t,i){i.d(t,{Z:function(){return s}});var n=i(15671),o=i(43144),a=i(48218),s={DisclaimerReference:function(){function e(t){(0,n.Z)(this,e),this.element=t,this.locale=this.element.dataset.locale,this.cacheDOMElements.bind(this),this.attachEvents.bind(this),this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.cacheDOMElements(),this.attachEvents()}},{key:"cacheDOMElements",value:function(){this.sections=document.querySelectorAll(".".concat("disclaimer-reference"))}},{key:"attachEvents",value:function(){var e=this;this.sections.forEach((function(t){e.el=t.querySelector(".".concat("disclaimer-search")),e.el.addEventListener(a.FP.CLICK,e.getDisclaimerReferences.bind(e,t,e.el.dataset.disclaimerLookup))}))}},{key:"populateDisclaimerResults",value:function(e,t){var i="";t.length>0?t.forEach((function(e){i+="<li><a href='".concat(e,".html' target='_blank'>").concat(e,"</a></li>")})):i="No Results",this.results.innerHTML=i}},{key:"getDisclaimerReferences",value:function(e,t){var i=this,n="".concat("/bin/mb/public/disclaimer-references",".").concat(t,".").concat(this.locale,".json");return this.results=e.querySelector(".".concat("disclaimer-results")),this.results.innerHTML='<span class="loading">LOADING</span>',fetch(n,{headers:{"Referrer-Policy":"origin",Referer:window.location.href},method:"GET"}).then((function(e){return e.json()})).then((function(e){i.populateDisclaimerResults(i.section,e)}))}}]),e}()}},13377:function(e,t,i){var n=i(49356),o=i(95086),a=i(4835),s=i(36582),r=i(91683),l=i(8453),c=i(44390),h=i(90680),u=i(99997),d=i(93847),m=i(31732),f=i(99307),v=i(47552),g=i(69805),p=i(37816),b=i(13425),y=i(40294),E=i(53968),k=i(18814),Z=i(42063),T=i(2315),S=i(45969),_=i(20597),O=i(2055);t.Z={MultiMediaAsset:n.Z,MultiMediaTile:o.Z,MultiMediaYouTube:a.Z,ImageToggleLinks:s.Z,ImageSlider:r.Z,TabbedModule:l.Z,MapModule:c.Z,FAQModule:h.Z,FormsPreFooter:u.Z,AlertBanner:d.Z,SubPageNav:m.Z,IframeModule:f.Z,OverlayTileGrid:v.Z,PlugInModule:g.Z,DealerLocator:p.Z,LargeTileGrid:b.Z,TextTile:y.Z,Recall:E.Z,LetUsKnow:k.Z,PepForm:Z.Z,OnlineTestDriveForm:T.Z,SponsorshipForm:S.Z,ComplianceLetterForm:_.Z,Trims:O.Z}},43287:function(e,t,i){i.d(t,{Z:function(){return A}});var n=i(66066),o=i(72089),a=i(21783),s=i(15671),r=i(43144),l=i(61156),c=i(14569),h="featured-social-tile__list--carousel",u="featured-social-tile__list--inline",d="carousel",m="inline",f=function(){function e(t){(0,s.Z)(this,e),this.element=t,this.view=m,this.carouselInstance=null,this.init()}return(0,r.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOM(),this.attachEvents(),this.carouselInstance=c.carouselParser.createCarousel(this.element)[0].carousel,this.onResize(),this.element.classList.add("featured-social--ready")}},{key:"setBindings",value:function(){this.onResize=this.onResize.bind(this)}},{key:"cacheDOM",value:function(){this.itemsContainer=this.element.querySelector(".".concat("featured-social-tile__list"))}},{key:"attachEvents",value:function(){l.sp.addResizeListener(this.onResize)}},{key:"detachEvents",value:function(){l.sp.removeResizeListener(this.onResize)}},{key:"onResize",value:function(){l.sp.gte(l.sp.SIZES.LARGE)?this.renderInline():this.renderCarousel()}},{key:"renderInline",value:function(){var e;this.view!==m&&(this.view=m,this.itemsContainer.classList.replace(h,u),null===(e=this.carouselInstance)||void 0===e||e.deactivate())}},{key:"renderCarousel",value:function(){var e;this.view!==d&&(this.view=d,this.itemsContainer.classList.replace(u,h),null===(e=this.carouselInstance)||void 0===e||e.activate())}}]),e}(),v=i(33180),g=i(48218),p=function(){function e(t,i,n){(0,s.Z)(this,e),this.element=t,this.slideIndex=i,this.totalSlides=n,this.imageAspectRatio=null,this.element.children.length>0&&this.init()}return(0,r.Z)(e,[{key:"init",value:function(){if(this.setBindings(),this.cacheDOM(),this.attachEvents(),this.videoElm){var e=this.videoElm.getBoundingClientRect(),t=e.height,i=e.width;this.videoAspectRatio=i/t,this.evalVideo()}}},{key:"setBindings",value:function(){this.onImageMutation=this.onImageMutation.bind(this),this.onResize=(0,l.P2)(this.onResize.bind(this),10),this.onFocus=this.onFocus.bind(this),this.onFocusObserver=this.onFocusObserver.bind(this),this.onImageLoad=this.onImageLoad.bind(this)}},{key:"cacheDOM",value:function(){this.focusElms=[].slice.call(this.element.querySelectorAll("".concat("a",", ").concat("button"))),this.pictureElm=this.element.querySelector(".".concat("full-height-hero__picture")),this.imageContainerElm=this.element.querySelector(".".concat("full-height-hero__image-container")),this.imageElm=this.element.querySelector(".".concat("full-height-hero__image")),this.videoContainerElm=this.element.querySelector(".".concat("full-height-hero__video-container")),this.videoElm=this.element.querySelector(".".concat("full-height-hero__video"))}},{key:"attachEvents",value:function(){var e,t=this;this.focusElms.forEach((function(e){e.addEventListener(g.FP.FOCUS,t.onFocus)})),l.sp.addResizeListener(this.onResize),null===(e=this.imageElm)||void 0===e||e.addEventListener(g.FP.LOAD,this.onImageLoad),this.imageElm&&(this.observer=new MutationObserver(this.onImageMutation),this.observer.observe(this.imageElm,{attributes:!0,attributeOldValue:!0})),this.videoElm&&this.videoElm.addEventListener(g.FP.LOADED_DATA,(function(){var e=t.videoElm.getBoundingClientRect(),i=e.height,n=e.width;t.videoAspectRatio=n/i,t.evalVideo()}))}},{key:"detachEvents",value:function(){var e,t=this;this.focusElms.forEach((function(e){e.removeEventListener(g.FP.FOCUS,t.onFocus)})),l.sp.removeResizeListener(this.onResize),null===(e=this.imageElm)||void 0===e||e.removeEventListener(g.FP.LOAD,this.onImageLoad)}},{key:"onImageLoad",value:function(){this.setImageAspectRatio(),this.evalImage()}},{key:"onImageMutation",value:function(e){var t=this;e.forEach((function(e){("class"===e.attributeName&&e.target.classList.contains("lazy-loader__asset--loaded")||e.target.offsetWidth!==e.target.offsetHeight)&&(t.observer.disconnect(),t.evalImage())}))}},{key:"onResize",value:function(){this.imageElm?this.evalImage():this.videoElm&&this.evalVideo()}},{key:"onFocus",value:function(e){this.focusObserver=l.sw.addObserver(e.target,this.onFocusObserver,{threshold:[1],trackVisibility:!0,delay:100})}},{key:"onFocusObserver",value:function(e){if(!e[0].isVisible){var t=this.element.getBoundingClientRect().height;(0,l.X5)(t*this.slideIndex,100)}l.sw.removeObserver(this.focusObserver)}},{key:"evalImage",value:function(){this.imageAspectRatio&&1!==this.imageAspectRatio||this.setImageAspectRatio();var e=window.innerWidth/window.innerHeight>this.imageAspectRatio?"add":"remove";this.imageContainerElm.classList[e]("full-height-hero__image-container--width"),this.pictureElm.classList[e]("full-height-hero__picture--width"),this.imageElm.classList[e]("full-height-hero__image--width")}},{key:"setImageAspectRatio",value:function(){this.imageAspectRatio=Math.round(this.imageElm.naturalWidth/this.imageElm.naturalHeight*1e3)/1e3}},{key:"evalVideo",value:function(){var e=window.innerWidth/window.innerHeight>this.videoAspectRatio?"add":"remove";this.videoContainerElm.classList[e]("full-height-hero__video-container--width"),this.videoElm.classList[e]("full-height-hero__video--width")}},{key:"destroy",value:function(){this.detachEvents(),this.element.remove(),delete this.element}}]),e}(),b=i(47755),y=i(30168);function E(){var e=(0,y.Z)(['\n    <div class="hero-flipbook__nav hero-flipbook__nav--fixed">\n        <fieldset id="hero-flipbook__nav-fieldset" class="hero-flipbook__nav-fieldset" aria-label="','">\n            <div class="hero-flipbook__nav-selector"></div>\n        </fieldset>\n    </div>\n']);return E=function(){return e},e}var k="hero-flipbook--inactive",Z="hero-flipbook-slide--inactive",T=function(){function e(t){(0,s.Z)(this,e),this.config=t,this.element=null,this.selectedIndex=0,this.setBindings(),this.createView()}return(0,r.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.attachEvents(),this.onScroll()}},{key:"setBindings",value:function(){this.onScroll=(0,l.P2)(this.onScroll.bind(this),20),this.onChange=this.onChange.bind(this)}},{key:"cacheDOM",value:function(){this.navSelectorItems=[].slice.call(this.element.querySelectorAll(".".concat("form__radio"))),this.scrollContainer=document.querySelector(".".concat("page-content")),this.heroFlipbook=document.querySelector(".".concat("hero-flipbook")),this.heroFlipbookSlides=[].slice.call(document.querySelectorAll(".".concat("hero-flipbook-slide")))}},{key:"attachEvents",value:function(){window.addEventListener(g.FP.SCROLL,this.onScroll)}},{key:"detachEvents",value:function(){window.removeEventListener(g.FP.SCROLL,this.onScroll)}},{key:"onScroll",value:function(){var e=this.heroFlipbookSlides[0].offsetHeight,t=this.scrollContainer.getBoundingClientRect().top,i=Math.floor(Math.ceil(Math.abs(t))/e);i<this.navSelectorItems.length?(this.heroFlipbook.classList.remove(k),this.heroFlipbookSlides.forEach((function(e){e.classList.remove(Z)})),i!==this.selectedIndex&&(this.selectedIndex=i,this.setSelected())):(this.heroFlipbook.classList.add(k),this.heroFlipbookSlides.forEach((function(e){e.classList.add(Z)})))}},{key:"onChange",value:function(e){var t=parseInt(e.target.value,10),i=0;this.heroFlipbookSlides.forEach((function(e,n){n<t&&(i+=e.offsetHeight)})),(0,l.X5)(i,1e3)}},{key:"setSelected",value:function(){this.selectedIndex>=this.navSelectorItems.length||(this.navSelectorItems[this.selectedIndex].checked=!0)}},{key:"createView",value:function(){this.element=("Hero Navigation",(0,l.e2)(E(),"Hero Navigation"))({getNode:!0}),this.navSelector=this.element.querySelector(".".concat("hero-flipbook__nav-selector"));for(var e=0;e<this.config.count;e+=1)this.navSelector.appendChild(new b.iK({name:this.config.name,valueText:e.toString(8),labelText:"Display slide ".concat(e+1," of ").concat(this.config.count),checked:0===e,inputClassNames:["hero-flipbook__nav-item"],required:!0,onChangeCallback:this.onChange,analyticsTrigger:"cta-carousel-".concat(e+1)}).render())}},{key:"render",value:function(){return this.element}}]),e}(),S=function(){function e(t){(0,s.Z)(this,e),this.element=t,this.init()}return(0,r.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.createSlides(),this.heroElms.length>1&&this.addNavigation()}},{key:"cacheDOM",value:function(){this.heroElms=[].slice.call(this.element.parentNode.querySelectorAll(".".concat("hero-flipbook-slide")))}},{key:"createSlides",value:function(){var e=this;this.slides=[],this.heroElms.forEach((function(t,i){e.slides.push(new p(t,i,e.heroElms.length))}))}},{key:"addNavigation",value:function(){var e={count:this.heroElms.length,name:"hero-flipbook-nav"};this.heroFlipbookNav=new T(e),this.element.appendChild(this.heroFlipbookNav.render()),this.heroFlipbookNav.init()}},{key:"destroy",value:function(){this.detachEvents(),this.slides.forEach((function(e){e.destroy()})),this.element.remove(),delete this.element}}]),e}(),_=i(87407),O=i(1224),L=i(13425),M=i(82396),w=i(51860),F=i(95086),C=i(4835),I=i(1897),D=i(13632),A={ColorPickerHero:n.Z,ContentTileVehicleOverlay:o.Z,FeaturedCTAGroup:a.Z,FeaturedSocial:f,FullHeightHero:v.Z,HeroFlipbook:S,HomePageSliderHero:_.Z,ImageHotspots:O.Z,LargeTileGrid:L.Z,MBSlideshow:M.Z,ModelFinderLight:w.Z,MultiMediaTile:F.Z,MultiMediaYouTube:C.Z,PromoBanner:I.Z,SalesPromo:D.Z}},44646:function(e,t,i){var n=i(51860);t.Z={ModelFinderLight:n.Z}},51419:function(e,t,i){var n=i(61156),o=i(87757),a=i.n(o),s=i(15671),r=i(15861),l=i(50615),c=i(13104),h=i.n(c),u=i(75253),d=i(70816),m=i(19186),f=i(42982),v=i(43144),g=function(){function e(t){(0,s.Z)(this,e),this.element=t,this.assets=null,this.init()}return(0,v.Z)(e,[{key:"init",value:function(){this.setAssets(),this.loadAssets()}},{key:"setAssets",value:function(){if("PICTURE"===this.element.nodeName){var e=this.element.querySelectorAll("img"),t=this.element.querySelectorAll("source");this.assets=(0,f.Z)(e).concat((0,f.Z)(t))}else"IMG"===this.element.nodeName&&(this.assets=[this.element])}},{key:"loadAssets",value:function(){this.assets.forEach(this.loadAsset)}},{key:"loadAsset",value:function(e){var t=e.dataset.deferredSrc,i="SOURCE"===e.nodeName?"srcset":"src";return t?(e[i]=t,this):this}}]),e}(),p=i(4788),b=i(90921),y=i(98248),E=i(48218),k=i(30168);function Z(){var e=(0,k.Z)(['\n    <button class="docked-footer__button hidden" tabindex="-1" aria-expanded="false">','<span class="icon icon-arrow-up-square"></span></button>\n']);return Z=function(){return e},e}var T="footer__accordion-container--active",S=function(){function e(t,i){(0,s.Z)(this,e),this.footer=t,this.accordion=i,this.setBindings(),this.init()}return(0,v.Z)(e,[{key:"setBindings",value:function(){this.onFooterToggleButtonClick=this.onFooterToggleButtonClick.bind(this)}},{key:"init",value:function(){this.cacheDOM(),this.attachEvents(),this.content=window.mbNafta.ns("pageData").localization,this.tabbables=new n.cs(this.accordion),this.tabbables.disableTabbables()}},{key:"cacheDOM",value:function(){this.footerToggleButton=document.querySelector(".".concat("footer__toggle"))}},{key:"attachEvents",value:function(){this.footerToggleButton.addEventListener(E.FP.CLICK,this.onFooterToggleButtonClick),n.sp.addBreakpointListener(this.onScreenResize.bind(this))}},{key:"onScreenResize",value:function(){this.tabbables=new n.cs(this.accordion)}},{key:"onFooterToggleButtonClick",value:function(){var e=!this.accordion.classList.contains(T);this.accordion.classList[e?"add":"remove"](T),this.footerToggleButton.classList[e?"add":"remove"]("footer__toggle--open"),this.footerToggleButton.setAttribute("aria-label",e?this.content.collapseFooter:this.content.expandFooter),this.footerToggleButton.setAttribute("aria-expanded",e),e?(this.tabbables.enableTabbables(),this.tabbables.allTabbables[0].focus()):this.tabbables.disableTabbables(),(0,n.X5)(this.footer.offsetTop,E.O3.DELAY_500MS)}}]),e}(),_="hidden",O="footer-disclaimer",L="tabindex",M=window.mbNafta.ns("pageData").variantInfo,w=!1,F=function(e){e.preventDefault(),window.open(e.target.href,e.target.innerText,"left=20,top=20,toolbars=0,scrollbars=1,location=0,statusbars=0,menubars=1,resizable=0,width=440,height=550")},C=function(){function e(t){(0,s.Z)(this,e),this.element=t,this.variantFooter=M.isDDTVariant||M.isVariantFooter,this.authApi=new y.Z,this.setBindings(),this.init()}return(0,v.Z)(e,[{key:"setBindings",value:function(){this.onToggleFooterTrigger=this.onToggleFooterTrigger.bind(this),this.showFooterButton=this.showFooterButton.bind(this),this.hideFooterButton=this.hideFooterButton.bind(this),this.onDisclaimerTrigger=this.onDisclaimerTrigger.bind(this),this.onDockedHeaderClick=this.onDockedHeaderClick.bind(this),this.onKeydownHandler=this.onKeydownHandler.bind(this)}},{key:"init",value:function(){if(this.cacheDOM(),this.content=window.mbNafta.ns("pageData").localization,this.dockedState=this.globalNavState&&"docked"===this.globalNavState.getAttribute("data-global-navigation-behavior"),this.collapsedState=this.globalNavState&&"collapsible"===this.globalNavState.getAttribute("data-global-footer-behavior"),this.dockedState&&!this.variantFooter&&(this.addFooterBtn(),this.tabbables=new n.cs(this.element),this.tabbables.disableTabbables()),this.attachEvents(),this.accordionElement&&(this.accordion=p.accordionParser.createAccordion({element:this.accordionElement})),this.collapsedState&&!this.variantFooter)this.collapsedFooter=new S(this.element,this.accordion.accordion);else{var e=this.element.querySelector(".".concat("footer__toggle"));e&&e.remove()}return{disclaimer:b.em.getInstance(this.element)}}},{key:"cacheDOM",value:function(){this.accordionElement=this.element.querySelector("[data-accordion]"),this.legalLinks=[].slice.call(this.element.querySelectorAll(".".concat("legal__link--popup"))),this.header=document.querySelector(".".concat("header"))||document.querySelector(".".concat("main-navigation")),this.globalNavState=document.querySelector(".".concat("global-navigation-state"))}},{key:"attachEvents",value:function(){var e=this;this.legalLinks.map((function(t){return t.addEventListener(E.FP.CLICK,F.bind(e)),t})),this.dockedState&&!this.variantFooter&&(n.Jw.addEventListener(E.fD.DOCKED_FOOTER.SHOW_FOOTER_BUTTON,this.showFooterButton),n.Jw.addEventListener(E.fD.DOCKED_FOOTER.HIDE_FOOTER_BUTTON,this.hideFooterButton),this.dockedFooterButton.addEventListener(E.FP.CLICK,this.onDockedFooterButtonClick),this.header.addEventListener(E.FP.CLICK,this.onDockedHeaderClick),document.body.addEventListener(E.FP.KEYDOWN,this.onKeydownHandler)),this.dockedState&&(n.Jw.addEventListener(E.fD.DOCKED_FOOTER.OPEN_FROM_DISCLAIMER,this.onDisclaimerTrigger),n.Jw.addEventListener(E.fD.DOCKED_FOOTER.TOGGLE_TRIGGER,this.onToggleFooterTrigger))}},{key:"addFooterBtn",value:function(){var e;this.dockedFooterButton=(e=this.content,(0,n.e2)(Z(),e.footer))({getNode:!0}),n.jG.insertAdjacentElement(this.dockedFooterButton,this.element,n.jG.POSITIONS.BEFORE_BEGIN)}},{key:"onDockedFooterButtonClick",value:function(){n.Jw.dispatchEvent(n.Jw.createCustomEvent(E.fD.DOCKED_FOOTER.TOGGLE_TRIGGER))}},{key:"showFooterButtonDisclaimer",value:function(){this.showFooterButton(),this.dockedFooterButton.classList.add(O)}},{key:"showFooterButton",value:function(){this.dockedFooterButton.classList.remove(_),this.dockedFooterButton.removeAttribute(L)}},{key:"hideFooterButton",value:function(){this.dockedFooterButton.classList.add(_),this.dockedFooterButton.setAttribute(L,"-1")}},{key:"onDisclaimerTrigger",value:function(e){var t=e.detail;!(t&&t.keepFooterButtonVisible||this.variantFooter)&&this.showFooterButtonDisclaimer(),this.onToggleFooterTrigger(),this.dispatchDisclaimerOpen(t)}},{key:"onDockedHeaderClick",value:function(){event.target!==event.currentTarget&&w&&this.onToggleFooterTrigger()}},{key:"dispatchDisclaimerOpen",value:function(e){w&&n.Jw.dispatchEvent(n.Jw.createCustomEvent(E.fD.DOCKED_FOOTER.OPEN_DISCLAIMER,{detail:e}))}},{key:"onToggleFooterTrigger",value:function(){w=!w,this.element.classList.toggle("footer--active",w),this.variantFooter||(this.dockedFooterButton.classList[w?"add":"remove"]("".concat("docked-footer__button","--open")),this.dockedFooterButton.dataset.analyticsTrigger=w?"footer-open":"",this.dockedFooterButton.setAttribute("aria-expanded",w),this.dockedFooterButton.classList.contains(O)&&!w&&(this.hideFooterButton(),this.dockedFooterButton.classList.remove(O))),w?(this.tabbables.enableTabbables(),n.Jw.dispatchEvent(n.Jw.createCustomEvent(E.fD.DOCKED_FOOTER.OPEN))):(this.tabbables.disableTabbables(),n.Jw.dispatchEvent(n.Jw.createCustomEvent(E.fD.DOCKED_FOOTER.CLOSE)),(0,n.X5)(0,0,"vertical",this.element),n.Jw.dispatchEvent(n.Jw.createCustomEvent(E.fD.DOCKED_FOOTER.CLOSE_DISCLAIMER)))}},{key:"onKeydownHandler",value:function(e){if(this.element&&w){var t=this.tabbables.allTabbables;e.keyCode===E.sd.TAB&&(t.indexOf(e.target)>=0||this.dockedFooterButton===e.target)&&(e.shiftKey?e.target===this.dockedFooterButton&&(t[t.length-1].focus(),e.preventDefault()):e.target===t[t.length-1]&&(this.dockedFooterButton.focus(),e.preventDefault())),e.keyCode===E.sd.TAB&&-1===t.indexOf(e.target)&&e.target!==this.dockedFooterButton&&(e.preventDefault(),this.dockedFooterButton.focus())}}}]),e}(),I=i(9407),D=i(47755),A=i(14569),N=i(37664);function R(){var e=(0,k.Z)(['\n    <div class="stay-connected__modal wrapper">\n        <h2 class="stay-connected__modal__heading">\n            ','\n        </h2>\n        <p class="stay-connected__modal__subheading">','</p>\n        <div class="stay-connected__modal__fields-container"></div>\n        <div class="stay-connected__modal__disclaimer-container">\n            <p class="stay-connected__modal__disclaimer-text">','</p><hr/>\n            <p class="stay-connected__modal__disclaimer-text">','</p>\n        </div>\n        <div class="stay-connected__modal__button-container"></div>\n    </div>\n']);return R=function(){return e},e}function B(){var e=(0,k.Z)(['\n<div class="stay-connected__modal wrapper">\n    <p class="stay-connected__modal__heading">','</p>\n    <p class="stay-connected__modal__subheading">','</p>\n    <div class="stay-connected__modal__button-container">\n        <button class="button button_primary stay-connected__modal__close-cta">',"</button>\n    </div>\n</div>\n"]);return B=function(){return e},e}var P=function(e){return(0,n.e2)(B(),e.title,e.description,e.ctaLabel)},x=window.mbNafta.ns("pageData").footerLocalization||{},G=x.subscribeEmailSubscribed,q=x.subscribeEmailExists,H=x.subscribeEmailError,V=x.modal,z=x.responseStatus,K=window.mbNafta.pageData.country,Y=function(){function e(t){(0,s.Z)(this,e),this.element=t,this.validate=this.validate.bind(this),this.openModal=this.openModal.bind(this),this.submit=this.submit.bind(this),this.modalElement=function(e){return(0,n.e2)(R(),e.heading,e.subheading,e.disclaimerText,function(e){return(0,n.NR)(e.disclaimerText2,{privacyPolicy:'<a class="link link_plain-link" href="'.concat(e.privacyPolicy.link,'">').concat(e.privacyPolicy.label,"</a>")})}(e))}(V)({getNode:!0}),this.init()}return(0,v.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.attachEvents(),this.createControls()}},{key:"cacheDOM",value:function(){this.renderedEmailElm=this.element.querySelector(".".concat("stay-connected__htl"," .").concat("form__input")),this.inputFieldElm=this.element.querySelector(".".concat("form__input-field")),this.buttonControlElm=this.element.querySelector(".".concat("button-control")),this.validateButtonElm=this.element.querySelector(".".concat("stay-connected__subscribe-cta")),this.buttonLabelElm=this.validateButtonElm.querySelector(".".concat("button__value-text")),this.modalFieldsContainerElm=this.modalElement.querySelector(".".concat("stay-connected__modal__fields-container")),this.modalButtonContainerElm=this.modalElement.querySelector(".".concat("stay-connected__modal__button-container"))}},{key:"attachEvents",value:function(){var e=this;this.inputFieldElm||"ca"!==K||this.validateButtonElm.addEventListener(E.FP.CLICK,(function(t){t.preventDefault(),e.openModal()}))}},{key:"createControls",value:function(){var e=this;this.inputFieldElm||"ca"!==K?this.inputFieldElm&&(this.inputs=[new D.O8({renderedInput:this.renderedEmailElm,validation:[{type:D.O8.VALIDATION_TYPE.REQUIRED,errorMessage:window.mbNafta.ns("pageData").footerLocalization.subscribeEmailErrorEmpty},{type:D.O8.VALIDATION_TYPE.MAX_LENGTH,errorMessage:window.mbNafta.ns("pageData").footerLocalization.subscribeEmailErrorLength},{type:D.O8.VALIDATION_TYPE.EMAIL,errorMessage:window.mbNafta.ns("pageData").footerLocalization.subscribeEmailErrorInvalid}],restrictions:[D.O8.RESTRICTION_TYPE.EMAIL_SPECIAL_CHARS]})],this.buttons=[new A.LoadingButtonControl({renderedControl:this.buttonControlElm,valueText:this.buttonLabelElm.innerHTML,loadingValueText:this.validateButtonElm.dataset.loadingValueText,onClick:this.validate})],this.validateButtonElm.removeAttribute("data-loading-value-text")):(this.modalFieldsContainerElm.innerHTML="",this.inputs=[new D.O8({type:"text",required:!0,labelText:V.firstName.label,maxLength:50,validation:[{type:D.O8.VALIDATION_TYPE.REQUIRED,errorMessage:V.firstName.error},{type:D.O8.VALIDATION_TYPE.MAX_LENGTH,errorMessage:V.firstName.error}],restrictions:[D.O8.RESTRICTION_TYPE.NUMERIC]}),new D.O8({type:"text",required:!0,labelText:V.lastName.label,maxLength:50,validation:[{type:D.O8.VALIDATION_TYPE.REQUIRED,errorMessage:V.lastName.error},{type:D.O8.VALIDATION_TYPE.MAX_LENGTH,errorMessage:V.lastName.error}],restrictions:[D.O8.RESTRICTION_TYPE.NUMERIC]}),new D.O8({type:"text",required:!0,labelText:V.email.label,maxLength:50,validation:[{type:D.O8.VALIDATION_TYPE.REQUIRED,errorMessage:V.email.error},{type:D.O8.VALIDATION_TYPE.MAX_LENGTH,errorMessage:V.email.error},{type:D.O8.VALIDATION_TYPE.EMAIL,errorMessage:V.email.error}],restrictions:[D.O8.RESTRICTION_TYPE.EMAIL_SPECIAL_CHARS]})],[].forEach.call(this.inputs,(function(t){e.modalFieldsContainerElm.appendChild(t.render())})),this.modalSubmitBtn=new A.LoadingButtonControl({valueText:V.submitCtaLabel,loadingValueText:V.submitCtaLabel,type:"primary",cssClasses:"button_primary_subscription",onClick:this.validate}),n.jG.insert(this.modalSubmitBtn.render(),this.modalButtonContainerElm))}},{key:"validate",value:function(e,t){t&&(this.setButtonComplete=t);var i=!0,n=this.inputs[0];this.inputs.forEach((function(e){e.validate()||(n=e,i=!1)})),i?this.submit():(this.setButtonComplete(),this.inputFieldElm?this.inputFieldElm.focus():n.focus())}},{key:"openModal",value:function(){this.resetModalFormFields(),this.modal=new A.Modal(void 0,{modalContent:this.modalElement,sizeSmall:A.Modal.SIZES.FULLSCREEN,sizeLarge:A.Modal.SIZES.INSET}),this.modal.open({callingContainer:this.validateButtonElm})}},{key:"resetModalFormFields",value:function(){this.inputs.forEach((function(e){e.setValue(null)}))}},{key:"submit",value:function(){var e=window.mbNafta.applicationProperties,t=e.iterationCount,i=e.keySize;this.AesUtil=new I.Z(i,t);var o=null,a="/content/public-api/forms/preference/submit?api=subscribe&country=".concat(K);if("ca"===K){var s=encodeURIComponent(this.inputs[0].getValue()),r=encodeURIComponent(this.inputs[1].getValue()),l=encodeURIComponent(this.inputs[2].getValue());a="".concat(a,"&firstName=").concat(s,"&lastName=").concat(r,"&emailId=").concat(l),o=this.onCaResponse.bind(this)}else{var c=encodeURIComponent(this.inputs[0].getValue());a="".concat(a,"&emailId=").concat(c),o=this.onResponse.bind(this)}this.AesUtil.getEncryptedTimestamp().then((function(e){e.error?(console.warn(e.error),o()):(n.pR.setCookie({name:"es",value:e,isSession:!0}),fetch("".concat(a),{headers:{"Content-Type":"application/json","Referrer-Policy":"origin",Referer:window.location.href},method:"POST",credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){if(!e)throw Error("Lead Submission Not Successful");o(e)})).catch((function(e){console.warn(e),o()})))}))}},{key:"onCaResponse",value:function(e){var t=this;this.setButtonComplete();var i=document.querySelector(".".concat("modal__content")),o=null;return o=e&&200===e.status.code?P(z.success)({getNode:!0}):P(z.failure)({getNode:!0}),this.closeModalBtn=o.querySelector(".".concat("stay-connected__modal__close-cta")),this.closeModalBtn&&this.closeModalBtn.addEventListener(E.FP.CLICK,(function(){t.modal.close()})),n.jG.insert(o,i),!1}},{key:"onResponse",value:function(e){return this.setButtonComplete(),e&&200===e.status.code&&"Created"===e.result.httpMessage?this.showSuccessResponse():e&&200===e.status.code&&"OK"===e.result.httpMessage?this.showExistingResponse():this.showErrorResponse(),!1}},{key:"showSuccessResponse",value:function(){var e=N.ZP.SubscribeSuccessTemplate({message:G})({getNode:!0});n.jG.insert(e,this.element)}},{key:"showExistingResponse",value:function(){var e=N.ZP.SubscribeExistsTemplate({message:q})({getNode:!0});n.jG.insert(e,this.element)}},{key:"showErrorResponse",value:function(){var e=N.ZP.SubscribeErrorTemplate({message:H})({getNode:!0});n.jG.insert(e,this.element),this.tryAgainButtonElm=this.element.querySelector(".".concat("stay-connected__try-again-cta")),this.tryAgainButtonElm&&this.tryAgainButtonElm.addEventListener(E.FP.CLICK,this.submit)}}]),e}(),U=i(89920),j=i(53419),J=i(83224),Q={DeferLoader:g,Footer:C,FooterSubscribeForm:Y,GlobalHeader:U.Z,NavProfileModule:j.Z,LazyLoader:A.LazyLoader,CSSLazyLoader:A.CSSLazyLoader,LoadingSpinner:J.Z,HTML5VideoPlayer:A.HTML5VideoPlayer},W=i(4942),X=i(43287),$=i(35722),ee=i(36179),te=i(75629),ie=i(18626),ne=i(13377),oe=i(44646),ae=i(18340),se=i(99543),re=i(75239),le=i(93287),ce={SpecialtyAppAMG:i(88053).Z},he={SpecialtyAppEQ:i(1476).Z},ue=i(46893),de=i(98781),me=i(70976),fe=i(45919),ve=i(88755),ge=i(36441),pe=i(68983),be=i(6664),ye=i(25649),Ee=i(24121),ke=i(44078),Ze=i(17214),Te=i(74887);function Se(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var _e=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(i),!0).forEach((function(t){(0,W.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Se(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},X.Z,{},Q,{},$.Z,{},ee.Z,{},te.Z,{},ie.Z,{},ne.Z,{},oe.Z,{},ae.Z,{},se.Z,{},re.Z,{},le.Z,{},ce,{},he,{},ue.Z,{},de.Z,{},me.Z,{},fe.Z,{},ve.Z,{},ge.Z,{},pe.Z,{},be.Z,{},ye.Z,{},Ee.Z,{},ke.Z,{},Ze.Z,{},Te.Z);function Oe(){return(Oe=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.s.getInstance());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(){for(var e={},t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];i.forEach((function(t){e[t]=_e[t]})),h().loadModules(e)}var Me=function e(){var t;(0,s.Z)(this,e),(0,l.Z)(),this.modules=h().loadModules(Q),t=document.querySelector("html"),n.UO.addZoomListener((function(e){t.dataset.textZoomLevel=n.UO.LEVELS.filter((function(t){return t<=e})).join(" ")})),m.Z.scan(),function(){Oe.apply(this,arguments)}(),new u.Z({provider:window["_".concat(u.Z.CONSTANTS.SATELLITE)],type:u.Z.CONSTANTS.SATELLITE}).logScreenSize(),window.reloadModule=Le};n.ZP.onReady((function(){return new Me}))},75239:function(e,t){t.Z={}},93287:function(e,t,i){i.d(t,{Z:function(){return Z}});var n=i(98243),o=i(42982),a=i(15671),s=i(43144),r=i(48218),l=i(61156),c=i(81442),h=window.mbNafta.ns("pageData","country")||"us",u=window.mbNafta.ns("pageData","variantInfo").isDealer||!1,d=window.mbNafta.ns("pageData","variantInfo").isLargeFormat||!1,m=window.mbNafta.ns("pageData","variantInfo").isWheelstand||!1,f="true"===window.mbNafta.ns("pageData","specialOffers","config").displayOffersByMarket,v=window.mbNafta.ns("pageData").wcmmode.edit,g="data-waypoint",p=!v&&f&&"us"===h&&!u&&!m&&!d,b=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.activeDealerId="",this.featuredOffers=[],this.activeOffers=[],this.cacheDOM(),this.setBindings(),this.init()}return(0,s.Z)(e,[{key:"cacheDOM",value:function(){this.featuredOfferElms=(0,o.Z)(this.element.querySelectorAll(".".concat("featured-offer")))}},{key:"setBindings",value:function(){this.onDealerChange=this.onDealerChange.bind(this)}},{key:"init",value:function(){var e=this;this.featuredOfferElms.forEach((function(t){e.featuredOffers.push(c.b.createFeaturedOffer(t))})),p&&(this.testMarketTypes(),l.Jw.addEventListener(r.fD.SPECIAL_OFFERS_MARKET_CHANGE,this.onDealerChange))}},{key:"testMarketTypes",value:function(){var e=this;this.activeOffers=[],this.featuredOffers.forEach((function(t){var i=2===e.activeOffers.length,n=e.activeOffers.length>=3;t.testMarketType(e.activeDealerId,i,n)&&!n&&e.activeOffers.push(t)})),0===this.activeOffers.length?this.element.removeAttribute(g):this.element.setAttribute(g,this.element.getAttribute("data-stored-waypoint")),this.element.classList[0===this.activeOffers.length?"add":"remove"]("hide"),this.element.classList[1===this.activeOffers.length?"add":"remove"]("featured-offers--single"),this.element.classList[2===this.activeOffers.length?"add":"remove"]("featured-offers--two-offers")}},{key:"onDealerChange",value:function(e){var t=e.detail;this.activeDealerId=t,this.testMarketTypes()}}]),e}(),y=i(81995),E="data-form-config",k=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.setLinkFormData()}return(0,s.Z)(e,[{key:"setLinkFormData",value:function(){var e=Array.from(this.element.getElementsByTagName("a")),t={formType:y.wK.FORM_TYPE.REQUEST_QUOTE,sourceType:y.wK.SOURCE_TYPE.DEFAULT};null==e||e.forEach((function(e){var i=e.getAttribute("href");(null==i?void 0:i.indexOf("/intercept/lead-form/special-offers"))>-1&&!e.getAttribute(E)&&e.setAttribute(E,JSON.stringify(t))}))}}]),e}(),Z={FeaturedOffers:b,OfferList:i(47597).Z,HeroSpecialOffers:k,ScrollToSticky:n.ScrollToSticky}},46893:function(e,t,i){var n=i(98243),o=i(13425),a=i(49356),s=i(4835),r=i(47984),l=i(28689);t.Z={StickyNav:n.StickyNav,LargeTileGrid:o.Z,MultiMediaAsset:a.Z,MultiMediaYouTube:s.Z,TextBlock:r.Z,SpecialtyChapterDetailHero:l.Z}},98781:function(e,t,i){var n=i(63989);t.Z={SpecialtyPage:n.Z}},70976:function(e,t,i){var n=i(4190);t.Z={TermsOfUse:n.N}},88755:function(e,t,i){var n=i(98243),o=i(72089),a=i(4835),s=i(13425),r=i(49356),l=i(95086),c=i(48764),h=i(82396),u=i(74050),d=i(40294),m=i(41026),f=i(99307);t.Z={StickyNav:n.StickyNav,ScrollToSticky:n.ScrollToSticky,ContentTileVehicleOverlay:o.Z,MultiMediaYouTube:a.Z,LargeTileGrid:s.Z,MultiMediaAsset:r.Z,MultiMediaTile:l.Z,MultiSlideCarouselModule:c.Z,MBSlideshow:h.Z,OverlayVideoGrid:u.Z,TextTile:d.Z,GalleryGrid:m.Z,IframeModule:f.Z}},45919:function(e,t,i){var n=i(98243),o=i(72089),a=i(90680),s=i(41026),r=i(99307),l=i(13425),c=i(82396),h=i(49356),u=i(95086),d=i(4835),m=i(48764),f=i(74050),v=i(40294);t.Z={StickyNav:n.StickyNav,ContentTileVehicleOverlay:o.Z,FAQModule:a.Z,GalleryGrid:s.Z,IframeModule:r.Z,LargeTileGrid:l.Z,MBSlideshow:c.Z,MultiMediaAsset:h.Z,MultiMediaTile:u.Z,MultiMediaYouTube:d.Z,MultiSlideCarouselModule:m.Z,OverlayVideoGrid:f.Z,TextTile:v.Z}},36441:function(e,t,i){var n=i(98243),o=i(29889),a=i(4835);t.Z={StickyNav:n.StickyNav,MultiMediaYouTube:a.Z,TimelineHero:o.V1,TimelineTile:o.mu,Timeline:o.TY}},68983:function(e,t,i){var n=i(98243);t.Z={StickyNav:n.StickyNav,ScrollToSticky:n.ScrollToSticky}},6664:function(e,t,i){var n=i(98243);t.Z={ScrollToSticky:n.ScrollToSticky,StickyNav:n.StickyNav}},25649:function(e,t,i){var n=i(73043),o=i(13425),a=i(36582),s=i(99307),r=i(90680),l=i(35101),c=i(21575),h=i(68053),u=i(91683),d=i(49356),m=i(95086),f=i(4835),v=i(40294),g=i(32477),p=i(71890);t.Z={AngledImage:n.Z,LargeTileGrid:o.Z,ImageToggleLinks:a.Z,IframeModule:s.Z,FAQModule:r.Z,ClassModels:l.Z,ClassPageSubNav:c.Z,Gallery:h.Z,ImageSlider:u.Z,InventoryPreferences:p.Z,MultiMediaAsset:d.Z,MultiMediaTile:m.Z,MultiMediaYouTube:f.Z,TextTile:v.Z,WaypointNav:g.Z}},44078:function(e,t,i){var n=i(2923);t.Z={ModelSpecification:n.Z}},74887:function(e,t,i){var n=i(74050),o=i(910),a=i(4835);t.Z={OverlayVideoGrid:n.Z,VideoHubFilters:o.Z,MultiMediaYouTube:a.Z}},20597:function(e,t,i){i.d(t,{Z:function(){return s}});var n=i(15671),o=i(43144),a=i(79725),s=function(){function e(t){(0,n.Z)(this,e),console.log("In here ComplianceLetter form loading js"),this.element=t,this.pluginName=this.element.dataset.pluginId,this.dependencies=this.element.dataset.pluginDependencies,this.dependencyLoader=new a.Z,this.loadPlugin=this.loadPlugin.bind(this),this.cacheDOM(),this.loadPlugin()}return(0,o.Z)(e,[{key:"cacheDOM",value:function(){this.pluginContainer=this.element.querySelector("#".concat(this.pluginName).concat("-plugin-container"))}},{key:"loadPlugin",value:function(){return this.pluginContainer?this.dependencyLoader.loadPlugins([this.pluginName]):Promise.resolve()}}]),e}()}}]);
//# sourceMappingURL=main-e90c707f.js.map