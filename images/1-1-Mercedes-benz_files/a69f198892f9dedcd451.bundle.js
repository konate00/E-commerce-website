"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[7842],{20716:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(15671),r=a(43144),s=a(80662),i=function(){function e(t,a,r){(0,n.Z)(this,e),this.element=t,this.dealer=a,this.map=null,this.isPreferredDealer=r,this.createMap()}return(0,r.Z)(e,[{key:"destroy",value:function(){this.map&&this.map.destroyMap(),this.map=null}},{key:"createMap",value:function(){var e={center:{lat:parseFloat(this.dealer.location.lat),lng:parseFloat(this.dealer.location.lng)},streetViewControl:!1,zoomControl:!1};this.map=new s.b6({element:this.element,config:e,onMapCreatedCallback:this.addDealerMarker.bind(this),markerClickCallback:this.onMarkerClick.bind(this)})}},{key:"addDealerMarker",value:function(){var e=Object.assign({},this.dealer);e.icon=this.isPreferredDealer?"/etc/designs/mb-nafta/images/icon-mb-dealer-location_denim.png":"/etc/designs/mb-nafta/images/icon-mb-dealer-location_black.png",this.map.addMarkers([e],!0)}},{key:"onMarkerClick",value:function(){window.open(this.dealer.directionsLink)}}]),e}()},97842:function(e,t,a){a.d(t,{Z:function(){return ee}});var n=a(87757),r=a.n(n),s=a(15861),i=a(15671),l=a(43144),o=a(82963),c=a(61120),h=a(97326),d=a(60136),u=a(4942),g=a(48218),v=a(61156),m=a(92059),f=a(16266),y=a(87491),p=a(80662),S=a(70816),E={country:window.mbNafta.ns("pageData").country,dealerSearchBar:{buttonStyle:"button button_secondary_alt"},distanceUnit:window.mbNafta.ns("pageData","applicationProperties","distance").distanceUnit||"Mile",distanceUnitAbbr:window.mbNafta.ns("pageData","applicationProperties","distance").distanceUnitAbbr||"mi",language:window.mbNafta.ns("pageData").language,presetDealerEnableChange:!1,presetDealerId:null,showMap:!0,showInventory:!0},D=Object.assign(E,window.mbNafta.ns("pageData","chooseADealerPlugin").config),b=D.country,L=D.dealerSearchBar.buttonStyle,C=D.distanceUnit,k=D.distanceUnitAbbr,w=D.language,_=D.presetDealerId,I={country:b,dealerSearchBar:{buttonStyle:L},distanceUnit:C,distanceUnitAbbr:k,language:w,presetDealerEnableChange:D.presetDealerEnableChange,presetDealerId:_,showMap:D.showMap,showInventory:D.showInventory},M=Object.assign({find:"Find",searchInputLabel:"Postal Code or City, Province",searchInputLabelUS:"Zip Code",dealerSearchErrorMessage:"Invalid Postal Code or City, Province",dealerSearchErrorMessageUS:"Invalid Zip Code",dealerValidationError:"The dealer is currently unavailable.",emptyDealerErrorMessage:"Please select a dealer to continue.",dealerSearchHeading:"Search for your preferred dealer.",dealerResultHeading:"Select one of the dealers near {0}.",closestDealersHeading:"These are the closest dealers based on your search.",selectedDealerHeading:"This is your selected dealer.",changeDealer:"Change Dealer",changeLocation:"Change Location",viewInventory:"View Dealer Inventory",amgPerformanceCenter:"AMG Performance Center",amgPerformanceCenterElite:"AMG Performance Center Elite",serverErrorDescription:"We were unable to process your request. Please try again.",serverErrorTitle:"We're sorry, an error has occurred.",suggestedDealer:"Suggested"},window.mbNafta.ns("pageData").localization),R={find:M.find,searchInputLabel:M.searchInputLabel,searchInputLabelUS:M.searchInputLabelUS,dealerSearchErrorMessage:M.errorMessage,dealerSearchErrorMessageUS:M.errorMessageUS,dealerValidationError:M.dealerValidationError,emptyDealerErrorMessage:M.emptyDealerErrorMessage,dealerSearchHeading:M.dealerSearchHeading,dealerResultHeading:M.dealerResultHeading,dealerResultsSubHeading:M.dealerResultsSubHeading,closestDealersHeading:M.closestDealersHeading,selectedDealerHeading:M.selectedDealerHeading,changeDealer:M.changeDealer,changeLocation:M.changeLocation,viewInventory:M.viewInventory,amgPerformanceCenter:M.amgPerformanceCenter,amgPerformanceCenterElite:M.amgPerformanceCenterElite,serverErrorDescription:M.serverErrorDescription,serverErrorTitle:M.serverErrorTitle,suggestedDealer:M.suggestedDealer},T=a(83224),H=a(30168);function O(){var e=(0,H.Z)(['\n    <div class="dealer-results">\n        ','\n        <div data-dealer-heading></div>\n        <p class="dealer-results__sub-heading-copy dealer-results__sub-heading-copy">\n            <button class="link link_plain-link" data-change-search-cta role="presentation"\n               data-analytics-trigger="change-zip">\n                ','\n            </button>\n        </p>\n        <div data-dealer-results-list></div>\n        <span id="error','" class="dealer-results__error-message" role="alert" aria-live="polite" data-error-message></span>\n    </div>\n']);return O=function(){return e},e}function V(){var e=(0,H.Z)(["\n    ","\n"]);return V=function(){return e},e}function A(){var e=(0,H.Z)(['\n    <ul class="dealer-results__list">\n    </ul>\n']);return A=function(){return e},e}function P(){var e=(0,H.Z)(['\n    <li class="dealer-result-list-item ','" data-analytics-trigger="contact-dealer-select-','" tabindex="0">\n        <div class="dealer-result-list-item__address-container">\n            <div>\n                <span class="dealer-result-list-item__dealer-name">','</span>\n                <span class="dealer-result-list-item__dealer-distance">','</span>\n            </div>\n            <div class="dealer-result-list-item__address">',", ",", "," ",'</div>\n            <div class="dealer-result-list-item__error" id="dealerError-','"/>\n        </div>\n    </li>\n']);return P=function(){return e},e}var N="aria-invalid",Z="aria-describedby",B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dealer,n=t.onSelectCallback,r=arguments.length>2?arguments[2]:void 0;(0,i.Z)(this,e),this.dealerData=a,this.onSelectCallback=n,this.errorMessageId=r,this.element=function(e){var t=e.dealer;return(0,v.e2)(P(),"",t.name,t.name,t.distance,t.address,t.city,t.state,t.zip,t.dealerId)}({dealer:this.dealerData})({getNode:!0}),this.onDealerSelect=this.onDealerSelect.bind(this),this.attachEvents()}return(0,l.Z)(e,[{key:"destroy",value:function(){this.detachEvents()}},{key:"onDealerSelect",value:function(e){var t=e.which;e.type!==g.FP.CLICK&&t!==g.sd.ENTER||this.onSelectCallback(this.dealerData)}},{key:"attachEvents",value:function(){this.element.addEventListener(g.FP.CLICK,this.onDealerSelect),this.element.addEventListener(g.FP.KEYDOWN,this.onDealerSelect)}},{key:"detachEvents",value:function(){this.element.removeEventListener(g.FP.CLICK,this.onDealerSelect),this.element.addEventListener(g.FP.KEYDOWN,this.onDealerSelect)}},{key:"setErrorState",value:function(e){e&&this.element?(this.element.setAttribute(N,"true"),this.element.setAttribute(Z,"error".concat(this.errorMessageId)),this.element.focus()):this.element&&(this.element.removeAttribute(N),this.element.removeAttribute(Z))}},{key:"render",value:function(){return this.element}}]),e}(),U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;(0,i.Z)(this,e),this.content=a,this.dealers=[],this.errorMessageId=n,this.element=(0,v.e2)(A())({getNode:!0}),this.createDealers(t,a)}return(0,l.Z)(e,[{key:"createDealers",value:function(e,t){var a=this;e.forEach((function(e){var n=new B(e,t,a.errorMessageId);v.jG.append(n.render(),a.element),a.dealers.push(n)}))}},{key:"showErrorMessageOnDealer",value:function(e){var t=this.element.querySelector("#dealerError-".concat(e));t&&(t.innerHTML='<div class="error">'.concat(this.content.dealerValidationError,"</div>"))}},{key:"render",value:function(){return this.element}},{key:"focus",set:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.dealers.length&&this.dealers[0].setErrorState(!0)}}]),e}(),j="error",F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.content,n=t.country,r=t.filter,s=t.language,l=t.model,o=t.onDealerSelectCallback;(0,i.Z)(this,e),this.content=a,this.country=n,this.filter=r,this.language=s,this.model=l,this.onDealerSelectCallback=o,this.errorMessageId=(0,v.fV)(),this.element=function(e){var t=e.changeLocationLabel,a=e.dealerResultsSubHeading,n=e.id,r=void 0===n?(0,v.fV)():n;return(0,v.e2)(O(),a?'<h3 class="leads-form__sub-heading">'.concat(a,"</h3>"):"",t,r)}({changeLocationLabel:this.content.changeLocation,dealerResultsSubHeading:this.content.dealerResultsSubHeading,id:this.errorMessageId})({getNode:!0}),this.dealerResultsListContainer=null,this.changeSearchElem=null,this.changeSearchHandler=this.changeSearchHandler.bind(this),this.createDealerResultsList=this.createDealerResultsList.bind(this),this.renderDealerResultsList=this.renderDealerResultsList.bind(this),this.cacheDOM(),this.attachEvents(),this.searchDealers()}return(0,l.Z)(e,[{key:"destroy",value:function(){this.detachEvents(),this.dealerResultsListContainer=null,this.changeSearchElem=null}},{key:"cacheDOM",value:function(){this.dealerResultsListContainer=this.element.querySelector("[".concat("data-dealer-results-list","]")),this.changeSearchElem=this.element.querySelector("[".concat("data-change-search-cta","]")),this.dealerResultHeading=this.element.querySelector("[".concat("data-dealer-heading","]")),this.errorMessageElm=this.element.querySelector("[".concat("data-error-message","]"))}},{key:"attachEvents",value:function(){this.changeSearchElem.addEventListener(g.FP.CLICK,this.changeSearchHandler)}},{key:"detachEvents",value:function(){this.changeSearchElem&&this.changeSearchElem.removeEventListener(g.FP.CLICK,this.changeSearchHandler)}},{key:"changeSearchHandler",value:function(){this.model.setCurrentStep(1)}},{key:"setLoadingSpinner",value:function(){var e=new T.T({isInline:!0}),t=document.createElement("div");t.classList.add("dealer-results-list__loading-list"),t.appendChild(e.render()),v.jG.insert(t,this.dealerResultsListContainer)}},{key:"getSearchFilter",value:function(){return this.filter?this.filter:"mx"===this.country?"sales":"mbDealer"}},{key:"getSearchResultCount",value:function(){return"mx"===this.country?15:9}},{key:"searchDealers",value:function(){var e=this;this.setLoadingSpinner();var t={country:this.country,language:this.language,searchByType:this.model.state.searchByType,searchLocation:this.model.state.searchLocation,start:0,count:this.getSearchResultCount(),filter:this.getSearchFilter()};return y.a.getDealersAlt(t).then((function(t){return t.results.map((function(t){return{dealer:t,onSelectCallback:e.onDealerSelectCallback}}))})).catch((function(t){console.log(t),e.showServerErrorMessage()})).then(this.createDealerResultsList).then(this.renderDealerResultsList)}},{key:"createDealerResultsList",value:function(e){this.renderHeader(e),this.dealerResultsList=new U(e,this.content,this.errorMessageId)}},{key:"renderDealerResultsList",value:function(){v.jG.insert(this.dealerResultsList.render(),this.dealerResultsListContainer),this.model.state.autoSubmit||this.element.querySelector(".".concat("dealer-result-list-item")).focus()}},{key:"renderHeader",value:function(e){if(e&&e.length>0){var t={hasNearbyDistance:parseFloat(e[0].dealer.distance.split(" "))<=25,dealerResultHeading:this.content.dealerResultHeading,closestDealersHeading:this.content.closestDealersHeading,searchLocation:this.model.state.searchString};v.jG.insert((n=(a=t).dealerResultHeading,r=a.closestDealersHeading,s=a.searchLocation,i=a.hasNearbyDistance,(0,v.e2)(V(),i?function(e,t){return'<h3 class="dealer-results__sub-heading">'.concat((0,v.NR)(e,[t]),"</h3>")}(n,s):function(e,t){return'<h3 class="dealer-results__sub-heading">'.concat(t,"</h3>")}(0,r)))({getNode:!0}),this.dealerResultHeading)}var a,n,r,s,i}},{key:"showErrorMessage",value:function(){this.element.classList.add("".concat(j)),this.errorMessageElm.innerText=this.content.emptyDealerErrorMessage}},{key:"showServerErrorMessage",value:function(){this.element.classList.add("".concat(j)),this.errorMessageElm.innerHTML="<div>".concat(this.content.serverErrorTitle,"</div><div>").concat(this.content.serverErrorDescription,"</div>")}},{key:"showErrorMessageOnDealer",value:function(e){this.dealerResultsList.showErrorMessageOnDealer(e)}},{key:"render",value:function(){return this.element}},{key:"focus",set:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.dealerResultsList&&(this.dealerResultsList.focus=!0)}}]),e}(),z=a(20716),G=a(12641);function q(){var e=(0,H.Z)(['\n    <div>\n        <h3 class="choose-a-dealer-plugin__sub-heading">','</h3>\n        <p class="choose-a-dealer-plugin__sub-heading-copy dealer-results__sub-heading-copy ','">\n            <button class="link link_plain-link" data-change-search-cta role="presentation" data-analytics-trigger="change-zip">\n                ','\n            </button>\n        </p>\n        <div class="choose-a-dealer" data-analytics-container="contact-dealer-selected:',":",'">\n            <address class="choose-a-dealer__address-container-dealer">\n                <div>\n                    ','\n                </div>\n                <div class="choose-a-dealer__address choose-a-dealer__address--main">',", ",", ",", ","</div>\n                <div>\n                    ","\n                </div>\n                ","\n            </address>\n            ","\n            ","\n        </div>\n    </div>\n"]);return q=function(){return e},e}var J=function(){function e(t){var a=t.model,n=t.chosenDealer,r=t.disableChange,s=t.showMap,l=t.showInventory,o=t.content;(0,i.Z)(this,e),this.model=a,this.element=function(e){var t,a,n=e.dealer,r=void 0===n?{}:n,s=e.content,i=e.country,l=e.disableChange,o=void 0!==l&&l,c=e.showMap,h=e.showInventory;return(0,v.e2)(q(),s.selectedDealerHeading,o?"hide":"",s.changeDealer,r.name,r.dealerId,i===G.Z.COUNTRIES.US?'<a href="'.concat(r.url,'" class="choose-a-dealer__dealer-name link link_bold" target="_blank" rel="noopener">').concat(r.name,"</a>"):'<p class="choose-a-dealer__dealer-name">'.concat(r.name,"</p>"),r.address,r.city,r.state,r.zip,i===G.Z.COUNTRIES.US?'<a href="tel:'.concat(r.phone,'" class="choose-a-dealer__phone-number">').concat(r.phoneFormatted,"</a>"):"",function(e,t,a,n){var r="";return e.isAmg&&(r+='<i class="'.concat(t,' icon-AMG_logo-performance-center">\n                    <span class="offscreen">').concat(a,"</span>\n                </i>")),e.isAmgElite&&(r+='<i class="'.concat(t,' icon-AMG_logo-performance-center-elite">\n                    <span class="offscreen">').concat(n,"</span>\n                </i>")),r}(r,"choose-a-dealer__icon",s.amgPerformanceCenter,s.amgPerformanceCenterElite),h?(t=r.inventoryUrl,a=s.viewInventory,'\n        <a href="'.concat(t,'" class="choose-a-dealer__link link link_secondary" target="_blank" rel="noopener" data-analytics-trigger="cta">\n            ').concat(a,"\n        </a>\n    ")):"",c?'<div class="choose-a-dealer__map" data-dealer-map></div>':"")}({dealer:n,content:o,country:window.mbNafta.pageData.country,disableChange:r,showMap:s,showInventory:l})({getNode:!0}),this.chosenDealer=n,this.changeSearchElem=null,this.map=null,this.changeSearchHandler=this.changeSearchHandler.bind(this),this.cacheDOM(),this.attachEvents(),s&&this.createMap()}return(0,l.Z)(e,[{key:"destroy",value:function(){this.detachEvents(),this.dealerMap&&this.dealerMap.destroy()}},{key:"cacheDOM",value:function(){this.changeSearchElem=this.element.querySelector("[".concat("data-change-search-cta","]")),this.mapElm=this.element.querySelector("[".concat("data-dealer-map","]"))}},{key:"attachEvents",value:function(){this.changeSearchElem.addEventListener(g.FP.CLICK,this.changeSearchHandler)}},{key:"detachEvents",value:function(){this.changeSearchElem.removeEventListener(g.FP.CLICK,this.changeSearchHandler)}},{key:"changeSearchHandler",value:function(){this.model.setCurrentStep(2)}},{key:"createMap",value:function(){this.dealerMap=new z.Z(this.mapElm,this.chosenDealer,!0)}},{key:"render",value:function(){return this.element}}]),e}(),K={chosenDealer:null,currentStep:1,searchByType:null,searchLocation:null,searchString:null,autoSubmit:!1},x=function(e){function t(e){return(0,i.Z)(this,t),e=Object.assign(K,e),(0,o.Z)(this,(0,c.Z)(t).call(this,e))}return(0,d.Z)(t,e),(0,l.Z)(t,[{key:"setSearchByType",value:function(e){this.state.searchByType=e}},{key:"setAutoSubmit",value:function(e){this.state.autoSubmit=e}},{key:"setSearchLocation",value:function(e){this.state.searchLocation=e?e.trim():e}},{key:"setSearchString",value:function(e){this.state.searchString=e}},{key:"setCurrentStep",value:function(e){this.state.currentStep=e}},{key:"setChosenDealer",value:function(e){this.state.chosenDealer=e}}]),t}(m.y);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){(0,u.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q="choose-a-dealer-plugin--search-bar",X="choose-a-dealer-plugin--results-view",$="choose-a-dealer-plugin--dealer-view",ee=function(e){function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,t),(e=(0,o.Z)(this,(0,c.Z)(t).call(this))).domElement=a.element||document.getElementById("choose-a-dealer-plugin-container"),e.config=W({},I,{},a),e.content=W({},R,{},a.content),e.id=(0,v.fV)(),e.searchBar=null,e.chosenDealerView=null,e.coupledInstance=!1,e.valid=!0,e.onDealerSelectCallback=e.onDealerSelectCallback.bind((0,h.Z)(e)),e.onChosenDealerValidate=e.onChosenDealerValidate.bind((0,h.Z)(e)),e.setSearchFromLocation=e.setSearchFromLocation.bind((0,h.Z)(e)),e.createView=e.createView.bind((0,h.Z)(e)),e.getInstance=e.getInstance.bind((0,h.Z)(e)),e.initialize(),e}var a,n;return(0,d.Z)(t,e),(0,l.Z)(t,[{key:"initialize",value:(n=(0,s.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.s.getInstance();case 2:return this.dealerLocationPrioritization=e.sent,e.next=5,this.setupModel();case 5:this.attachEvents(),this.dispatchInited(),this.initView();case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setupModel",value:(a=(0,s.Z)(r().mark((function e(){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.dealerLocationPrioritization.get("CHOOSE_A_DEALER_PLUGIN"),a=this.getLastLocation(),!this.config.presetDealerId){e.next=5;break}return e.next=5,y.a.getDealer({country:this.config.country,id:this.config.presetDealerId,language:this.config.language,type:"dealers"}).then((function(e){t={data:e,receievedFrom:"default",type:"dealer"},a=W({},a,{searchLocation:e.zip,searchByType:"zip"})}));case 5:this.model=new x(Object.assign(a,{chosenDealer:t.data}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getLastLocation",value:function(){var e=this.dealerLocationPrioritization.get("CHOOSE_A_DEALER_PLUGIN","CHANGE_DEALER");return e?{searchLocation:e.data,searchByType:e.type}:{}}},{key:"attachEvents",value:function(){this.model.attach(this),v.Jw.addEventListener(g.fD.CHOSEN_DEALER_VALIDATE,this.onChosenDealerValidate),v.Jw.addEventListener(g.fD.CHOSEN_DEALER_GET_INSTANCE,this.getInstance)}},{key:"detachEvents",value:function(){this.model.detach(this),v.Jw.removeEventListener(g.fD.CHOSEN_DEALER_VALIDATE,this.onChosenDealerValidate),v.Jw.removeEventListener(g.fD.CHOSEN_DEALER_GET_INSTANCE,this.getInstance)}},{key:"onUpdate",value:function(e,t){if(e.searchLocation!==t.searchLocation&&t.searchLocation&&(this.searchBar&&this.searchBar.destroy(),this.createResultsView()),e.currentStep!==t.currentStep)switch(t.currentStep){case 1:this.resultsView&&this.resultsView.destroy(),this.chosenDealerView&&this.destroyChosenDealerView(),this.createSearchBar(!1,!0);break;case 2:this.chosenDealerView&&this.destroyChosenDealerView(),this.createResultsView()}t.chosenDealer&&e.chosenDealer!==t.chosenDealer&&(this.createChosenDealerView(t.chosenDealer),this.dispatchChosenDealerUpdated(t.chosenDealer))}},{key:"initView",value:function(){var e=this.model.state,t=e.chosenDealer,a=e.searchLocation,n=e.searchByType,r=t;this.setSearchFromLocation(a,n).then(this.createView.bind(this,r)).catch((function(e){return console.error("Error init of App, ".concat(e))}))}},{key:"setSearchFromLocation",value:function(e,t){return Promise.resolve().then((function(){return e&&"place"===t?p.cJ.getCityStateForPlace(e).then((function(e){return"".concat(e.city,", ").concat(e.region)})):e})).then(this.model.setSearchString.bind(this.model)).catch((function(e){return console.error("Error setting searchString, ".concat(e))}))}},{key:"createView",value:function(e){if(e){var t,a,n=!(null==this||null===(t=this.config)||void 0===t||!t.filter),r=n&&(null==e||null===(a=e.badges)||void 0===a?void 0:a.includes(this.config.filter));n&&r||!n?(this.createChosenDealerView(e),this.dispatchChosenDealerUpdated(e)):this.createSearchBar()}else this.createSearchBar()}},{key:"createSearchBar",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.model.setCurrentStep(1),this.searchBar=new f.D({autoSubmitLocation:e,buttonStyle:this.getButtonStyle(this.config.dealerSearchBar.buttonStyle),country:this.config.country,ctaLabel:this.content.find,dealerSearchErrorMessage:this.config.country===G.Z.COUNTRIES.US?this.content.dealerSearchErrorMessageUS:this.content.dealerSearchErrorMessage,defaultLocation:{searchLocation:this.model.state.searchLocation,searchByType:this.model.state.searchByType,searchType:this.model.state.searchType},onSubmit:this.setSearch.bind(this),searchInputLabel:this.config.country===G.Z.COUNTRIES.US?this.content.searchInputLabelUS:this.content.searchInputLabel,sectionHeading:this.content.dealerSearchHeading,theme:f.D.THEMES.CHOOSE_A_DEALER}),v.jG.insert(this.searchBar.render(),this.domElement),this.domElement.classList.add(Q),this.domElement.classList.remove(X),this.domElement.classList.remove($),t){var a=this.searchBar.element.querySelector(".".concat("form__input-field--can-reset"));null==a||a.focus()}}},{key:"createResultsView",value:function(){var e;this.model.setCurrentStep(2),this.resultsView=new F({content:this.content,country:this.config.country,filter:null===(e=this.config)||void 0===e?void 0:e.filter,language:this.config.language,model:this.model,onDealerSelectCallback:this.onDealerSelectCallback}),v.jG.insert(this.resultsView.render(),this.domElement),this.domElement.classList.remove(Q),this.domElement.classList.add(X),this.domElement.classList.remove($)}},{key:"createChosenDealerView",value:function(e){this.model.setCurrentStep(3),this.chosenDealerView=new J({model:this.model,chosenDealer:e,disableChange:this.config.disableChange,showMap:this.config.showMap,showInventory:this.config.showInventory,content:this.content}),v.jG.insert(this.chosenDealerView.render(),this.domElement),this.domElement.classList.remove(Q),this.domElement.classList.remove(X),this.domElement.classList.add($);var t=this.domElement.querySelector(".".concat("choose-a-dealer__dealer-name"));null==t||t.focus()}},{key:"setSearch",value:function(e){var t=e.searchLocation;this.model.setSearchLocation(null),this.model.setSearchByType(e.searchByType),this.model.setSearchString(e.searchString),this.model.setAutoSubmit(e.autoSubmit),this.model.setSearchLocation(t)}},{key:"dispatchChosenDealerUpdated",value:function(e){var t,a,n,r,s,i,l,o=this.model.state,c=o.searchString,h=o.searchByType;v.Jw.dispatchEvent(v.Jw.createCustomEvent(g.fD.CHOSEN_DEALER_UPDATED,{detail:{address:null!==(t=null==e?void 0:e.address)&&void 0!==t?t:"",city:null!==(a=null==e?void 0:e.city)&&void 0!==a?a:"",phone:null!==(n=null==e?void 0:e.phone)&&void 0!==n?n:"",chosenDealerName:null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"",dealerId:null!==(s=null==e?void 0:e.dealerId)&&void 0!==s?s:"",searchByType:h,searchString:c,state:null!==(i=null==e?void 0:e.state)&&void 0!==i?i:"",zip:null!==(l=null==e?void 0:e.zip)&&void 0!==l?l:""}}))}},{key:"onDealerSelectCallback",value:function(e){var t=this,a=S.s.DATA_TYPES.LAST_SELECTED_DEALER;this.config.onDealerSelectValidate?this.config.onDealerSelectValidate(e.dealerId,e.country).then((function(n){n?(t.dealerLocationPrioritization.set(a,e),t.model.setChosenDealer(e)):t.resultsView.showErrorMessageOnDealer(e.dealerId)})):(this.dealerLocationPrioritization.set(a,e),this.model.setChosenDealer(e))}},{key:"destroyChosenDealerView",value:function(){this.chosenDealerView.destroy(),this.dispatchChosenDealerUpdated(null),this.model.setChosenDealer(null)}},{key:"destroy",value:function(){this.detachEvents(),this.searchBar&&this.searchBar.destroy(),this.resultsView&&this.resultsView.destroy(),this.chosenDealerView&&this.destroyChosenDealerView()}},{key:"onChosenDealerValidate",value:function(){this.validate()}},{key:"validate",value:function(){var e=this.model.state,t=e.preferredDealer,a=e.lastSelectedDealer,n=e.currentStep,r=!0;t||a||(r=!1,1===n?this.searchBar.showError(this.content.emptyDealerErrorMessage,!1):this.resultsView.showErrorMessage()),this.valid=r}},{key:"isValid",value:function(){return this.valid}},{key:"getButtonStyle",value:function(e){return e===t.BUTTON_STYLES.SECONDARY?"button button_secondary_alt":e===t.BUTTON_STYLES.LINK?"link link_primary":"button button_primary"}},{key:"dispatchInited",value:function(){v.Jw.dispatchEvent(v.Jw.createCustomEvent(g.fD.CHOSEN_DEALER_INITED,{detail:{instance:this}}))}},{key:"getInstance",value:function(){v.Jw.dispatchEvent(v.Jw.createCustomEvent(g.fD.CHOSEN_DEALER_SET_INSTANCE,{detail:{instance:this}}))}},{key:"setInstanceMode",value:function(e){this.coupledInstance=e}},{key:"focus",set:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.model.state.currentStep;e&&(1===t&&this.searchBar?this.searchBar.focus=!0:2===t&&this.resultsView&&(this.resultsView.focus=!0))}}]),t}(m.Q);(0,u.Z)(ee,"BUTTON_STYLES",{LINK:"link",PRIMARY:"primary",SECONDARY:"secondary"}),(0,u.Z)(ee,"FILTERS",{MB_DEALER:"mbDealer"})}}]);
//# sourceMappingURL=a69f198892f9dedcd451.bundle.js.map