"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[9064],{49409:function(e,t,n){var i=n(61156),s=window.mbNafta.applicationProperties.eaiServiceBaseUrlLocale,a="x-fss-session-token";t.Z={getSearchResults:function(e){var t=e.query,n=e.offset,r=e.callback,o=void 0===r?i.ZT:r,l=e.suggest,c=void 0!==l&&l,u=i.tO.localStorage.read(a),h="".concat(s,"/").concat((0,i.NR)("fss/search?query={query}&offset={offset}&suggest={suggest}",{query:encodeURIComponent(t),offset:n,suggest:c}));return fetch(h,{method:"POST",headers:{"Content-Type":"application/json","Referrer-Policy":"origin","x-fss-session-token":u}}).then((function(e){return e.json()})).then((function(e){i.tO.localStorage.create(a,e.result.token),e.result&&o(e.result)})).catch((function(e){return o(e)}))},getSearchSuggestions:function(e,t){var n="".concat(s,"/").concat("fss/suggestions?query=").concat(encodeURIComponent(e));return fetch(n,{method:"POST",headers:{"Content-Type":"application/json","Referrer-Policy":"origin"}}).then((function(e){return e.json()})).then((function(e){return t?t(e):e}))}}},19064:function(e,t,n){n.d(t,{Tj:function(){return l},sZ:function(){return m},Zh:function(){return A}});var i=n(15671),s=n(43144),a=n(61156),r=n(30168);function o(){var e=(0,r.Z)(['\n    <div class="search-quicklinks">\n        <h3 class="search-quicklinks__heading">','</h3>\n        <ul class="search-quicklinks__list">\n            ',"\n        </ul>\n    </div>\n"]);return o=function(){return e},e}var l=function(){function e(t){(0,i.Z)(this,e),this.element=t,this.createTemplate()}return(0,s.Z)(e,[{key:"createTemplate",value:function(){var e=window.mbNafta.ns("pageData","searchPage","config").searchLinkGroup,t=e.heading,n=e.quickLinks;this.templateElm=function(e,t){return(0,a.e2)(o(),e,t.map((function(e){return'\n                <li class="search-quicklinks__item">\n                    <a href="'.concat(e.linkDestination,'" class="link link_plain-link search-quicklinks__link" data-analytics-trigger="cta">').concat(e.linkText,"</a>\n                </li>\n            ")})).join(""))}(t,n)({getNode:!0}),a.jG.insert(this.templateElm,this.element)}},{key:"destroy",value:function(){this.templateElm.remove()}}]),e}(),c=n(4942),u=n(48218);function h(){var e=(0,r.Z)(['\n    <div class="search-results">\n        <div class="search-results__details" aria-live="polite">\n            <h2 class="search-results__note hide" data-analytics-container=""></h2>\n            <span class="search-results__count"></span>\n        </div>\n        <ul class="search-results__set"></ul>\n        <button class="view-more-cta">\n            <span>','</span>\n            <span class="icon-mb"></span>\n        </button>\n    </div>\n']);return h=function(){return e},e}function p(){var e=(0,r.Z)(['\n    <li class="search-results__result-wrapper">\n        <a class="search-results__result link link_plain-link" href="','" ',"  ",'>\n            <h2 class="search-results__result-title">',"</h2>\n            ","\n            ","\n        </a>\n    </li>\n"]);return p=function(){return e},e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var v="hide",f={partial:"partial-results",nr:"no-results"},y={loadMore:"Load More",noExactMatchesFound:"No exact matches found.",noResultsFound:"No results found.",searchResults:"{0} search results"},m=function(){function e(t){var n=t.element,s=t.localization,r=void 0===s?{}:s,o=t.viewMoreCallback,l=void 0===o?a.ZT:o;(0,i.Z)(this,e),this.element=n,this.viewMoreCallback=l,this.localization=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},y,{},r),this.totalCount=0,this.loadedCount=0,this.init()}return(0,s.Z)(e,[{key:"init",value:function(){this.createTemplate(),this.cacheDOM(),this.attachEvents()}},{key:"createTemplate",value:function(){var e;this.templateElm=(e=this.localization,(0,a.e2)(h(),e.loadMore))({getNode:!0}),a.jG.insert(this.templateElm,this.element)}},{key:"cacheDOM",value:function(){this.resultsCountElm=this.element.querySelector(".".concat("search-results__count")),this.resultsNoteElm=this.element.querySelector(".".concat("search-results__note")),this.resultsSetElm=this.element.querySelector(".".concat("search-results__set")),this.viewMoreCTAElm=this.element.querySelector(".".concat("view-more-cta"))}},{key:"attachEvents",value:function(){this.viewMoreCTAElm.addEventListener(u.FP.CLICK,this.viewMoreCallback)}},{key:"detachEvents",value:function(){this.viewMoreCTAElm.removeEventListener(u.FP.CLICK,this.viewMoreCallback)}},{key:"setTotalCount",value:function(e){this.totalCount=e,e?(a.jG.insert(a.jG.fromTemplate("".concat((0,a.NR)(this.localization.searchResults,[e]))),this.resultsCountElm),this.resultsCountElm.classList.remove(v)):this.resultsCountElm.classList.add(v)}},{key:"setResultType",value:function(e){switch(e){case"exact":this.hideResultNote();break;case"partial":this.showResultNote(e,this.localization.noExactMatchesFound);break;case"nr":this.showResultNote(e,this.localization.noResultsFound)}}},{key:"hideResultNote",value:function(){this.resultsNoteElm.innerText="",this.resultsNoteElm.classList.add(v)}},{key:"showResultNote",value:function(e,t){this.resultsNoteElm.innerText=t,this.resultsNoteElm.dataset.analyticsContainer=f[e],this.resultsNoteElm.classList.remove(v)}},{key:"addSetPage",value:function(e,t){var n,i=this;this.loadedCount+=e.length,e.forEach((function(e,s){var r=function(e,t){return(0,a.e2)(p(),e.url,-1===e.displayUrl.indexOf("mbusa.com")?'target="_blank"':"",t?'data-analytics-trigger="additional-links"':"",e.title,t?"":'<span class="search-results__result-url">'.concat(e.displayUrl,"</span>"),e.snippet?'<p class="search-results__result-snippet">'.concat(e.snippet,"</p>"):"")}(e,t)({getNode:!0});a.jG.append(r,i.resultsSetElm),0===s&&(n=r)})),n.querySelector(".".concat("search-results__result")).focus(),this.setViewMoreCtaVisibility()}},{key:"clearResults",value:function(){a.jG.empty(this.resultsSetElm),this.hideResultNote(),this.setTotalCount(0),this.loadedCount=0,this.setViewMoreCtaVisibility()}},{key:"setViewMoreCtaVisibility",value:function(){var e=this.loadedCount<this.totalCount?"add":"remove";this.viewMoreCTAElm.classList[e]("view-more-cta--visible")}},{key:"destroy",value:function(){this.detachEvents()}}]),e}(),g=n(85879),E=n(40665),O=n(49409);function _(){var e=(0,r.Z)(['\n    <div class="site-search__component-container">\n        <div class="site-search__form-container">\n            <div class="site-search__form">\n                <div class="site-search__input-container"></div>\n                <div class="site-search__submit-container">\n                    <button type="submit" class="site-search__submit">\n                        <span class="offscreen">','</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n        <div class="site-search__server-error-container"></div>\n    </div>\n']);return _=function(){return e},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var k={requiredInputError:"Please enter a search term.",searchDescriptionCopy:"Use the enter key to search or use the up and down arrows to select from the list of suggested results.",searchInputLabel:"Search Mercedes-Benz Vehicles",searchButtonLabel:"Search"},C="siteSearchForm_".concat((0,a.fV)()),A=function(){function e(t){(0,i.Z)(this,e),this.element=t,this.config={submitCallback:a.ZT},this.localization=Object.assign(k,window.mbNafta.ns("pageData","globalHeader","localization").siteSearch),this.form=null,this.suggest=!1,this.serverError=null,this.init()}return(0,s.Z)(e,[{key:"init",value:function(){this.createTemplate(),this.setBindings(),this.cacheDOM(),this.createForm(),this.createTypeAhead(),this.registerInput(),this.renderForm()}},{key:"setBindings",value:function(){this.onFormSubmit=this.onFormSubmit.bind(this),this.onInputChange=this.onInputChange.bind(this),this.handleSuggestions=this.handleSuggestions.bind(this),this.onSelectSuggestion=this.onSelectSuggestion.bind(this),this.renderServerError=this.renderServerError.bind(this),this.clearServerError=this.clearServerError.bind(this)}},{key:"createTemplate",value:function(){var e;this.componentContainerElm=(e=this.localization.searchButtonLabel,(0,a.e2)(_(),e))({getNode:!0}),a.jG.append(this.componentContainerElm,this.element)}},{key:"cacheDOM",value:function(){this.formContainerElm=this.element.querySelector(".".concat("site-search__form-container")),this.formElm=this.element.querySelector(".".concat("site-search__form")),this.inputContainerElm=this.element.querySelector(".".concat("site-search__input-container")),this.serverErrorContainerElm=this.element.querySelector(".".concat("site-search__server-error-container"))}},{key:"createForm",value:function(){var e={element:this.formElm,id:C,onSubmit:this.onFormSubmit,role:"search",prevalidate:!0};this.form=new g.NI(e)}},{key:"createTypeAhead",value:function(){var e={descriptionCopy:this.localization.searchDescriptionCopy,enableAutoSelect:!1,enableValidateSelectedOption:!1,formId:C,inputRequired:!0,includeRequiredMark:!1,inputRequiredErrorMessage:this.localization.requiredInputError,labelText:this.localization.searchInputLabel,name:"search",type:"search",setUserInput:this.onInputChange,setSelectedOption:this.onSelectSuggestion,validateOnInputBlur:!1};this.typeAhead=new E.Z(this.inputContainerElm,e)}},{key:"registerInput",value:function(){if(this.form&&this.typeAhead){var e=this.typeAhead.getInput();this.form.register(e)}}},{key:"renderForm",value:function(){this.formContainerElm.appendChild(this.form.render())}},{key:"onFormSubmit",value:function(){this.config.submitCallback(this.typeAhead.value,this.suggest),this.suggest=!1;var e=(0,a.f1)(window.location);e.search=this.typeAhead.value,a.m8.replaceState(null,null,(0,a.HD)(e))}},{key:"onInputChange",value:function(e){e.length>=3?O.Z.getSearchSuggestions(e,this.handleSuggestions):this.typeAhead.clearOptions({forceClear:!0,updateAlertMessage:!0})}},{key:"handleSuggestions",value:function(e){var t=e.result;if(t&&t.suggests){var n,i=t.suggests.map((function(e){return{name:e}}));null===(n=this.typeAhead)||void 0===n||n.createOptions(i)}}},{key:"onSelectSuggestion",value:function(){this.suggest=!0,this.form.submit()}},{key:"updateConfig",value:function(e){this.config=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.config,{},e)}},{key:"pushSearch",value:function(e){this.typeAhead.value=e}},{key:"destroy",value:function(){var e;null===(e=this.typeAhead)||void 0===e||e.destroy()}},{key:"renderServerError",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.serverError||(this.serverError=new g.Xq({title:n,description:e})),this.serverError.show(this.serverErrorContainerElm),null===(t=this.typeAhead)||void 0===t||t.clearOptions({forceClear:!0,updateAlertMessage:!0})}},{key:"clearServerError",value:function(){this.serverError&&this.serverError.hide()}}]),e}()},40665:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(4942),s=n(15671),a=n(43144),r=n(61156),o=n(48218),l=n(47755),c=n(30168);function u(){var e=(0,c.Z)(['\n    <div class="type-ahead">\n        <div aria-haspopup="listbox"\n             class="type-ahead__input-container">\n        </div>\n        <div id="type-ahead__alert_','"\n             class="type-ahead__alert offscreen"\n             role="alert">\n        </div>\n        <div class="offscreen" id="type-ahead__desc_','">\n            ',"\n        </div>\n        ",'\n        <div class="type-ahead__wrapper"\n             id="type-ahead__wrapper_','"\n             role="listbox">\n        </div>\n    </div>\n']);return u=function(){return e},e}function h(){var e=(0,c.Z)(['\n    <div class="type-ahead__results">\n        <ul id="type-ahead__list" aria-labelledby="type-ahead__list-label">\n            ',"\n        </ul>\n    </div>\n"]);return h=function(){return e},e}function p(){var e=(0,c.Z)(['\n    <div aria-live="polite">\n        <div class="type-ahead__wrapper">\n            <div class="type-ahead__results">\n                <ul id="type-ahead__list">\n                    <li class="type-ahead__loading">\n                        ',"\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n"]);return p=function(){return e},e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=window.mbNafta.ns("pageData").localization,y={TYPE_AHEAD_ALERT:"type-ahead__alert",TYPE_AHEAD_INPUT_CONTAINER:"type-ahead__input-container",TYPE_AHEAD_WRAPPER:"type-ahead__wrapper",TYPE_AHEAD_RESULTS:"type-ahead__results",TYPE_AHEAD_OPTION:"type-ahead__option",TYPE_AHEAD_CUSTOM_ERROR_CTA:"type-ahead__error-cta",TYPE_AHEAD_CUSTOM_ERROR:"type-ahead__custom-error",TYPE_AHEAD_CUSTOM_ERROR_CONTAINER:"form__input-error"},m={alertCopy:f.typeAheadAlertCopy,analyticsTrigger:"",clearOptions:r.ZT,customErrorMessage:null,descriptionCopy:f.typeAheadDescriptionCopy,disableInput:!1,enableValidateSelectedOption:!1,errorMessage:"",formId:"",includeRequiredMark:!0,inputRequired:!1,inputRequiredErrorMessage:"",labelText:"",name:"",requireSelection:!1,selectedOption:null,setSelectedOption:r.ZT,setUserInput:r.ZT,truncateInput:!1,type:"text",validateOnInputBlur:!0,validateSelectedErrorMessage:""},g=function(){function e(t,n){(0,s.Z)(this,e),this.element=t,this.config=v({},m,{},n),this.isOptionListFocus=!1,this.typeAheadElm=null,this.typeAheadInputElm=null,this.typeAheadResultsElm=null,this.inputValue=null,this.uid=(0,r.fV)(),this.state={isInputValid:!0,inputId:""},this.setBindings(),this.createTemplate(),this.cacheDOM(),this.createInputTextControl(),this.attachAllyEvents()}return(0,a.Z)(e,[{key:"setBindings",value:function(){this.onClickOutside=this.onClickOutside.bind(this),this.onTabOutside=this.onTabOutside.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onInputFocus=this.onInputFocus.bind(this),this.clearOptions=this.clearOptions.bind(this),this.onOptionFocus=this.onOptionFocus.bind(this),this.onOptionListBlur=this.onOptionListBlur.bind(this),this.onOptionListFocus=this.onOptionListFocus.bind(this),this.checkInputChangeKey=this.checkInputChangeKey.bind(this),this.onOptionListChange=this.onOptionListChange.bind(this),this.validateSelectedOption=this.validateSelectedOption.bind(this),this.errorCtaCallback=this.errorCtaCallback.bind(this)}},{key:"createTemplate",value:function(){var e,t,n,i,s,a,o={description:this.config.descriptionCopy,customErrorMessage:this.config.customErrorMessage,uid:this.uid};this.typeAheadElm=(t=(e=o).customErrorMessage,i=void 0===(n=e.description)?"":n,a=void 0===(s=e.uid)?(0,r.fV)():s,(0,r.e2)(u(),a,a,i,t?'<div class="form__input-error" aria-live="polite">\n            '.concat(t.cta||t.description?function(e){var t=e.cta?'<button class="link_plain-link type-ahead__error-cta" type="button">'.concat(e.cta,"</button>"):"",n=e.description?e.description:"";return'\n        <div tabIndex="0">\n            '.concat(n,"\n            ").concat(t,"\n        </div>\n    ")}(t):"","\n        </div>"):"",a))({getNode:!0}),r.jG.append(this.typeAheadElm,this.element)}},{key:"cacheDOM",value:function(){this.inputContainerElm=this.element.querySelector(".".concat(y.TYPE_AHEAD_INPUT_CONTAINER)),this.errorMessageElm=this.element.querySelector(".".concat(y.TYPE_AHEAD_CUSTOM_ERROR_CONTAINER)),this.alertMessageElm=this.element.querySelector(".".concat(y.TYPE_AHEAD_ALERT)),this.typeAheadWrapperElm=this.element.querySelector(".".concat(y.TYPE_AHEAD_WRAPPER))}},{key:"attachAllyEvents",value:function(){this.element.addEventListener(o.FP.KEYUP,this.onKeyUp),this.tabOutside=new r.yM(this.element,{onBlur:this.onTabOutside}),this.clickOutside=new r.Lp(this.element,r.ZT,this.onClickOutside,{useCapture:!1})}},{key:"detachAllyEvents",value:function(){var e,t;this.element.removeEventListener(o.FP.KEYUP,this.onKeyUp),null===(e=this.tabOutside)||void 0===e||e.destroy(),null===(t=this.clickOutside)||void 0===t||t.destroy()}},{key:"createInputTextControl",value:function(){var e={analyticsTrigger:this.config.analyticsTrigger,autocomplete:!1,ariaAutoComplete:"list",ariaActiveDescendant:this.getState().inputId,ariaDescribedby:"type-ahead__desc_".concat(this.uid),ariaExpanded:!1,ariaOwns:"type-ahead__wrapper_".concat(this.uid),allowReset:!0,role:"combobox",type:this.config.type,formId:this.config.formId,handleClickTabOutside:!1,id:"type-ahead_".concat(this.uid),maxLength:255,required:this.config.includeRequiredMark,disabled:this.config.disableInput,labelText:this.config.labelText,name:this.config.name,truncateInput:this.config.truncateInput,valueText:this.config.selectedOption?this.config.selectedOption.name:null,onKeyupCallback:this.onInputChange,onBlurCallback:this.onInputBlur,onFocusCallback:this.onInputFocus,validation:this.handleInputValidation()};this.typeAheadInputElm=new l.O8(e);var t=this.typeAheadInputElm.render();this.inputContainerElm.append(t)}},{key:"handleInputValidation",value:function(){var e=[];return this.config.inputRequired&&e.push({type:l.O8.VALIDATION_TYPE.REQUIRED,errorMessage:this.config.inputRequiredErrorMessage||this.config.errorMessage}),this.config.enableValidateSelectedOption&&e.push({type:l.O8.VALIDATION_TYPE.CUSTOM,config:{callback:this.validateSelectedOption},errorMessage:this.config.validateSelectedErrorMessage||this.config.errorMessage}),e}},{key:"getInput",value:function(){return this.typeAheadInputElm}},{key:"createOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.config.options=t,this.clearOptions({forceClear:!0,onlyOptionsList:!0}),t.length>0&&(this.typeAheadResultsElm=function(e){return(0,r.e2)(h(),function(e){return e.map((function(e,t){return'\n            <li class="type-ahead__option" key='.concat(t,'\n                id="type-ahead__item-').concat(t,'"\n                role="option"\n                tabIndex="-1">\n                ').concat(e.name,"\n            </li>\n    ")})).join("")}(e))}(t)({getNode:!0}),this.typeAheadResultsElm.addEventListener(o.FP.FOCUS,this.onOptionListFocus),this.typeAheadResultsElm.addEventListener(o.FP.BLUR,this.onOptionListBlur),this.typeAheadResultsElm.addEventListener(o.FP.KEYDOWN,this.onOptionListChange),this.typeAheadInputElm.setAriaExpanded(!0),this.optionsList=this.typeAheadResultsElm.querySelectorAll(".".concat(y.TYPE_AHEAD_OPTION)),this.optionsList.forEach((function(n,i){n.addEventListener(o.FP.CLICK,e.onSelectOption.bind(e,t[i])),n.addEventListener(o.FP.FOCUS,e.onOptionFocus)})),this.clearLoading(),r.jG.append(this.typeAheadResultsElm,this.typeAheadWrapperElm)),this.updateAlertMessage(t.length)}},{key:"updateAlertMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.alertMessageElm.innerText=null!==e?(0,r.NR)(this.config.alertCopy,[e]):""}},{key:"createLoading",value:function(e){this.clearOptions({forceClear:!0,updateAlertMessage:!0}),this.clearLoading(),this.typeAheadLoadingElm=function(e){return(0,r.e2)(p(),e)}(e)({getNode:!0}),r.jG.append(this.typeAheadLoadingElm,this.typeAheadElm)}},{key:"clearLoading",value:function(){this.typeAheadLoadingElm&&this.typeAheadLoadingElm.remove()}},{key:"showErrorMessage",value:function(e){this.errorMessageElm.classList[e?"add":"remove"](y.TYPE_AHEAD_CUSTOM_ERROR),e&&this.clearLoading(),this.config.customErrorMessage.cta&&e&&(this.errorMessageCtaElm=this.errorMessageElm.querySelector(".".concat(y.TYPE_AHEAD_CUSTOM_ERROR_CTA)),this.errorMessageCtaElm.addEventListener(o.FP.CLICK,this.errorCtaCallback))}},{key:"onInputChange",value:function(e){var t=e.target.value,n=e.which;this.inputValue!==t&&(this.config.setUserInput(t),this.inputValue=t),this.checkInputChangeKey(n,t)}},{key:"onInputFocus",value:function(){this.updateState({isInputValid:!0})}},{key:"onInputBlur",value:function(e){var t=e.relatedTarget,n=this.config.validateOnInputBlur;t&&!this.validateBlurElements(t)||n&&(this.validateInput(),this.updateState({isInputValid:this.typeAheadInputElm.isValid()}))}},{key:"onKeyUp",value:function(e){e.which===o.sd.ESC&&(this.clearOptions({forceClear:!0,updateAlertMessage:!0}),this.isOptionListFocus&&(this.setFocusOnInput(e),this.isOptionListFocus=!1))}},{key:"clearOptions",value:function(e){var t=e.forceClear,n=void 0!==t&&t,i=e.onlyOptionsList,s=void 0!==i&&i,a=e.updateAlertMessage,r=void 0!==a&&a;(this.validateBlurElements(document.activeElement)||n)&&(this.typeAheadResultsElm&&(this.typeAheadInputElm.setAriaExpanded(!1),this.typeAheadResultsElm.remove()),this.config.clearOptions&&!s&&this.config.clearOptions(),r&&this.updateAlertMessage())}},{key:"onSelectOption",value:function(e){var t=e?e.name:null;this.isOptionListFocus=!1,this.typeAheadInputElm.setValue(t),this.config.setSelectedOption&&this.config.setSelectedOption(e),this.inputValue=t,this.validateInput(),this.clearOptions({forceClear:!0,updateAlertMessage:!0}),this.hideClearBtn(),this.updateState({inputId:""})}},{key:"setNewSelectedOption",value:function(e){this.config.selectedOption=e}},{key:"autoSelectLocation",value:function(){var e=this.config.options;1===e.length&&this.onSelectOption(e[0])}},{key:"checkInputChangeKey",value:function(e){e===o.sd.ENTER&&this.config.requireSelection?this.autoSelectLocation():e===o.sd.DOWN&&(this.isOptionListFocus=!0,this.onOptionListFocus())}},{key:"onOptionListBlur",value:function(e){var t=e.relatedTarget,n=this.config.validateOnInputBlur;t&&!this.validateBlurElements(t)||(this.isOptionListFocus=!1,n&&this.validateInput(),this.clearOptions({forceClear:!0,updateAlertMessage:!0}))}},{key:"onOptionListFocus",value:function(){var e=this.typeAheadElm.getElementsByClassName(y.TYPE_AHEAD_OPTION);e.length>0&&(this.isOptionListFocus=!0,e[0].focus(),this.updateState({inputId:e[0].id}))}},{key:"onOptionListChange",value:function(e){var t=document.activeElement;switch(e.which){case o.sd.UP:this.handleOptionUpArrow(e,t);break;case o.sd.DOWN:this.handleOptionDownArrow(e,t);break;case o.sd.ENTER:this.processKeyEnterOnOptionList(e);break;case o.sd.TAB:e.shiftKey?this.setFocusOnInput(e):this.typeAheadInputElm.getResetButton()&&this.setFocusOnClear(e)}}},{key:"setFocusOnInput",value:function(e){e.preventDefault(),e.stopPropagation(),this.typeAheadInputElm.getInputElement().focus()}},{key:"setFocusOnClear",value:function(e){e.preventDefault(),e.stopPropagation(),this.typeAheadInputElm.getResetButton().focus()}},{key:"onOptionFocus",value:function(e){e.stopPropagation()}},{key:"onTabOutside",value:function(){this.clearOptions({forceClear:!0,updateAlertMessage:!0}),this.hideClearBtn()}},{key:"onClickOutside",value:function(){this.clearOptions({forceClear:!0,updateAlertMessage:!0}),this.hideClearBtn()}},{key:"hideClearBtn",value:function(){this.typeAheadInputElm.onClickOutside()}},{key:"handleOptionUpArrow",value:function(e,t){if(e.preventDefault(),e.stopPropagation(),t){var n=t.previousElementSibling;n&&(n.focus(),this.updateState({inputId:n.id}))}}},{key:"handleOptionDownArrow",value:function(e,t){if(e.preventDefault(),e.stopPropagation(),t){var n=t.nextElementSibling;n&&(n.focus(),this.updateState({inputId:n.id}))}}},{key:"processKeyEnterOnOptionList",value:function(e){var t=this.config.options;e.preventDefault();var n=e.target;if(n){var i=t.filter((function(e){return e.name===n.innerHTML.trim()}))[0];this.onSelectOption(i),this.updateState({inputId:""})}}},{key:"validateInput",value:function(){this.typeAheadInputElm.validate()}},{key:"validateBlurElements",value:function(e){return!(!e||e.classList.contains(y.OPTION)||e.classList.contains(y.TYPE_AHEAD_WRAPPER)||e.classList.contains(y.TYPE_AHEAD_CUSTOM_ERROR_CTA)||(0,r.wr)(e,".".concat(y.TYPE_AHEAD_RESULTS)))}},{key:"validateSelectedOption",value:function(e){var t=this.config.selectedOption;return this.isOptionListFocus||t&&e===t.name}},{key:"errorCtaCallback",value:function(e){var t=this.config.customErrorMessage;e.preventDefault(),t.ctaCallback(this.typeAheadInputElm.getValue())}},{key:"destroy",value:function(){var e=this;this.detachAllyEvents(),this.typeAheadResultsElm&&(this.typeAheadResultsElm.removeEventListener(o.FP.FOCUS,this.onOptionListFocus),this.typeAheadResultsElm.removeEventListener(o.FP.BLUR,this.onOptionListBlur),this.typeAheadResultsElm.removeEventListener(o.FP.KEYDOWN,this.onOptionListChange)),this.optionsList&&this.optionsList.forEach((function(t){t.removeEventListener(o.FP.CLICK,e.onSelectOption),t.removeEventListener(o.FP.FOCUS,e.onOptionFocus)})),this.errorMessageCtaElm&&this.errorMessageCtaElm.removeEventListener(o.FP.CLICK,this.errorCtaCallback)}},{key:"updateState",value:function(e){this.state=v({},this.state,{},e)}},{key:"getState",value:function(){return this.state}},{key:"value",get:function(){return this.typeAheadInputElm.getNormalizedValue()},set:function(e){this.typeAheadInputElm.setValue(e)}}]),e}()}}]);
//# sourceMappingURL=2ba6c4c3f73f765a03c8.bundle.js.map