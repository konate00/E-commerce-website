"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[9141],{93847:function(e,t,i){i.d(t,{Z:function(){return r}});var n=i(15671),s=i(43144),a=i(48218),o=i(61156),l="mbusa_alerts_dismissed",r=function(){function e(t){(0,n.Z)(this,e),this.element=t,this.onTransitionEnd=this.onTransitionEnd.bind(this),this.dismissAlert=this.dismissAlert.bind(this),this.init()}return(0,s.Z)(e,[{key:"init",value:function(){""===o.pR.getCookie(l)?(this.cacheDOM(),this.attachEvents(),this.show()):this.destroy()}},{key:"cacheDOM",value:function(){this.bannerInner=this.element.querySelector(".".concat("alert-banner__inner")),this.dismissBtn=this.element.querySelector(".".concat("alert-banner__dismiss-button"))}},{key:"attachEvents",value:function(){this.element.addEventListener(a.FP.TRANSITION_END,this.onTransitionEnd),this.dismissBtn.addEventListener(a.FP.CLICK,this.dismissAlert)}},{key:"show",value:function(){this.element.style.height="".concat(this.bannerInner.offsetHeight,"px"),this.element.classList.remove("hide--height")}},{key:"detachEvents",value:function(){this.element.removeEventListener(a.FP.TRANSITION_END,this.onTransitionEnd),this.dismissBtn&&this.dismissBtn.removeEventListener(a.FP.CLICK,this.dismissAlert)}},{key:"destroy",value:function(){this.detachEvents(),this.element.remove(),delete this.element}},{key:"onTransitionEnd",value:function(){this.element.classList.remove("alert-banner--transition"),this.element.style.height=""}},{key:"dismissAlert",value:function(){o.pR.setCookie({name:l,value:"true",isSession:!0}),this.destroy()}}]),e}()},73043:function(e,t,i){i.d(t,{Z:function(){return d}});var n=i(15671),s=i(43144),a=i(4942);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var l={canvasClass:"",width:515,height:480,globalAlpha:{almostTransparent:.005,opaque:1}},r=function(){},h=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;(0,n.Z)(this,e),this.element=t,this.callback=s,this.originalImage=null,this.rolloverImage=null,this.canvas=null,this.config=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){(0,a.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},l,{},i),this.init()}return(0,s.Z)(e,[{key:"cacheDOM",value:function(){this.originalImage=this.element.querySelector("[".concat("data-image-to-canvas-original","]")),this.rolloverImage=this.element.querySelector("[".concat("data-image-to-canvas-rollover","]"))}},{key:"init",value:function(){this.cacheDOM(),this.originalImage&&this.rolloverImage&&this.createCanvas()}},{key:"createCanvas",value:function(){var e=this;this.canvas=document.createElement("canvas"),this.canvas.width=this.config.width,this.canvas.height=this.config.height,this.canvas.className=this.config.canvasClass,this.canvas.setAttribute("aria-hidden","true"),this.element.appendChild(this.canvas),setTimeout((function(){e.drawImage()}),100)}},{key:"drawImage",value:function(){var e=this.canvas.getContext("2d");e.globalAlpha=this.config.globalAlpha.almostTransparent,e.drawImage(this.originalImage,0,0,this.canvas.width,this.canvas.height),e.globalAlpha=this.config.globalAlpha.opaque,e.drawImage(this.rolloverImage,0,0,this.canvas.width,this.canvas.height),this.removeRolloverImg(),this.callback(this.canvas)}},{key:"removeRolloverImg",value:function(){this.rolloverImage.parentNode.removeChild(this.rolloverImage)}}]),e}(),c=i(48218),u="active",d=function(){function e(t){(0,n.Z)(this,e),this.element=t,this.init()}return(0,s.Z)(e,[{key:"init",value:function(){this.initImageToCanvas()}},{key:"initImageToCanvas",value:function(){if(this.originalImage=this.element.querySelector("[".concat("data-image-to-canvas-original","]")),this.imageWrapper=this.element.hasAttribute("data-image-to-canvas")?this.element:null,this.imageWrapper){var t={canvasClass:"content-toggle__rollover"};t.width=this.originalImage.width||515,t.height=this.originalImage.height||480,this.imageToCanvas=new h(this.imageWrapper,t,e.mouseOverCallback)}}}],[{key:"mouseOverCallback",value:function(e){e.parentNode.addEventListener(c.FP.MOUSEMOVE,(function(t){e.getContext("2d").getImageData(t.offsetX,t.offsetY,1,1).data[3]>0?e.classList.add(u):e.classList.remove(u)}))}}]),e}()},89920:function(e,t,i){i.d(t,{Z:function(){return we}});var n=i(4942),s=i(42982),a=i(15671),o=i(43144),l=i(61156),r=i(48218),h=i(98248),c=i(82799),u=i(82963),d=i(11752),v=i(61120),m=i(60136),b="global-header__panel-item--active",p="global-header__submenu-background--active",g=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.elmWrapper=null,this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOMElements()}},{key:"setBindings",value:function(){}},{key:"cacheDOMElements",value:function(){this.elmWrapper=(0,l.wr)(this.element,".".concat("global-header__submenu-background"))}},{key:"activate",value:function(){this.element.classList.add(b),this.elmWrapper&&this.elmWrapper.classList.add(p)}},{key:"deactivate",value:function(){this.element.classList.remove(b),this.elmWrapper&&this.elmWrapper.classList.remove(p)}}]),e}();function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var y=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOMElements(),this.buildPanelList(),this.attachEvents(),this.state={selectedPanelIndex:null,currentScreenState:l.sp.getCurrentState()}}},{key:"setBindings",value:function(){this.onScreenResize=this.onScreenResize.bind(this),this.switchPanels=this.switchPanels.bind(this)}},{key:"cacheDOMElements",value:function(){}},{key:"attachEvents",value:function(){l.sp.addResizeListener(this.onScreenResize)}},{key:"detachEvents",value:function(){l.sp.removeResizeListener(this.onScreenResize)}},{key:"buildPanelList",value:function(){this.panelItemElms=(0,s.Z)(this.element.querySelectorAll(".".concat("global-header__panel-item"))).map((function(e){return new g(e)}))}},{key:"switchPanels",value:function(e){this.deactivate(),this.activate(e)}},{key:"activate",value:function(e){this.panelItemElms[e]&&(this.panelItemElms[e].activate(),this.updateState({selectedPanelIndex:e}))}},{key:"deactivate",value:function(){var e=this.getState().selectedPanelIndex;null!==e&&this.panelItemElms[e].deactivate()}},{key:"onScreenResize",value:function(){var e=l.sp.getCurrentState();this.getState().currentScreenState!==e&&this.updateState({currentScreenState:e})}},{key:"updateState",value:function(e){this.state=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},this.state,{},e)}},{key:"getState",value:function(){return this.state}}]),e}();function E(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var S="global-header__submenu--active",k="global-header__submenu--open",w=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;(0,a.Z)(this,e),this.element=t,this.globalHeaderButtonElm=i,this.focusableElms=[],this.callbacks=n,this.index=s,this.isOpen=!1,this.init(),this.afterInit()}return(0,o.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOMElements(),this.attachEvents(),this.addPanelList(),this.addTabOutsideHandler(),this.state={isOpen:!1}}},{key:"afterInit",value:function(){}},{key:"setBindings",value:function(){this.getState=this.getState.bind(this),this.onBreakpointCross=this.onBreakpointCross.bind(this),this.onSubmenuBlur=this.onSubmenuBlur.bind(this),this.onTransitionEnd=this.onTransitionEnd.bind(this),this.updateState=this.updateState.bind(this)}},{key:"cacheDOMElements",value:function(){this.contentElm=this.element.children[0],this.buildFocusableElms()}},{key:"attachEvents",value:function(){l.sp.addBreakpointListener(this.onBreakpointCross)}},{key:"detachEvents",value:function(){l.sp.removeBreakpointListener(this.onBreakpointCross)}},{key:"addPanelList",value:function(){this.panelList=new y(this.element)}},{key:"addTabOutsideHandler",value:function(){this.tabOutsideHandler=new l.yM(this.element,{onBlur:this.onSubmenuBlur})}},{key:"addTransitionListener",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.ZT;this.transitionCallback=e,this.element.addEventListener(r.FP.TRANSITION_END,this.onTransitionEnd)}},{key:"onTransitionEnd",value:function(e){var t;"height"===e.propertyName&&e.target===this.element&&(this.element.removeEventListener(r.FP.TRANSITION_END,this.onTransitionEnd),null===(t=this.transitionCallback)||void 0===t||t.call(this),this.transitionCallback=null)}},{key:"buildFocusableElms",value:function(){this.focusableElms=[].slice.call(this.element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))}},{key:"onSubmenuBlur",value:function(){l.sp.gte(l.sp.SIZES.XLARGE)&&this.tabOutsideHandler&&this.isOpen&&(this.globalHeaderButtonElm.click(),this.globalHeaderButtonElm.focus())}},{key:"onBreakpointCross",value:function(){this.reset()}},{key:"activateContent",value:function(e){var t=this;this.element.classList.add(k),this.panelList&&this.panelList.activate(e||0),window.requestAnimationFrame((function(){l.sp.gte(l.sp.SIZES.XLARGE)&&t.addTransitionListener(t.focusFirstElement),t.element.style.height="".concat(Math.ceil(t.contentElm.offsetHeight)+1,"px")}))}},{key:"deactivateContent",value:function(){this.element.classList.remove(k),this.element.style.height=null,this.panelList&&this.panelList.deactivate()}},{key:"activate",value:function(){this.element.classList.add(S),this.tabOutsideHandler.activate(),this.isOpen=!0}},{key:"deactivate",value:function(){this.element.classList.remove(S),this.deactivateContent(),this.isOpen=!1}},{key:"focusFirstElement",value:function(){this.buildFocusableElms(),this.focusableElms[0].focus()}},{key:"reset",value:function(){this.deactivate()}},{key:"updateState",value:function(e){this.state=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?E(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},this.state,{},e)}},{key:"getState",value:function(){return this.state}},{key:"getElement",value:function(){return this.element}},{key:"focusElements",get:function(){return this.focusableElms}}]),e}();function L(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function O(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?L(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):L(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var C="aria-selected",M="global-header__tab-button--active",B={swipeMove:.8},T=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,a.Z)(this,e),this.element=t,this.changePanels=i,this.configuration=O({},B,{},n),this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOMElements(),this.attachEvents(),this.move=0,this.state={selectedTabIndex:null,currentScreenState:l.sp.getCurrentState()}}},{key:"setBindings",value:function(){this.onScreenResize=this.onScreenResize.bind(this),this.onTabClick=this.onTabClick.bind(this),this.onTabFocus=this.onTabFocus.bind(this),this.onSwipeRight=this.onSwipeRight.bind(this),this.onSwipeLeft=this.onSwipeLeft.bind(this)}},{key:"cacheDOMElements",value:function(){this.tabsContainerElm=this.element.querySelector(".".concat("global-header__tabs-container")),this.tabsElm=this.element.querySelector(".".concat("global-header__tabs")),this.tabButtonElms=(0,s.Z)(this.element.querySelectorAll(".".concat("global-header__tab-button"))),this.swipeContainer=new l.Xh(this.tabsContainerElm),this.panelList=this.element.querySelector(".".concat("global-header__panel-list")),this.panelListItems=(0,s.Z)(this.panelList.children)}},{key:"attachEvents",value:function(){var e=this;l.sp.addResizeListener(this.onScreenResize),this.tabButtonElms.forEach((function(t){t.addEventListener(r.FP.CLICK,e.onTabClick),t.addEventListener(r.FP.FOCUS,e.onTabFocus)})),this.swipeContainer.on(l.Xh.EVENTS.SWIPE_RIGHT,this.onSwipeRight),this.swipeContainer.on(l.Xh.EVENTS.SWIPE_LEFT,this.onSwipeLeft)}},{key:"detachEvents",value:function(){var e=this;l.sp.addResizeListener(this.onScreenResize),this.tabButtonElms.forEach((function(t){t.removeEventListener(r.FP.CLICK,e.onTabClick),t.removeEventListener(r.FP.FOCUS,e.onTabFocus)})),this.swipeContainer.off(l.Xh.EVENTS.SWIPE_RIGHT,this.onSwipeRight),this.swipeContainer.off(l.Xh.EVENTS.SWIPE_LEFT,this.onSwipeLeft)}},{key:"onTabClick",value:function(e){var t=this.getTabIndex(e.target);this.deactivate(),this.activate(t),this.changePanels(t),this.panelList&&this.focusFirstElement(t)}},{key:"onTabFocus",value:function(e){if(this.canSlide()){var t=this.getTabIndex(e.target);this.updatePosition(t)}}},{key:"onSwipeRight",value:function(){this.canSlide()&&(this.move-=this.configuration.swipeMove*this.tabsContainerElm.offsetWidth,this.moveTabs())}},{key:"onSwipeLeft",value:function(){this.canSlide()&&(this.move+=this.configuration.swipeMove*this.tabsContainerElm.offsetWidth,this.moveTabs())}},{key:"getTabIndex",value:function(e){var t=null;return this.tabButtonElms.some((function(i,n){return e===i&&(t=n,!0)})),t}},{key:"getCurrentTabIndex",value:function(){return this.state.selectedTabIndex}},{key:"getLastTabIndex",value:function(){return this.tabButtonElms.length-1}},{key:"onCurrentTabFocus",value:function(){this.tabButtonElms[this.state.selectedTabIndex].focus()}},{key:"activate",value:function(e){this.tabButtonElms[e]&&(this.tabButtonElms[e].classList.add(M),this.tabButtonElms[e].setAttribute(C,"true"),this.updateState({selectedTabIndex:e}),this.canSlide()&&this.updatePosition())}},{key:"deactivate",value:function(){var e=this.getState().selectedTabIndex;null!==e&&(this.tabButtonElms[e].classList.remove(M),this.tabButtonElms[e].setAttribute(C,"false"),this.reset())}},{key:"updatePosition",value:function(e){var t=e||this.getState().selectedTabIndex,i=this.tabButtonElms[t],n=i.offsetWidth/2,s=this.tabsContainerElm.offsetWidth/2;this.move=-i.offsetLeft-n+s,0===t&&(this.move=0),this.moveTabs()}},{key:"moveTabs",value:function(){var e=0-(this.tabsElm.scrollWidth-this.tabsContainerElm.offsetWidth);this.move>0&&(this.move=0),this.move<e&&(this.move=e),this.setTransform()}},{key:"focusFirstElement",value:function(e){l.sp.gte(l.sp.SIZES.XLARGE)&&this.panelListItems[e].querySelector(".".concat("global-header__grid-item-link")).focus()}},{key:"setTransform",value:function(){var e="translate3d(".concat(this.move,"px, 0, 0)");this.tabsElm.style.transform=e}},{key:"reset",value:function(){this.move=0,this.setTransform()}},{key:"canSlide",value:function(){return this.tabsElm.scrollWidth>this.tabsContainerElm.offsetWidth}},{key:"onScreenResize",value:function(){var e=l.sp.getCurrentState(),t=this.getState(),i=t.currentScreenState,n=t.selectedTabIndex;i!==e&&(this.updateState({currentScreenState:e}),this.reset()),this.canSlide()&&null!==n&&this.updatePosition()}},{key:"updateState",value:function(e){this.state=O({},this.state,{},e)}},{key:"getState",value:function(){return this.state}}]),e}(),A=i(4788),D=i(14569);function I(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var _="toggle-drawer--scroll",P="aria-controls",Z=function(){function e(t,i,n){(0,a.Z)(this,e),this.index=n.index,this.totalTiles=n.totalTiles,this.element=t,this.parentElement=n.parentElement||this.element.parentElement,this.allViewModelCTAElms=n.allViewModelCTAElms,this.callbacks=i,this.state={currentScreenState:l.sp.getCurrentState(),isXLargePlus:l.sp.gte(l.sp.SIZES.XLARGE)},this.viewModelsCTA=null,this.toggleDrawers=null,this.clickOutsideHandler=l.ZT,this.tabOutsideHandler=l.ZT,this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOMElements(),this.attachEvents()}},{key:"setBindings",value:function(){this.onModelsDropdownBlur=this.onModelsDropdownBlur.bind(this),this.onModelsDropdownFocus=this.onModelsDropdownFocus.bind(this),this.onModelsDropdownToggle=this.onModelsDropdownToggle.bind(this),this.onModelsDropdownTransitionEnd=this.onModelsDropdownTransitionEnd.bind(this),this.onScreenResize=this.onScreenResize.bind(this)}},{key:"cacheDOMElements",value:function(){this.viewModelsCTA=this.element.querySelector(".".concat("toggle-drawer-cta--global-nav")),this.dropdown=this.element.querySelector(".".concat("toggle-drawer--global-nav")),this.modelsList=this.element.querySelector(".".concat("global-header__grid-item-models-list")),this.viewModelsCTA&&(this.toggleDrawers=new D.ToggleDrawer(this.viewModelsCTA,{onToggle:this.onModelsDropdownToggle}),this.clickOutsideHandler=new l.Lp(this.viewModelsCTA,this.onModelsDropdownFocus,this.onModelsDropdownBlur,{ignoreElems:[this.dropdown].concat((0,s.Z)(this.allViewModelCTAElms))}),this.tabOutsideHandler=new l.yM(this.modelsList,{onBlur:this.onModelsDropdownBlur},this.viewModelsCTA))}},{key:"attachEvents",value:function(){l.sp.addResizeListener(this.onScreenResize)}},{key:"detachEvents",value:function(){l.sp.removeResizeListener(this.onScreenResize),this.toggleDrawers=null,this.clickOutsideHandler.destroy(),this.tabOutsideHandler.destroy()}},{key:"onModelsDropdownBlur",value:function(){var e=this;this.getState().isXLargePlus&&this.allViewModelCTAElms.filter((function(e){return"true"===e.getAttribute("aria-expanded")})).forEach((function(t){return e.callbacks.closeOpenModelDropdown(t)}))}},{key:"onModelsDropdownFocus",value:function(){var e=this,t=this.getState().isXLargePlus,i=this.viewModelsCTA.getAttribute(P);this.allViewModelCTAElms.forEach((function(n){t&&n.getAttribute(P)!==i&&e.callbacks.closeOpenModelDropdown(n)}))}},{key:"onModelsDropdownToggle",value:function(){if(this.getState().isXLargePlus){var e=this.parentElement.getBoundingClientRect(),t=this.dropdown.getBoundingClientRect(),i=parseFloat(this.dropdown.style.maxHeight),n=e.top,s=e.bottom,a=t.top-i,o=t.bottom+i;this.totalTiles>3&&(this.index<3&&s<=o?(this.dropdown.style.maxHeight="".concat(i-(o-s),"px"),this.dropdown.classList.add(_)):this.index>=3&&n>=a?(this.dropdown.style.maxHeight="".concat(i-(n-a),"px"),this.dropdown.classList.add(_)):this.dropdown.classList.remove(_))}else this.dropdown.addEventListener(r.FP.TRANSITION_END,this.onModelsDropdownTransitionEnd)}},{key:"onModelsDropdownTransitionEnd",value:function(e){var t,i;"max-height"===e.propertyName&&e.target===this.dropdown&&(this.dropdown.removeEventListener(r.FP.TRANSITION_END,this.onModelsDropdownTransitionEnd),null===(t=(i=this.callbacks).modelDrawerToggle)||void 0===t||t.call(i))}},{key:"onScreenResize",value:function(){var e=l.sp.getCurrentState();this.getState().currentScreenState!==e&&this.updateState({currentScreenState:e,isXLargePlus:l.sp.gte(l.sp.SIZES.XLARGE)})}},{key:"updateState",value:function(e){this.state=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?I(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},this.state,{},e)}},{key:"getState",value:function(){return this.state}},{key:"destroy",value:function(){this.detachEvents()}}]),e}();function N(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var R="aria-hidden",H=function(e){function t(){return(0,a.Z)(this,t),(0,u.Z)(this,(0,v.Z)(t).apply(this,arguments))}return(0,m.Z)(t,e),(0,o.Z)(t,[{key:"setBindings",value:function(){this.closeOpenModelDropdown=this.closeOpenModelDropdown.bind(this),this.onModelDrawerToggle=this.onModelDrawerToggle.bind(this),(0,d.Z)((0,v.Z)(t.prototype),"setBindings",this).call(this)}},{key:"cacheDOMElements",value:function(){this.viewModelCtaElms=(0,s.Z)(this.element.querySelectorAll(".".concat("toggle-drawer-cta--global-nav"))),this.panelClassTiles=this.buildPanelClassTiles(),(0,d.Z)((0,v.Z)(t.prototype),"cacheDOMElements",this).call(this)}},{key:"buildPanelClassTiles",value:function(){var e=(0,s.Z)(this.element.querySelectorAll(".".concat("global-header__grid-item"))),t={closeOpenModelDropdown:this.closeOpenModelDropdown,modelDrawerToggle:this.onModelDrawerToggle},i={allViewModelCTAElms:this.viewModelCtaElms};return e.map((function(s,a){return new Z(s,t,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?N(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({index:a,totalTiles:e.length},i))}))}},{key:"closeOpenModelDropdown",value:function(e){var t=e.nextElementSibling;"false"===t.getAttribute(R)&&(e.setAttribute("aria-expanded","false"),t.setAttribute(R,"true"),t.style.maxHeight="0px")}},{key:"onModelDrawerToggle",value:function(){var e;null===(e=this.modelToggleCallback)||void 0===e||e.call(this)}},{key:"deactivate",value:function(){var e=this;this.viewModelCtaElms.forEach((function(t){e.closeOpenModelDropdown(t)})),(0,d.Z)((0,v.Z)(t.prototype),"deactivate",this).call(this)}}]),t}(g),F=function(e){function t(){return(0,a.Z)(this,t),(0,u.Z)(this,(0,v.Z)(t).apply(this,arguments))}return(0,m.Z)(t,e),(0,o.Z)(t,[{key:"setBindings",value:function(){this.onAfterToggle=this.onAfterToggle.bind(this),this.onModelToggle=this.onModelToggle.bind(this),(0,d.Z)((0,v.Z)(t.prototype),"setBindings",this).call(this)}},{key:"cacheDOMElements",value:function(){this.containerElm=document.querySelector(".global-header__submenu--vehicles"),this.bkgElm=document.querySelector(".global-header__submenu-background")}},{key:"buildPanelList",value:function(){var e=this;this.panelItemElms=(0,s.Z)(this.element.querySelectorAll(".".concat("global-header__panel-item"))).map((function(t){var i=new H(t);return i.modelToggleCallback=e.onModelToggle,i})),this.accordionElement=this.element.querySelector("[data-accordion]"),this.accordion=A.accordionParser.createAccordion({element:this.accordionElement,onAfterClose:this.onAfterToggle,onAfterOpen:this.onAfterToggle})}},{key:"onAfterToggle",value:function(){if(!this.isDeactivating){var e=this.bkgElm.getBoundingClientRect().height;this.containerElm.style.height="".concat(e,"px")}this.isDeactivating=!1}},{key:"onModelToggle",value:function(){var e=this.bkgElm.getBoundingClientRect().height;this.containerElm.style.height="".concat(e,"px")}},{key:"deactivate",value:function(){var e;this.accordion.activeItem?(this.isDeactivating=!0,this.accordion.close(),null===(e=this.panelItemElms)||void 0===e||e.forEach((function(e){return e.deactivate()}))):(0,d.Z)((0,v.Z)(t.prototype),"deactivate",this).call(this)}}]),t}(y),x=function(e){function t(){return(0,a.Z)(this,t),(0,u.Z)(this,(0,v.Z)(t).apply(this,arguments))}return(0,m.Z)(t,e),(0,o.Z)(t,[{key:"afterInit",value:function(){this.tabList=new T(this.element,this.onSwitchPanels)}},{key:"setBindings",value:function(){this.onSwitchPanels=this.onSwitchPanels.bind(this),(0,d.Z)((0,v.Z)(t.prototype),"setBindings",this).call(this)}},{key:"cacheDOMElements",value:function(){this.tabsContainerElm=this.element.querySelector(".".concat("global-header__tabs-container")),this.linksContainerElm=this.element.querySelector(".".concat("global-header__vehicles-link-list")),this.mobileLinksContainerElm=this.element.querySelector(".".concat("global-header__vehicles-link-list--mobile")),this.panelsContainerElm=this.element.querySelector(".".concat("global-header__panel-wrapper")),(0,d.Z)((0,v.Z)(t.prototype),"cacheDOMElements",this).call(this)}},{key:"addPanelList",value:function(){this.panelList=new F(this.element)}},{key:"onSwitchPanels",value:function(e){this.panelList.switchPanels(e)}},{key:"buildFocusableElms",value:function(){this.focusableElms=[].concat((0,s.Z)([].slice.call(this.tabsContainerElm.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))),(0,s.Z)([].slice.call(this.linksContainerElm.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))),(0,s.Z)([].slice.call(this.panelsContainerElm.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')))),this.focusableElmsHamburger=[].concat((0,s.Z)([].slice.call(this.panelsContainerElm.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))),(0,s.Z)([].slice.call(this.mobileLinksContainerElm.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))))}},{key:"focusFirstElement",value:function(){l.sp.gte(l.sp.SIZES.XLARGE)?this.focusableElms[0].focus():this.focusableElmsHamburger[0].focus()}},{key:"activateTab",value:function(e){var t;null===(t=this.tabList)||void 0===t||t.activate(e)}},{key:"deactivateTab",value:function(){var e;null===(e=this.tabList)||void 0===e||e.deactivate()}},{key:"activateContent",value:function(e){this.activateTab(e||0),(0,d.Z)((0,v.Z)(t.prototype),"activateContent",this).call(this,e||0)}},{key:"deactivateContent",value:function(){this.deactivateTab(),this.panelList.deactivate(),(0,d.Z)((0,v.Z)(t.prototype),"deactivateContent",this).call(this)}}]),t}(w),V=i(27046),j=i(30168);function G(){var e=(0,j.Z)(['\n    <li class="global-header__menu-l3-panel-item global-header__panel-item--additional global-header__panel-item--additional--alt global-header__panel-item--nav-recently-viewed-tile">\n    </li>\n']);return G=function(){return e},e}var q=function(){function e(t){var i;(0,a.Z)(this,e);var n=window.mbNafta.ns("moduleData","recentlyViewedVehicle");this.showRecentlyViewedVehicle=(null===(i=n.config)||void 0===i?void 0:i.showRecentlyViewedVehicle)||!1,this.element=(0,l.e2)(G())({getNode:!0}),this.hasRecentlyViewed=!1,this.triggerReplace=!1,this.isLoaded=!1,this.originalElement=null,this.onLoadedCallback=t.onLoadedCallback||l.ZT,this.recentlyViewedLoaded=t.recentlyViewedLoaded||l.ZT,this.onDealerFormOpen=t.onDealerFormOpen||l.ZT,this.setBindings(),this.initializeTile()}return(0,o.Z)(e,[{key:"setBindings",value:function(){this.insertSmallMenuTile=this.insertSmallMenuTile.bind(this),this.getHasRecentlyViewed=this.getHasRecentlyViewed.bind(this),this.updateTile=this.updateTile.bind(this),this.updateVehicle=this.updateVehicle.bind(this)}},{key:"initializeTile",value:function(){this.showRecentlyViewedVehicle&&(this.recentlyViewedVehicle=new V.HU({onRetrievedCallback:this.updateVehicle,onDealerFormOpen:this.onDealerFormOpen}))}},{key:"updateVehicle",value:function(e){var t,i=null===(t=this.recentlyViewedVehicle)||void 0===t?void 0:t.element;i&&(this.element.firstElementChild?this.element.replaceChild(i,this.element.firstElementChild):this.element.appendChild(i),this.isLoaded=!this.isLoaded),e?(this.triggerReplace=!1,this.recentlyViewedLoaded(e)):this.onLoadedCallback(),this.triggerReplace&&(this.triggerReplace=!1,this.replaceTile(this.originalElement))}},{key:"getHasRecentlyViewed",value:function(){var e;return Boolean(null===(e=this.recentlyViewedVehicle)||void 0===e?void 0:e.element)}},{key:"insertSmallMenuTile",value:function(e){var t=e.querySelector(".".concat("global-header__panel-item--nav-promo-tile"));t&&this.replaceTile(t,!0)}},{key:"replaceTile",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!==(t=this.recentlyViewedVehicle)&&void 0!==t&&t.element&&e){var n=this.element;i&&(n=this.recentlyViewedVehicle.element),e.replaceChild(n,e.firstElementChild)}}},{key:"updateTile",value:function(e,t){this.recentlyViewedVehicle&&this.showRecentlyViewedVehicle&&e&&(this.triggerReplace=!0,this.originalElement=e,this.recentlyViewedVehicle.updateVehicle(t))}}]),e}(),z=function(e){function t(){return(0,a.Z)(this,t),(0,u.Z)(this,(0,v.Z)(t).apply(this,arguments))}return(0,m.Z)(t,e),(0,o.Z)(t,[{key:"init",value:function(){(0,d.Z)((0,v.Z)(t.prototype),"init",this).call(this),this.additionalAltElement=this.element.querySelector(".".concat("global-header__panel-list--additional--alt")),!this.recentlyViewedTile&&this.callbacks&&(this.recentlyViewedTile=new q(this.callbacks))}},{key:"setBindings",value:function(){this.onLoaded=this.onLoaded.bind(this),(0,d.Z)((0,v.Z)(t.prototype),"setBindings",this).call(this)}},{key:"onLoaded",value:function(){this.recentlyViewedTile.replaceTile(this.additionalAltElement)}},{key:"activateContent",value:function(e){this.recentlyViewedTile.updateTile(this.additionalAltElement),(0,d.Z)((0,v.Z)(t.prototype),"activateContent",this).call(this,e)}}]),t}(w),X=i(16266),U={searchCTA:"Search",dealerSearchErrorMessage:"Invalid Zip Code or City, State",dealerSearchErrorMessageUS:"Invalid Zip Code",searchInputLabel:"Enter Zip Code or City, State",searchInputLabelUS:"Enter Zip Code"},K={searchType:"dealers",searchByType:"zip",searchLocation:null,autoSubmitLocation:!1},W="form__input-field",J=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.localization=Object.assign(U,window.mbNafta.ns("pageData","globalHeader","dealerMenu").localization),this.navContainer=null,this.searchContainer=null,this.country=window.mbNafta.ns("pageData").country,this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.cacheDOMElements(),this.setBindings(),this.searchInput=null,this.createSearchBar(),this.attachEvents()}},{key:"cacheDOMElements",value:function(){this.searchContainer=this.element.querySelector(".".concat("global-header__location-input__search-bar__container")),this.navContainer=document.querySelector(".".concat("global-header"))}},{key:"setBindings",value:function(){this.onSearchInputFocus=this.onSearchInputFocus.bind(this)}},{key:"attachEvents",value:function(){this.searchInput.addEventListener(r.FP.FOCUS,this.onSearchInputFocus)}},{key:"detachEvents",value:function(){this.searchInput.removeEventListener(r.FP.FOCUS,this.onSearchInputFocus)}},{key:"createSearchBar",value:function(){var e=this.localization,t=e.searchCTA,i=e.searchInputLabel,n=e.searchInputLabelUS,s=e.dealerSearchErrorMessage;this.searchBar=new X.D({country:this.country,ctaLabel:t,dealerSearchErrorMessage:s,defaultLocation:K,isCTASubmit:!0,onSubmit:this.onSubmit.bind(this),searchInputLabel:i,searchInputLabelUS:n,autoSubmitLocation:K.autoSubmitLocation,theme:X.D.THEMES.DEALER_SEARCH,buttonStyle:"button button_primary",onErrorMessage:this.setInputFocus.bind(this)}),l.jG.insert(this.searchBar.render(),this.searchContainer),this.searchInput=this.element.querySelector(".".concat(W)),this.searchContainer.querySelector(".".concat(W)).focus(),this.clearInput()}},{key:"onSearchInputFocus",value:function(){var e=this;l.sp.getState().small&&setTimeout((function(){e.navContainer.scrollTo(0,e.searchContainer.offsetTop)}),300)}},{key:"clearInput",value:function(){this.searchInput.value="",this.searchInput.setAttribute("aria-invalid","false"),this.searchInput.parentElement.classList.remove("error")}},{key:"onSubmit",value:function(e){if(window.mbNafta.ns("pageData","dealerLocator","config").isFullPageLayout)l.Jw.dispatchEvent(l.Jw.createCustomEvent(r.fD.GLOBAL_NAV_DEALER_SEARCH,{detail:e}));else{var t=window.mbNafta.ns("pageData","globalHeader","dealerMenu","config").dealerSearchUrl;window.location.href="".concat(t,"/searchLocation-").concat(e.searchLocation,"/searchByType-").concat(e.searchByType,"/filter-mbdealer")}}},{key:"setInputFocus",value:function(){this.searchInput.focus()}},{key:"destroy",value:function(){this.detachEvents(),this.searchBar.destroy(),this.searchBar=null}}]),e}(),Y=function(e){function t(){return(0,a.Z)(this,t),(0,u.Z)(this,(0,v.Z)(t).apply(this,arguments))}return(0,m.Z)(t,e),(0,o.Z)(t,[{key:"cacheDOMElements",value:function(){this.searchBar=new J(this.element),(0,d.Z)((0,v.Z)(t.prototype),"cacheDOMElements",this).call(this)}},{key:"deactivateContent",value:function(){var e;null===(e=this.searchBar)||void 0===e||e.clearInput(),(0,d.Z)((0,v.Z)(t.prototype),"deactivateContent",this).call(this)}}]),t}(w),Q=i(19064),$=function(e){function t(){return(0,a.Z)(this,t),(0,u.Z)(this,(0,v.Z)(t).apply(this,arguments))}return(0,m.Z)(t,e),(0,o.Z)(t,[{key:"cacheDOMElements",value:function(){(0,d.Z)((0,v.Z)(t.prototype),"cacheDOMElements",this).call(this),this.siteSearchWrapperElm=this.element.querySelector(".".concat("global-header__panel-item-search-wrapper"))}},{key:"setBindings",value:function(){(0,d.Z)((0,v.Z)(t.prototype),"setBindings",this).call(this),this.onBeforeBlur=this.onBeforeBlur.bind(this)}},{key:"addTabOutsideHandler",value:function(){this.tabOutsideHandler=new l.yM(this.element,{onBlur:this.onSubmenuBlur,onBeforeBlur:this.onBeforeBlur})}},{key:"onBeforeBlur",value:function(){this.isOpen&&this.onSubmenuBlur()}},{key:"activateContent",value:function(e){(0,d.Z)((0,v.Z)(t.prototype),"activateContent",this).call(this,e),this.siteSearch=new Q.Zh(this.siteSearchWrapperElm),this.siteSearch.updateConfig({submitCallback:this.siteSearchSubmitCallback})}},{key:"deactivateContent",value:function(){(0,d.Z)((0,v.Z)(t.prototype),"deactivateContent",this).call(this);var e=this.siteSearchWrapperElm.querySelector(".".concat("site-search__component-container"));this.siteSearch&&e&&(this.siteSearch.destroy(),e.remove())}},{key:"siteSearchSubmitCallback",value:function(e){var t=window.mbNafta.ns("pageData","globalHeader").config.searchPageUri;window.location.href="".concat(t,"?search=").concat(encodeURIComponent(e))}},{key:"focusFirstElement",value:function(){var e=this.siteSearchWrapperElm.querySelector("input");e&&e.focus()}}]),t}(w);function ee(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var te="global-header__item--open",ie=function(){function e(t,i,n){(0,a.Z)(this,e),this.menuButtonElms=t,this.menuElms=i,this.callbacks=n,this.clickOutsideMenus=[],this.init()}return(0,o.Z)(e,[{key:"init",value:function(){var e=this;this.setBindings(),this.attachEvents(),this.menus=[],this.menuElms.forEach((function(t,i){var n=e.menuButtonElms[i];t.classList.contains("global-header__submenu--vehicles")?e.menus.push(new x(t,n,e.callbacks)):t.classList.contains("global-header__submenu--dealer")&&!window.mbNafta.pageData.globalHeader.config.isSyndicated?e.menus.push(new Y(t,n)):t.classList.contains("global-header__submenu--search")?e.menus.push(new $(t,n)):t.classList.contains("global-header__submenu--additional")?e.menus.push(new z(t,n,e.callbacks,i)):e.menus.push(new w(t,n,e.callbacks,i))})),this.state={currentScreenState:l.sp.getCurrentState(),openMenuIndex:null,menusInactive:!1}}},{key:"setBindings",value:function(){this.onBreakpointCross=this.onBreakpointCross.bind(this),this.onButtonClick=this.onButtonClick.bind(this),this.onGlobalNavDealerSearch=this.onGlobalNavDealerSearch.bind(this),this.onSubmenuBlur=this.onSubmenuBlur.bind(this)}},{key:"attachEvents",value:function(){l.sp.addBreakpointListener(this.onBreakpointCross),this.attachMenuEvents(),l.Jw.addEventListener(r.fD.GLOBAL_NAV_DEALER_SEARCH,this.onGlobalNavDealerSearch)}},{key:"attachMenuEvents",value:function(){var e=this;l.sp.gte(l.sp.SIZES.XLARGE)&&this.menuButtonElms.forEach((function(t){e.clickOutsideMenus.push(new l.Lp(t,e.onButtonClick,e.onSubmenuBlur,{ignoreElems:[].concat((0,s.Z)(e.menuButtonElms),(0,s.Z)(e.menuElms)),useCapture:!0}))}))}},{key:"detachEvents",value:function(){l.sp.removeBreakpointListener(this.onBreakpointCross),this.detachMenuEvents(),l.Jw.removeEventListener(r.fD.GLOBAL_NAV_DEALER_SEARCH,this.onGlobalNavDealerSearch)}},{key:"detachMenuEvents",value:function(){this.clickOutsideMenus.length>0&&(this.clickOutsideMenus.forEach((function(e){e.destroy()})),this.clickOutsideMenus=[])}},{key:"onBreakpointCross",value:function(){this.detachMenuEvents(),this.attachMenuEvents()}},{key:"onButtonClick",value:function(e){var t=null;this.menuButtonElms.forEach((function(i,n){e.currentTarget!==i||t||(t=n)})),this.handleMenus(t)}},{key:"onSubmenuBlur",value:function(){var e=this.getState().openMenuIndex;null!==e&&this.handleMenus(e)}},{key:"handleMenus",value:function(e){var t=this.getState().openMenuIndex;null===t?this.activate(e):t===e?(this.deactivate(e),e=null):this.deactivate(t,e),this.updateState({openMenuIndex:e})}},{key:"onGlobalNavDealerSearch",value:function(){this.reset()}},{key:"activate",value:function(e){this.open(e),this.menus[e].activate(),this.updateState({openMenuIndex:e})}},{key:"open",value:function(e){var t,i,n=null===(t=this.menuElms[e])||void 0===t?void 0:t.parentElement;null==n||n.classList.add(te),null===(i=this.menus[e])||void 0===i||i.activateContent(),this.updateState({menusInactive:!1}),l.sp.gte(l.sp.SIZES.XLARGE)&&l.Jw.dispatchEvent(l.Jw.createCustomEvent(r.fD.GLOBAL_NAV_MENU_OPENED))}},{key:"deactivate",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.close(e),null!==i&&this.menus[e].addTransitionListener((function(){t.activate(i)})),this.menus[e].deactivate(),this.updateState({openMenuIndex:null})}},{key:"close",value:function(e){var t,i=null===(t=this.menuElms[e])||void 0===t?void 0:t.parentElement;null==i||i.classList.remove(te),this.updateState({menusInactive:!0})}},{key:"deactivateAll",value:function(){this.updateState({menusInactive:!0}),this.menus.forEach((function(e){e.deactivate()})),this.updateState({openMenuIndex:null})}},{key:"reset",value:function(){var e=this.getState().openMenuIndex;null!==e&&this.deactivate(e)}},{key:"updateState",value:function(e){this.state=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ee(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},this.state,{},e)}},{key:"getState",value:function(){return this.state}}]),e}();function ne(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var se="tabindex",ae={showNav:"Show Navigation",goToNav:"Go To Navigation",hideNav:"Hide Navigation"},oe=function(){function e(t,i){(0,a.Z)(this,e),this.element=t,this.localization=Object.assign(ae,window.mbNafta.ns("pageData").localization),this.closeMenusCallback=i,this.init(),this.afterInit()}return(0,o.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOMElements(),this.attachEvents(),this.state={isDockingActive:!1,isLocked:!1,isVisible:!1,isXLargePlus:l.sp.gte(l.sp.SIZES.XLARGE),lastScrollPosition:0}}},{key:"afterInit",value:function(){l.Jw.dispatchEvent(l.Jw.createCustomEvent(r.fD.SPECIALTY_HEADER_INITED))}},{key:"attachEvents",value:function(){}},{key:"setBindings",value:function(){this.setDockingState=this.setDockingState.bind(this),this.onScreenResize=this.onScreenResize.bind(this)}},{key:"cacheDOMElements",value:function(){this.globalHeaderButtonElms=(0,s.Z)(this.element.querySelectorAll(".".concat("global-header__button")))}},{key:"setDockingState",value:function(e){var t;e&&(null===(t=this.closeMenusCallback)||void 0===t||t.call(this)),this.element.classList[e?"add":"remove"]("main-navigation--docking-state");var i=!!this.getState().isXLargePlus&&e;this.element.setAttribute("aria-hidden",i),this.globalHeaderButtonElms.forEach((function(e){return i?e.setAttribute(se,"-1"):e.removeAttribute(se)}))}},{key:"onScreenResize",value:function(){this.updateState({isXLargePlus:l.sp.gte(l.sp.SIZES.XLARGE)})}},{key:"updateState",value:function(e){this.state=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ne(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},this.state,{},e)}},{key:"getState",value:function(){return this.state}},{key:"destroy",value:function(){this.updateState({isDockingActive:!1})}}]),e}(),le="externally-locked",re=function(e){function t(){return(0,a.Z)(this,t),(0,u.Z)(this,(0,v.Z)(t).apply(this,arguments))}return(0,m.Z)(t,e),(0,o.Z)(t,[{key:"setBindings",value:function(){this.onSpecialtyPageHashUpdate=this.onSpecialtyPageHashUpdate.bind(this),this.onDockedHeaderFocus=this.onDockedHeaderFocus.bind(this),this.onShowNavClick=this.onShowNavClick.bind(this),this.onHideNavClick=this.onHideNavClick.bind(this),this.onSkipNavClick=this.onSkipNavClick.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseMoveThrottle=(0,l.P2)(this.onMouseMove,r.O3.DELAY_300MS),(0,d.Z)((0,v.Z)(t.prototype),"setBindings",this).call(this)}},{key:"cacheDOMElements",value:function(){this.hamburgerBtnElm=this.element.querySelector(".".concat("top-bar__hamburger-button")),this.showHideNavBtnElm=document.querySelector(".".concat("global-header__show-nav-btn")),this.skipNavBtnElm=this.element.querySelector(".".concat("top-bar__skip-nav")),this.topNavLogoElm=this.element.querySelector(".".concat("top-bar__logo")),(0,d.Z)((0,v.Z)(t.prototype),"cacheDOMElements",this).call(this)}},{key:"attachEvents",value:function(){l.Jw.addEventListener(r.fD.SPECIALTY_PAGE_HASH_UPDATED,this.onSpecialtyPageHashUpdate),(0,d.Z)((0,v.Z)(t.prototype),"attachEvents",this).call(this)}},{key:"activate",value:function(){this.showHideNavBtnElm.addEventListener(r.FP.CLICK,this.onShowNavClick),this.element.addEventListener(r.FP.MOUSEENTER,this.onMouseEnter),this.element.addEventListener(r.FP.MOUSELEAVE,this.onMouseLeave),window.addEventListener(r.FP.MOUSEMOVE,this.onMouseMoveThrottle),l.sp.addBreakpointListener(this.onScreenResize.bind(this))}},{key:"deactivate",value:function(){this.hamburgerBtnElm.removeEventListener(r.FP.FOCUS,this.onDockedHeaderFocus),this.showHideNavBtnElm.removeEventListener(r.FP.CLICK,this.onShowNavClick),this.skipNavBtnElm.removeEventListener(r.FP.CLICK,this.onSkipNavClick),this.element.removeEventListener(r.FP.MOUSEENTER,this.onMouseEnter),this.element.removeEventListener(r.FP.MOUSELEAVE,this.onMouseLeave),window.removeEventListener(r.FP.MOUSEMOVE,this.onMouseMoveThrottle),l.sp.removeBreakpointListener(this.onScreenResize.bind(this))}},{key:"onSpecialtyPageHashUpdate",value:function(e){var t=this,i=e.detail,n=this.getState(),s=n.isLocked,a=n.isXLargePlus;n.isDockingActive||(this.activate(),this.updateState({isDockingActive:!0})),"true"===this.hamburgerBtnElm.getAttribute("aria-expanded")&&this.hamburgerBtnElm.click(),this.currentChapterIndex=i.nextChapterData.index;var o=0===this.currentChapterIndex;s&&a||this.setDockingState(!o),o&&a&&!s&&setTimeout((function(){t.getState().isVisible||t.setDockingState(o)}),r.O3.DELAY_2500MS)}},{key:"onDockedHeaderFocus",value:function(){this.getState().isXLargePlus||this.setDockingState(!1)}},{key:"onMouseMove",value:function(e){var t=e.clientY,i=this.getState(),n=i.isLocked,s=i.isXLargePlus,a=this.element.classList.contains(le),o=this.element.querySelector(".".concat("global-header__item--open"));n||a||!s||(t<=60?(this.updateState({isVisible:!0}),this.updateHeaderState(!0)):o||this.onMouseLeave())}},{key:"onMouseLeave",value:function(){var e=this;this.updateState({isVisible:!1}),setTimeout((function(){var t=e.getState(),i=t.isXLargePlus,n=t.isLocked,s=t.isVisible;!i||n||s||e.updateHeaderState(!1)}),r.O3.DELAY_750MS)}},{key:"onMouseEnter",value:function(){var e=this.getState(),t=e.isLocked,i=e.isXLargePlus;!t&&i&&this.updateState({isVisible:!0})}},{key:"onScreenResize",value:function(){var e=l.sp.gte(l.sp.SIZES.XLARGE),i=this.element.classList.contains(le);this.currentChapterIndex&&e&&!this.getState().isLocked&&!i?this.updateHeaderState(0!==this.currentChapterIndex):e||(this.setLockedState(!1),this.updateShowHideNavButton(!1),this.setDockingState(0!==this.currentChapterIndex)),(0,d.Z)((0,v.Z)(t.prototype),"onScreenResize",this).call(this)}},{key:"onShowNavClick",value:function(){this.updateState({isVisible:!1}),this.enterLockedState()}},{key:"onHideNavClick",value:function(){this.leaveLockedState()}},{key:"onSkipNavClick",value:function(){this.leaveLockedState()}},{key:"enterLockedState",value:function(){this.setLockedState(!0),this.updateHeaderState(!0),this.updateEventListeners(!1),this.showHideNavBtnElm.removeEventListener(r.FP.CLICK,this.onShowNavClick),this.showHideNavBtnElm.addEventListener(r.FP.CLICK,this.onHideNavClick),this.topNavLogoElm.focus()}},{key:"leaveLockedState",value:function(){this.setLockedState(!1),this.updateHeaderState(!1),this.updateEventListeners(!0),this.showHideNavBtnElm.removeEventListener(r.FP.CLICK,this.onHideNavClick),this.showHideNavBtnElm.addEventListener(r.FP.CLICK,this.onShowNavClick)}},{key:"updateEventListeners",value:function(e){var t=e?"addEventListener":"removeEventListener";this.element[t](r.FP.MOUSELEAVE,this.onMouseLeave),this.element[t](r.FP.MOUSEENTER,this.onMouseEnter),window[t](r.FP.MOUSEMOVE,this.onMouseMoveThrottle)}},{key:"updateHeaderState",value:function(e){this.updateShowHideNavButton(e),this.setDockingState(!e)}},{key:"setLockedState",value:function(e){this.updateState({isLocked:e}),this.element.classList[e?"add":"remove"]("main-navigation--locked")}},{key:"updateShowHideNavButton",value:function(e){var t=this.getState(),i=t.isVisible,n=t.isXLargePlus,s=e&&!i&&n,a=i||!n;this.showHideNavBtnElm.classList[a?"add":"remove"]("global-header__show-nav--hidden"),this.showHideNavBtnElm.classList[s?"add":"remove"]("global-header__show-nav-btn--locked"),this.showHideNavBtnElm.innerText=this.localization[s?"hideNav":"showNav"]}},{key:"destroy",value:function(){this.deactivate(),(0,d.Z)((0,v.Z)(t.prototype),"destroy",this).call(this)}}]),t}(oe),he="aria-expanded",ce=function(e){function t(){return(0,a.Z)(this,t),(0,u.Z)(this,(0,v.Z)(t).apply(this,arguments))}return(0,m.Z)(t,e),(0,o.Z)(t,[{key:"setBindings",value:function(){this.onPageScroll=(0,l.P2)(this.onPageScroll.bind(this),300),this.onGoToNavClick=this.onGoToNavClick.bind(this),this.onHamburgerBtnClick=this.onHamburgerBtnClick.bind(this),this.onStickyNavDropdown=this.onStickyNavDropdown.bind(this),(0,d.Z)((0,v.Z)(t.prototype),"setBindings",this).call(this)}},{key:"cacheDOMElements",value:function(){this.goToNavBtnElm=document.querySelector(".".concat("global-header__show-nav-btn")),this.skipNavBtnElm=this.element.querySelector(".".concat("top-bar__skip-nav")),this.hamburgerBtnElm=this.element.querySelector(".".concat("top-bar__hamburger-button")),(0,d.Z)((0,v.Z)(t.prototype),"cacheDOMElements",this).call(this)}},{key:"attachEvents",value:function(){window.addEventListener(r.FP.SCROLL,this.onPageScroll),this.goToNavBtnElm&&(this.goToNavBtnElm.addEventListener(r.FP.FOCUS,this.onGoToNavFocus),this.goToNavBtnElm.addEventListener(r.FP.CLICK,this.onGoToNavClick)),this.hamburgerBtnElm.addEventListener(r.FP.CLICK,this.onHamburgerBtnClick),l.sp.addResizeListener(this.onScreenResize.bind(this)),l.Jw.addEventListener(r.fD.STICKY_NAV_DROPDOWN,this.onStickyNavDropdown),(0,d.Z)((0,v.Z)(t.prototype),"attachEvents",this).call(this)}},{key:"detachEvents",value:function(){window.removeEventListener(r.FP.SCROLL,this.onPageScroll),this.goToNavBtnElm&&(this.goToNavBtnElm.removeEventListener(r.FP.FOCUS,this.onGoToNavFocus),this.goToNavBtnElm.removeEventListener(r.FP.CLICK,this.onGoToNavClick)),this.hamburgerBtnElm.removeEventListener(r.FP.CLICK,this.onHamburgerBtnClick),l.sp.removeResizeListener(this.onScreenResize.bind(this)),l.Jw.removeEventListener(r.fD.STICKY_NAV_DROPDOWN,this.onStickyNavDropdown)}},{key:"afterInit",value:function(){this.goToNavBtnElm&&(this.goToNavBtnElm.innerText=this.localization.goToNav),(0,d.Z)((0,v.Z)(t.prototype),"afterInit",this).call(this)}},{key:"onStickyNavDropdown",value:function(e){this.forcePeek(e.detail.open)}},{key:"forcePeek",value:function(e){if("true"!==this.hamburgerBtnElm.getAttribute(he)){var t=window,i=t.scrollY,n=t.pageYOffset,s=i||n;this.getState().isVisible||e||this.updateMenuVisibility(!0),this.updateState({lastScrollPosition:s})}}},{key:"onPageScroll",value:function(){if("true"!==this.hamburgerBtnElm.getAttribute(he)){var e=window,t=e.scrollY,i=e.pageYOffset,n=this.getState(),s=n.isVisible,a=n.lastScrollPosition,o=t||i;if(Math.abs(o-a)>=50){var l=o>a;!s&&o<100?this.updateMenuVisibility(!1):s!==l&&this.updateMenuVisibility(l),this.updateState({lastScrollPosition:o})}}}},{key:"updateMenuVisibility",value:function(e){this.setDockingState(e),this.element.setAttribute("aria-hidden",e),this.updateState({isVisible:e}),l.Jw.dispatchEvent(l.Jw.createCustomEvent(r.fD.GLOBAL_NAV_PEEK,{detail:{peeking:!e}}))}},{key:"onGoToNavFocus",value:function(){l.sp.gte(l.sp.SIZES.XLARGE)&&(0,l.X5)(0,0)}},{key:"onGoToNavClick",value:function(){this.updateMenuVisibility(!1),this.skipNavBtnElm.focus()}},{key:"onHamburgerBtnClick",value:function(){this.updateMenuVisibility(!1)}},{key:"destroy",value:function(){this.detachEvents(),(0,d.Z)((0,v.Z)(t.prototype),"destroy",this).call(this)}}]),t}(oe),ue=function(){function e(t){(0,a.Z)(this,e),this.containerElm=t,this.setBindings(),this.createSiteSearch()}return(0,o.Z)(e,[{key:"setBindings",value:function(){this.removeSiteSearch=this.removeSiteSearch.bind(this),this.siteSearchSubmitCallback=this.siteSearchSubmitCallback.bind(this)}},{key:"createSiteSearch",value:function(){this.siteSearch=new Q.Zh(this.containerElm),this.siteSearch.updateConfig({submitCallback:this.siteSearchSubmitCallback}),this.siteSearchElm=this.containerElm.querySelector(".".concat("site-search__component-container"))}},{key:"removeSiteSearch",value:function(){this.siteSearch&&this.siteSearchElm&&(this.siteSearch.destroy(),this.siteSearchElm.remove())}},{key:"siteSearchSubmitCallback",value:function(e){var t=window.mbNafta.ns("pageData","globalHeader").config.searchPageUri;window.location.href="".concat(t,"?search=").concat(encodeURIComponent(e))}},{key:"focusElements",get:function(){var e=[];return this.siteSearch&&this.siteSearchElm&&(e=[].slice.call(this.siteSearchElm.querySelectorAll("input, button"))),e}}]),e}();function de(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ve(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?de(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):de(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var me="global-header",be="global-header--closed",pe="global-header__inner--hidden",ge="global-header__item--open",fe="tabindex",ye="data-global-header-state",Ee="aria-expanded",Se="aria-label",ke="height",we=function(){function e(t){(0,a.Z)(this,e),this.element=t,this.authUtilityLabel=null,this.unauthUtilityLabel=window.mbNafta.ns("pageData","globalHeader").config.utilityLabel,this.localization=window.mbNafta.ns("pageData","globalHeader").localization,this.tabbables=new l.cs,this.firstTabbable=null,this.lastTabbable=null,this.init()}return(0,o.Z)(e,[{key:"init",value:function(){this.state={burgerMenuHeight:null,contentHeight:null,currentScreenState:l.sp.getCurrentState(),forceFocusItemIndex:null,hasSetRecentlyViewedLabel:!1,menuOpen:!1,openSubmenuIndex:null,recentlyViewedConfig:{}},this.setBindings(),this.cacheDOMElements(),this.attachEvents(),this.checkAuthState(),this.setSkipNavTabIndex(),this.submenus=new ie(this.globalHeaderButtonElms,this.submenuElms,{recentlyViewedLoaded:this.recentlyViewedLoaded}),this.initSpecialtyHeader(),this.recentlyViewedTileConfig=this.getRecentlyViewedTileFromMenu()}},{key:"initSpecialtyHeader",value:function(){switch(this.element.parentElement.getAttribute("data-global-navigation-behavior")){case"peek-a-boo":this.specialtyHeader=new ce(this.element,this.resetMenus);break;case"docked":this.specialtyHeader=new re(this.element,this.resetMenus);break;default:this.specialtyHeader=null}}},{key:"setBindings",value:function(){this.beginBurgerMenuOpen=this.beginBurgerMenuOpen.bind(this),this.finishBurgerMenuOpen=this.finishBurgerMenuOpen.bind(this),this.onBreakpointCross=this.onBreakpointCross.bind(this),this.onBurgerButtonClick=this.onBurgerButtonClick.bind(this),this.onBurgerMenuCloseTransitionEnd=this.onBurgerMenuCloseTransitionEnd.bind(this),this.onButtonClick=this.onButtonClick.bind(this),this.onDealerFormOpen=this.onDealerFormOpen.bind(this),this.onDisclaimerMarkerClick=this.onDisclaimerMarkerClick.bind(this),this.onFirstElementKeydown=this.onFirstElementKeydown.bind(this),this.onGlobalNavClose=this.onGlobalNavClose.bind(this),this.onGlobalNavDealerSearch=this.onGlobalNavDealerSearch.bind(this),this.onLastElementKeydown=this.onLastElementKeydown.bind(this),this.onScreenResize=this.onScreenResize.bind(this),this.onSubmenuTransitionEnd=this.onSubmenuTransitionEnd.bind(this),this.recentlyViewedLoaded=this.recentlyViewedLoaded.bind(this),this.resetMenus=this.resetMenus.bind(this)}},{key:"cacheDOMElements",value:function(){this.bodyElm=window.document.querySelector("body"),this.skipNavBtnElm=this.element.querySelector(".".concat("top-bar__skip-nav")),this.topBarElm=window.document.querySelector(".".concat("top-bar")),this.burgerButtonElm=this.element.querySelector(".".concat("top-bar__hamburger-button")),this.globalHeaderElm=this.element.querySelector(".".concat(me)),this.globalHeaderInnerElm=this.element.querySelector(".".concat("global-header__inner")),this.globalHeaderItemElms=[].slice.call(this.element.querySelectorAll(".".concat("global-header__item"))),this.globalHeaderButtonElms=[].slice.call(this.element.querySelectorAll(".".concat("global-header__button"))),this.logoButtonElm=this.element.querySelector(".".concat("top-bar__logo")),this.utilityGlobalHeaderButtonElm=this.element.querySelector(".".concat("global-header__button-utility-inner")),this.submenuElms=[].slice.call(this.element.querySelectorAll(".".concat("global-header__submenu"))),this.burgerSiteSearchElm=this.element.querySelector(".".concat("global-header__hamburger-search"))}},{key:"attachEvents",value:function(){this.burgerButtonElm.addEventListener(r.FP.CLICK,this.onBurgerButtonClick),l.sp.addBreakpointListener(this.onBreakpointCross),l.sp.addResizeListener(this.onScreenResize),this.attachMenuEvents(),l.Jw.addEventListener(r.fD.GLOBAL_NAV_DEALER_SEARCH,this.onGlobalNavDealerSearch),l.Jw.addEventListener(r.fD.CLOSE_GLOBAL_NAV,this.onGlobalNavClose),window.addEventListener(c.Z.MARKER_CLICK,this.onDisclaimerMarkerClick)}},{key:"attachMenuEvents",value:function(){var e=this;l.sp.gte(l.sp.SIZES.XLARGE)||this.globalHeaderButtonElms.forEach((function(t){t.addEventListener(r.FP.CLICK,e.onButtonClick)}))}},{key:"attachFirstLastEvents",value:function(){var e,t;null===(e=this.firstTabbable)||void 0===e||e.addEventListener(r.FP.KEYDOWN,this.onFirstElementKeydown),null===(t=this.lastTabbable)||void 0===t||t.addEventListener(r.FP.KEYDOWN,this.onLastElementKeydown)}},{key:"detachEvents",value:function(){this.burgerButtonElm.removeEventListener(r.FP.CLICK,this.onBurgerButtonClick),l.sp.removeBreakpointListener(this.onBreakpointCross),l.sp.removeResizeListener(this.onScreenResize),this.detachMenuEvents(),this.detachFirstLastEvents(),l.Jw.removeEventListener(r.fD.GLOBAL_NAV_DEALER_SEARCH,this.onGlobalNavDealerSearch),l.Jw.removeEventListener(r.fD.CLOSE_GLOBAL_NAV,this.resetMenus),window.removeEventListener(c.Z.MARKER_CLICK,this.onDisclaimerMarkerClick),this.globalHeaderElm.removeEventListener(r.FP.TRANSITION_END,this.onBurgerMenuCloseTransitionEnd)}},{key:"detachMenuEvents",value:function(){var e,t=this;null===(e=this.globalHeaderButtonElms)||void 0===e||e.forEach((function(e){e.removeEventListener(r.FP.CLICK,t.onButtonClick)}))}},{key:"detachFirstLastEvents",value:function(){var e,t;null===(e=this.firstTabbable)||void 0===e||e.removeEventListener(r.FP.KEYDOWN,this.onFirstElementKeydown),null===(t=this.lastTabbable)||void 0===t||t.removeEventListener(r.FP.KEYDOWN,this.onLastElementKeydown)}},{key:"setFirstAndLastTabbable",value:function(){var e=this.tabbables.allTabbables.filter((function(e){return 0===e.tabIndex}));this.firstTabbable=e[0],this.lastTabbable=e[e.length-1],this.attachFirstLastEvents()}},{key:"onFirstElementKeydown",value:function(e){l.sp.gte(l.sp.SIZES.XLARGE)||e.keyCode===r.sd.TAB&&e.shiftKey&&(e.preventDefault(),this.lastTabbable.focus())}},{key:"onLastElementKeydown",value:function(e){l.sp.gte(l.sp.SIZES.XLARGE)||e.keyCode!==r.sd.TAB||e.shiftKey||(e.preventDefault(),this.firstTabbable.focus())}},{key:"setMenuTabbables",value:function(){var e,t=this;if(!l.sp.gte(l.sp.SIZES.XLARGE)){var i=this.getState().openSubmenuIndex,n=[this.logoButtonElm,this.burgerButtonElm].concat((0,s.Z)((null===(e=this.hamburgerSiteSearch)||void 0===e?void 0:e.focusElements)||[]));this.globalHeaderButtonElms.forEach((function(e,a){e.classList.contains("global-header__button--search")||(n.push(e),a===i&&n.push.apply(n,(0,s.Z)(t.submenus.menus[i].focusElements)))})),this.detachFirstLastEvents(),this.firstTabbable=null,this.lastTabbable=null,this.tabbables.enableTabbables(),this.tabbables.allTabbables=[],this.tabbables.setSpecificTabbables(n),this.tabbables.enableTabbables(),this.setFirstAndLastTabbable()}}},{key:"setFocus",value:function(){var e=this,t=this.getState(),i=t.forceFocusItemIndex,n=t.openSubmenuIndex;if(!l.sp.gte(l.sp.SIZES.XLARGE))if(this.burgerSiteSearchElm){var s=this.burgerSiteSearchElm.querySelector("input");s&&(s.focus(),window.requestAnimationFrame((function(){e.globalHeaderElm.scrollTo(0,0)})))}else{var a=null!==i?i:n||0;this.globalHeaderButtonElms[a].focus()}}},{key:"setBurgerMenuHeight",value:function(){var e=this.getState().menuOpen,t=window.innerHeight-this.topBarElm.offsetHeight;this.updateState({burgerMenuHeight:t}),e&&(this.globalHeaderElm.style.height="".concat(t,"px"))}},{key:"unsetBurgerMenuHeight",value:function(){this.updateState({burgerMenuHeight:null}),this.globalHeaderElm.style.height=""}},{key:"onDealerFormOpen",value:function(){l.sp.gte(l.sp.SIZES.XLARGE)||this.toggleHamburgerMenu()}},{key:"onBreakpointCross",value:function(){var e=l.sp.getCurrentState(),t=this.getState().currentScreenState;this.authUtilityLabel&&this.setUtilityButtonLabel(),this.resetMenus(t),this.detachMenuEvents(),this.attachMenuEvents(),this.updateState({currentScreenState:e}),l.sp.gte(l.sp.SIZES.XLARGE)?(this.unsetBurgerMenuHeight(),this.globalHeaderInnerElm.classList.remove(pe)):this.setBurgerMenuHeight(),this.setSkipNavTabIndex()}},{key:"onScreenResize",value:function(){var e=this.getState(),t=e.menuOpen,i=e.openSubmenuIndex;t&&!l.sp.gte(l.sp.SIZES.XLARGE)&&(this.setBurgerMenuHeight(),this.setSubmenuHeight(i,!1))}},{key:"onGlobalNavDealerSearch",value:function(){var e=this.getState().currentScreenState;this.resetMenus(e)}},{key:"getRecentlyViewedTileFromMenu",value:function(){var e,t=((null===(e=this.submenus)||void 0===e?void 0:e.menus)||[]).find((function(e){return e.recentlyViewedTile}))||{};return Object.keys(t).length?ve({additionalAltElement:t.additionalAltElement,index:t.index,menuGetState:t.getState,menuUpdateState:t.updateState},t.recentlyViewedTile):null}},{key:"recentlyViewedLoaded",value:function(e){var t=e.nextElementSibling,i=t.classList.contains("global-header__submenu--additional");if(this.getState().openSubmenuIndex&&i){var n=this.recentlyViewedTileConfig,s=n.getHasRecentlyViewed();s&&n.insertSmallMenuTile(t),this.updateState({hasSetRecentlyViewedLabel:s}),this.setSubmenuHeight(this.recentlyViewedTileIndex,!1)}}},{key:"updateRecentlyViewedTile",value:function(e,t){var i=this.recentlyViewedTileConfig;if(t===i.index){var n=i.menuGetState().isOpen;i&&!n&&t?(this.recentlyViewedTileIndex=t,i.updateTile(i.additionalAltElement,e.currentTarget),i.menuUpdateState({isOpen:!n})):i.menuUpdateState({isOpen:!n})}}},{key:"onGlobalNavClose",value:function(){var e=this.getState().currentScreenState;l.sp.gte(l.sp.SIZES.XLARGE)?this.resetMenus(e):this.onBurgerButtonClick()}},{key:"onButtonClick",value:function(e){var t=null;this.globalHeaderButtonElms.forEach((function(i,n){e.currentTarget!==i||t||(t=n)})),this.handleBurgerMenus(t),2!==t||l.sp.gte(l.sp.SIZES.XLARGE)||this.updateRecentlyViewedTile(e,t)}},{key:"handleBurgerMenus",value:function(e){var t=this.getState().openSubmenuIndex;null===t?this.openSubmenu(e):t===e?this.closeSubmenu(e):(this.closeSubmenu(t,!0),this.openSubmenu(e))}},{key:"onBurgerMenuCloseTransitionEnd",value:function(e){e.propertyName===ke&&e.target===this.globalHeaderElm&&(this.globalHeaderElm.classList.add(be),this.globalHeaderElm.removeEventListener(r.FP.TRANSITION_END,this.onBurgerMenuCloseTransitionEnd),l.Jw.dispatchEvent(l.Jw.createCustomEvent(r.fD.GLOBAL_NAV_MENU_CLOSED)))}},{key:"onSubmenuTransitionEnd",value:function(e){var t=this.getState().openSubmenuIndex;e.propertyName===ke&&e.target===this.submenuElms[t]&&(this.submenuElms[t].removeEventListener(r.FP.TRANSITION_END,this.onSubmenuTransitionEnd),this.submenus.menus[t].focusFirstElement())}},{key:"checkAuthState",value:function(){this.authApi=new h.Z;var e=this.authApi.getAuthState();e.loggedState&&(this.authUtilityLabel="".concat(this.localization.hi," ").concat(e.accountData.name),this.setUtilityButtonLabel())}},{key:"setUtilityButtonLabel",value:function(){l.sp.gte(l.sp.SIZES.XLARGE)?this.utilityGlobalHeaderButtonElm.lastChild.textContent=this.authUtilityLabel:this.utilityGlobalHeaderButtonElm.lastChild.textContent=this.unauthUtilityLabel}},{key:"setSubmenuHeight",value:function(e,t){var i=this.getState().contentHeight,n=Math.ceil(this.submenuElms[e].children[0].getBoundingClientRect().height);i===n||t?t&&this.updateState({contentHeight:0}):(null!==i&&this.submenuElms[e].addEventListener(r.FP.TRANSITION_END,this.onSubmenuTransitionEnd),this.updateState({contentHeight:n})),this.submenuElms[e].style.height="".concat(this.state.contentHeight,"px")}},{key:"openSubmenu",value:function(e){this.setSubmenuHeight(e,!1),this.globalHeaderButtonElms[e].setAttribute(Ee,"true"),this.globalHeaderItemElms[e].classList.add(ge),this.updateState({openSubmenuIndex:e}),this.setMenuTabbables()}},{key:"closeSubmenu",value:function(e,t){this.setSubmenuHeight(e,!0),this.globalHeaderButtonElms[e].setAttribute(Ee,"false"),this.globalHeaderItemElms[e].classList.remove(ge),this.submenus.menus[e].deactivate(),t||(this.updateState({openSubmenuIndex:null}),this.setMenuTabbables())}},{key:"onDisclaimerMarkerClick",value:function(){this.getState().menuOpen&&(this.updateState({menuOpen:!1}),this.burgerMenuClose())}},{key:"onBurgerButtonClick",value:function(){this.toggleBurgerMenu()}},{key:"toggleBurgerMenu",value:function(){var e=this.getState().menuOpen;if(e=!e,this.updateState({menuOpen:e}),e){this.beginBurgerMenuOpen(),l.Jw.dispatchEvent(l.Jw.createCustomEvent(r.fD.GLOBAL_NAV_MENU_OPENED));var t=null;this.burgerSiteSearchElm&&this.renderBurgerSiteSearch(),this.globalHeaderButtonElms.some((function(e,i){return!!e.getAttribute("data-default-open-menu")&&(t=i,!0)})),t<=this.submenuElms.length-1||null===t?(this.handleBurgerMenus(t),this.updateState({forceFocusItemIndex:0})):this.updateState({forceFocusItemIndex:t})}else this.burgerMenuClose()}},{key:"renderBurgerSiteSearch",value:function(){this.hamburgerSiteSearch=new ue(this.burgerSiteSearchElm)}},{key:"removeBurgerSiteSearch",value:function(){this.hamburgerSiteSearch&&this.hamburgerSiteSearch.removeSiteSearch()}},{key:"beginBurgerMenuOpen",value:function(){this.globalHeaderElm.classList.contains(be)?(this.globalHeaderElm.classList.remove(be),window.requestAnimationFrame(this.beginBurgerMenuOpen)):window.requestAnimationFrame(this.finishBurgerMenuOpen)}},{key:"finishBurgerMenuOpen",value:function(){var e=this.getState().burgerMenuHeight;this.globalHeaderElm.style.height="".concat(e,"px"),this.globalHeaderInnerElm.classList.remove(pe),this.disableBodyScroll=new l.lL(".".concat(me),{largeIgnore:!0}),this.setAttributeOnBodyTag(),this.setAriaValues(),this.setMenuTabbables(),this.setFocus(),this.updateState({forceFocusItemIndex:null})}},{key:"burgerMenuClose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getState().openSubmenuIndex;e||this.globalHeaderElm.addEventListener(r.FP.TRANSITION_END,this.onBurgerMenuCloseTransitionEnd),this.disableBodyScroll&&this.disableBodyScroll.destroy(),this.setAriaValues(),this.removeAttributeFromBodyTag(),this.globalHeaderElm.style.height="",null!==t&&this.closeSubmenu(t),this.detachFirstLastEvents(),this.removeBurgerSiteSearch(),this.updateState({contentHeight:null}),l.Jw.dispatchEvent(l.Jw.createCustomEvent(r.fD.GLOBAL_NAV_MENU_CLOSED))}},{key:"setAriaValues",value:function(){this.globalHeaderElm.setAttribute(Ee,this.getState().menuOpen),this.burgerButtonElm.setAttribute(Ee,this.getState().menuOpen),this.getState().menuOpen?this.burgerButtonElm.setAttribute(Se,this.localization.closeMainMenu):this.burgerButtonElm.setAttribute(Se,this.localization.mainMenu)}},{key:"setAttributeOnBodyTag",value:function(){this.bodyElm.setAttribute(ye,"open")}},{key:"removeAttributeFromBodyTag",value:function(){this.bodyElm.removeAttribute(ye)}},{key:"resetMenus",value:function(e){var t=this.getState().menuOpen;e===l.sp.SIZES.SMALL||e===l.sp.SIZES.LARGE?t&&(this.updateState({menuOpen:!1}),this.burgerMenuClose(!0)):this.submenus.reset()}},{key:"setSkipNavTabIndex",value:function(){l.sp.gte(l.sp.SIZES.XLARGE)?this.skipNavBtnElm.setAttribute(fe,"0"):this.skipNavBtnElm.setAttribute(fe,"-1")}},{key:"updateState",value:function(e){this.state=ve({},this.state,{},e)}},{key:"getState",value:function(){return this.state}}]),e}()},99307:function(e,t,i){i.d(t,{Z:function(){return r}});var n=i(15671),s=i(43144),a=i(61156),o=i(48218),l={SMALL:90,XLARGE:100},r=function(){function e(t){(0,n.Z)(this,e),this.element=t,this.init()}return(0,s.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.setBindings(),this.iframeElm&&(this.contentWindow=this.iframeElm.contentWindow,this.initPostMessages(),this.attachEvents(),this.setIframeSrc(),"true"!==this.iframeElm.dataset.maintainAr||this.postMessageOrigin||(this.setAspectRatio(),this.onScreenResize()))}},{key:"setBindings",value:function(){this.onScreenResize=this.onScreenResize.bind(this),this.onPostMessage=this.onPostMessage.bind(this)}},{key:"cacheDOM",value:function(){this.iframeElm=this.element.querySelector(".".concat("iframe-module__iframe"))}},{key:"attachEvents",value:function(){this.postMessageOrigin||"true"!==this.iframeElm.dataset.maintainAr||a.sp.addResizeListener(this.onScreenResize),this.postMessageOrigin&&window.addEventListener(o.FP.MESSAGE,this.onPostMessage)}},{key:"setAspectRatio",value:function(){var e=parseInt(this.iframeElm.dataset.arWidth,10),t=parseInt(this.iframeElm.dataset.arHeight,10);e&&t&&(this.aspectRatio=t/e)}},{key:"setIframeSrc",value:function(){this.iframeElm.setAttribute("src",this.element.dataset.src)}},{key:"initPostMessages",value:function(){this.postMessageOrigin=this.element.dataset.origin,this.postMessageDimensions={height:null,width:null}}},{key:"updatePostMessageDimensions",value:function(e){var t=parseInt(e.value,10);this.postMessageDimensions[e.type]=t,this.iframeElm.setAttribute(e.type,t),this.iframeElm.style[e.type]="".concat(t,"px")}},{key:"scrollToIframeTop",value:function(){var e=l[a.sp.gte(a.sp.SIZES.XLARGE)?"XLARGE":"SMALL"],t=window.scrollY,i=this.element.getBoundingClientRect().top;(0,a.X5)(t+i-e,0)}},{key:"onPostMessage",value:function(e){var t=this;e.origin===this.postMessageOrigin&&e.source===this.contentWindow&&Array.isArray(e.data)&&e.data.forEach((function(e){switch(e.type){case"height":case"width":t.updatePostMessageDimensions(e);break;case"scroll_up":t.scrollToIframeTop()}}))}},{key:"onScreenResize",value:function(){this.iframeElm.style.height="".concat(this.iframeElm.offsetWidth*this.aspectRatio,"px")}}]),e}()},31732:function(e,t,i){i.d(t,{Z:function(){return d}});var n=i(42982),s=i(15671),a=i(43144),o=i(61156),l="sub-page-nav--dropdown",r="sub-page-nav--dropdown-open",h="no-scroll",c="aria-expanded",u="tabindex",d=function(){function e(t){(0,s.Z)(this,e),this.element=t,this.onToggleClick=this.onToggleClick.bind(this),this.closeMenu=this.closeMenu.bind(this),this.onScreenResize=this.onScreenResize.bind(this),this.init()}return(0,a.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.attachEvents(),this.setMenuDisplayType(),this.markAsReady()}},{key:"cacheDOM",value:function(){this.bodyElm=document.body,this.toggleBtnElm=this.element.querySelector(".".concat("sub-page-nav__dropdown-toggle")),this.listItemsElms=(0,n.Z)(this.element.querySelectorAll(".".concat("sub-page-nav__item-link"))),this.itemList=this.element.querySelector(".".concat("sub-page-nav__items-list")),this.subNavSection=this.bodyElm.querySelector(".".concat("sub-page-nav"))}},{key:"attachEvents",value:function(){this.accordionClickHandler=new o.Lp(this.toggleBtnElm,this.onToggleClick,this.closeMenu,{ignoreElems:this.element.parentElement}),o.sp.addResizeListener(this.onScreenResize)}},{key:"markAsReady",value:function(){this.element.classList.remove("sub-page-nav__container--hidden")}},{key:"onScreenResize",value:function(e){this.setMenuDisplayType(),e.small||this.bodyElm.classList.remove(h)}},{key:"setMenuDisplayType",value:function(){var e=this.listItemsElms.reduce((function(e,t){return e+t.clientWidth}),0)>=this.itemList.clientWidth-20;this.element.classList[e?"add":"remove"](l),this.listItemsElms.forEach((function(t){t[e?"setAttribute":"removeAttribute"](u,"-1")}))}},{key:"onToggleClick",value:function(){this[this.element.classList.contains(r)?"closeMenu":"openMenu"]()}},{key:"openMenu",value:function(){this.toggleBtnElm.setAttribute(c,"true"),this.element.classList.add(r),this.element.classList.contains(l)&&this.listItemsElms.forEach((function(e){e.removeAttribute(u)})),o.sp.getState().small&&(this.bodyElm.classList.add(h),o.jG.insertAdjacentElement(this.element,this.bodyElm,"afterbegin"))}},{key:"closeMenu",value:function(){this.toggleBtnElm.setAttribute(c,"false"),this.element.classList.remove(r),this.element.classList.contains(l)&&this.listItemsElms.forEach((function(e){e.setAttribute(u,"-1")})),o.sp.getState().small&&(this.bodyElm.classList.remove(h),o.jG.insertAdjacentElement(this.element,this.subNavSection,"afterbegin"))}}]),e}()},47984:function(e,t,i){i.d(t,{Z:function(){return c}});var n=i(42982),s=i(15671),a=i(43144),o=i(48218),l=i(61156),r="id",h=window.mbNafta.ns("pageData").variantInfo.isOnDisplay,c=function(){function e(t){(0,s.Z)(this,e),this.element=t,this.inlineAnchorLinks=[],this.init()}return(0,a.Z)(e,[{key:"init",value:function(){this.setBindings(),this.cacheDOM(),this.inlineAnchor&&this.groomAnchor(),this.inlineAnchorLinks.length>0&&this.groomLinks()}},{key:"setBindings",value:function(){this.onClick=this.onClick.bind(this)}},{key:"cacheDOM",value:function(){this.inlineAnchorLinks=(0,n.Z)(this.element.querySelectorAll("a")),this.inlineAnchor=this.element.querySelector("".concat("a","[").concat(r,"]"))}},{key:"groomAnchor",value:function(){this.element.setAttribute(r,this.inlineAnchor.getAttribute(r)),this.inlineAnchor.remove(),this.inlineAnchor=null}},{key:"groomLinks",value:function(){h?this.removeLinks():this.attachEvents()}},{key:"attachEvents",value:function(){var e=this;this.inlineAnchorLinks.forEach((function(t){t.hash&&t.attributes.href.value&&t.hash===t.attributes.href.value&&"#disclaimer-drawer"!==t.attributes.href.value&&t.addEventListener(o.FP.CLICK,e.onClick)}))}},{key:"removeLinks",value:function(){this.inlineAnchorLinks.forEach((function(e){var t=document.createElement("span");t.innerHTML="".concat(e.innerHTML),e.parentNode.replaceChild(t,e)}))}},{key:"onClick",value:function(e){e.preventDefault(),l.Jw.dispatchEvent(l.Jw.createCustomEvent(o.fD.STICKY_NAV_TRIGGER,{detail:{hash:e.target.hash}}))}}]),e}()}}]);
//# sourceMappingURL=4b24634099fccc86a523.bundle.js.map